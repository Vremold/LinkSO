382,384,What is the meaning of the type safety warning in certain Java generics casts?,"What is the meaning of the Java warning?  Type safety: The cast from Object to List is actually checking against the erased type ListI get this warning when I try to cast an Object to a type with generic information, such as in the following code:--CODE--","[""Object object = getMyList();List<Integer> list = (List<Integer>) object;""]",<java><generics><warnings><casting><type-safety>,384,"This warning is there because Java is not actually storing type information at run-time in an object that uses generics.  Thus, if object is actually a List, there will be no ClassCastException at run-time except until an item is accessed from the list that doesn't match the generic type defined in the variable.  This can cause further complications if items are added to the list, with this incorrect generic type information.  Any code still holding a reference to the list but with the correct generic type information will now have an inconsistent list.  To remove the warning, try:--CODE--However, note that you will not be able to use certain methods such as add because the compiler doesn't know if you are trying to add an object of incorrect type.  The above will work in a lot of situations, but if you have to use add, or some similarly restricted method, you will just have to suffer the yellow underline in Eclipse (or a SuppressWarning annotation).","[""List<?> list = (List<?>) object;""]",Generic Programming,"{""Restrictions and Limitations"": 1.35, ""Defining a Simple Generic Class"": 0.3, ""Generic Code and the Virtual Machine"": 0.7}"
2158,2245,Creating a custom JButton in Java,"Is there a way to create a JButton with your own button graphic and not just with an image inside the button? If not, is there another way to create a custom JButton in java?",[],<java><swing><jbutton>,2245,"When I was first learning Java we had to make Yahtzee and I thought it would be cool to create custom Swing components and containers instead of just drawing everything on one JPanel.  The benefit of extending Swing components, of course, is to have the ability to add support for keyboard shortcuts and other accessibility features that you can't do just by having a paint() method print a pretty picture.  It may not be done the best way however, but it may be a good starting point for you.Edit 8/6 - If it wasn't apparent from the images, each Die is a button you can click. This will move it to the DiceContainer below.  Looking at the source code you can see that each Die button is drawn dynamically, based on its value.Here are the basic steps:Create a class that extends JComponentCall parent constructor super() in your constructorsMake sure you class implements MouseListenerPut this in the constructor:--CODE--Override these methods:--CODE--Override this method:--CODE--The amount of space you have to work with when drawing your button is defined by getPreferredSize(), assuming getMinimumSize() and getMaximumSize() return the same value.  I haven't experimented too much with this but, depending on the layout you use for your GUI your button could look completely different.And finally, the [source code](""https://github.com/kdeloach/labs/blob/master/java/yahtzee/src/Dice.java"").  In case I missed anything.  ","[""enableInputMethods(true);   addMouseListener(this);"", ""public Dimension getPreferredSize()  public Dimension getMinimumSize()  public Dimension getMaximumSize()"", ""public void paintComponent(Graphics g)""]",User Interface Components with Swing,"{""Sophisticated Layout Management"": 0.8, ""Introduction to Layout Management"": 0.6}"
2968,2985,What are the different methods to parse strings in Java?,"For parsing player commands, I've most often used the [split](""http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29"") method to split a string by delimiters and then to then just figure out the rest by a series of ifs or switches. What are some different ways of parsing strings in Java?",[],<java><string><parsing>,2985,"I assume you're trying to make the command interface as forgiving as possible. If this is the case, I suggest you use an algorithm similar to this:Read in the stringSplit the string into tokensUse a dictionary to convert synonyms to a common form For example, convert ""hit"", ""punch"", ""strike"", and ""kick"" all to ""hit""Perform actions on an unordered, inclusive baseUnordered - ""punch the monkey in the face"" is the same thing as ""the face in the monkey punch""Inclusive - If the command is supposed to be ""punch the monkey in the face"" and they supply ""punch monkey"", you should check how many commands this matches. If only one command, do this action. It might even be a good idea to have command priorities, and even if there were even matches, it would perform the top action.",[],Fundamental Programming Structures in Java,"{""Strings"": 1.55}"
4149,154588,How do I use Java to read from a file that is actively being written to?,"I have an application that writes information to file. This information is used post-execution to determine pass/failure/correctness of the application. I'd like to be able to read the file as it is being written so that I can do these pass/failure/correctness checks in real time.I assume it is possible to do this, but what are the gotcha's involved when using Java? If the reading catches up to the writing, will it just wait for more writes up until the file is closed, or will the read throw an exception at this point? If the latter, what do I do then? My intuition is currently pushing me towards BufferedStreams. Is this the way to go?",[],<java><file><file-io>,154588,"Could not get the example to work using FileChannel.read(ByteBuffer) because it isn't a blocking read. Did however get the code below to work:--CODE--Of course the same thing would work as a timer instead of a thread, but I leave that up to the programmer. I'm still looking for a better way, but this works for me for now.Oh, and I'll caveat this with: I'm using 1.4.2. Yes I know I'm in the stone ages still.","[""boolean running = true;BufferedInputStream reader = new BufferedInputStream(new FileInputStream( \""out.txt\"" ) );public void run() {    while( running ) {        if( reader.available() > 0 ) {            System.out.print( (char)reader.read() );        }        else {            try {                sleep( 500 );            }            catch( InterruptedException ex ) {                running = false;            }        }    }}""]",Fundamental Programming Structures in Java,"{""Input and Output"": 1.8}"
6639,,How should I load files into my Java application?,How should I load files into my Java application?,[],<java><file><loading>,6640,"The short answerUse one of these two methods:[Class.getResource(String)](""http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getResource(java.lang.String)"")[Class.getResourceAsStream(String)](""http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)"")For example:--CODE----The long answerTypically, one would not want to load files using absolute paths. For example, don__ do this if you can help it:--CODE--This technique is not recommended for at least two reasons. First, it creates a dependency on a particular operating system, which prevents the application from easily moving to another operating system. One of Java__ main benefits is the ability to run the same bytecode on many different platforms. Using an absolute path like this makes the code much less portable.Second, depending on the relative location of the file, this technique might create an external dependency and limit the application__ mobility. If the file exists outside the application__ current directory, this creates an external dependency and one would have to be aware of the dependency in order to move the application to another machine (error prone).Instead, use the getResource() methods in the Class class. This makes the application much more portable. It  can be moved to different platforms, machines, or directories and still function correctly.","[""InputStream inputStream = YourClass.class.getResourceAsStream(\""image.jpg\"");"", ""File file = new File(\""C:\\\\Users\\\\Joe\\\\image.jpg\"");""]",Fundamental Programming Structures in Java,"{""Input and Output"": 0.9}"
7269,46902,How can I identify in which Java Applet context running without passing an ID?,"I'm part of a team that develops a pretty big Swing Java Applet. Most of our code are legacy and there are tons of singleton references. We've bunched all of them to a single ""Application Context"" singleton. What we now need is to create some way to separate the shared context (shared across all applets currently showing) and non-shared context (specific to each applet currently showing). However, we don't have an ID at each of the locations that call to the singleton, nor do we want to propagate the ID to all locations. What's the easiest way to identify in which applet context we're running? (I've tried messing with classloaders, thread groups, thread ids... so far I could find nothing that will enable me to ID the origin of the call).",[],<java><swing><applet>,46902,"Singletons are evil, what do you expect? ;)Perhaps the most comprehensive approach would be to load the bulk of the applet in a different class loader (use java.net.URLClassLoader.newInstance). Then use a WeakHashMap to associate class loader with an applet. If you could split most of the code into a common class loader (as a parent of each per-applet class loader) and into the normal applet codebase, that would be faster but more work.Other hacks:If you have access to any component, you can use Component.getParent repeatedly or SwingUtilities.getRoot.If you are in a per-applet instance thread, then you can set up a ThreadLocal.From the EDT, you can read the current event from the queue (java.awt.EventQueue.getCurrentEvent()), and possibly find a component from that. Alternatively push an EventQueue with a overridden dispatchEvent method.",[],Graphical User Interface Programming,"{""Event Handling"": 0.7}"
7681,7688,Test serialization encoding,"What is the best way to verify/test that a text string is serialized to a byte array with a certain encoding?In my case, I want to verify that an XML structure is serialized to a byte array with the UTF-8 encoding which is of variable character length. As an example, my current ugly procedure is to inject a character known to require two bytes into the structure before serializing, then replacing the two-byte character with an ASCII character and comparing the serialized array lengths. This should yield two serialized arrays where the array containing the two-byte characters should have length +1.Plus if the solution is elegant for Java. I can't think of any elegant way to seek for a byte sequence in a byte array. (Could be used to seek for a known byte sequence representing the desired character representation in UTF-8.)",[],<java><xml><string><serialization><encoding>,7688,"Perhaps you could deserialise the byte array using a known encoding and ensure that (a) it doesn't throw any exceptions, and (b) deserialises to the original string. It seems that from your description of the scenario, you may not have the original string readily available. Might there be a way to create it?",[],Fundamental Programming Structures in Java,"{""Strings"": 1.35}"
10586,10713,Small modification to an XML document using StAX,"I'm currently trying to read in an XML file, make some minor changes (alter the value of some attributes), and write it back out again.I have intended to use a StAX parser (javax.xml.stream.XMLStreamReader) to read in each event, see if it was one I wanted to change, and then pass it straight on to the StAX writer (javax.xml.stream.XMLStreamReader) if no changes were required.Unfortunately, that doesn't look to be so simple - The writer has no way to take an event type and a parser object, only methods like writeAttribute and writeStartElement. Obviously I could write a big switch statement with a case for every possible type of element which can occur in an XML document, and just write it back out again, but it seems like a lot of trouble for something which seems like it should be simple.Is there something I'm missing that makes it easy to write out a very similar XML document to the one you read in with StAX?",[],<java><xml><stax>,10713,"StAX works pretty well and is very fast. I used it in a project to parse XML files which are up to 20MB. I don't have a thorough analysis, but it was definitely faster than SAX. As for your question: The difference between streaming and event-handling, AFAIK is control. With the streaming API you can walk through your document step by step and get the contents you want. Whereas the event-based API you can only handle what you are interested in.",[],Fundamental Programming Structures in Java,"{""Input and Output"": 1.05}"
18524,18529,Converting List<Integer> to List<String>,"I have a list of integers, List and I'd like to convert all the integer objects into Strings, thus finishing up with a new List.Naturally, I could create a new List and loop through the list calling String.valueOf() for each integer, but I was wondering if there was a better (read: more automatic) way of doing it?",[],<java><string><collections><integer>,18529,"As far as I know, iterate and instantiate is the only way to do this.  Something like (for others potential help, since I'm sure you know how to do this):--CODE--","[""List<Integer> oldList = .../* Specify the size of the list up front to prevent resizing. */List<String> newList = new ArrayList<String>(oldList.size()) for (Integer myInt : oldList) {   newList.add(String.valueOf(myInt)); }""]",Fundamental Programming Structures in Java,"{""Strings"": 1.45}"
19893,19904,How do you embed binary data in XML?,"I have two applications written in Java that communicate with each other using XML messages over the network.  I'm using a SAX parser at the receiving end to get the data back out of the messages.  One of the requirements is to embed binary data in an XML message, but SAX doesn't like this.  Does anyone know how to do this?UPDATE:  I got this working with the [Base64](""http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html"") class from the [apache commons codec library](""http://commons.apache.org/codec/""), in case anyone else is trying something similar.",[],<java><xml><binary><binary-data>,19904,"You could encode the binary data using base64 and put it into a Base64 element; the below article is a pretty good one on the subject.[Handling Binary Data in XML Documents](""http://www.xml.com/pub/a/98/07/binary/binary.html"")",[],Fundamental Programming Structures in Java,"{""Input and Output"": 0.5, ""Strings"": 0.55}"
20880,20901,Java JPanel redraw issues,"I have a Java swing application with a panel that contains three JComboBoxes that do not draw properly.The combox boxes just show up as the down arrow on the right side, but without the label of the currently selected value.The boxes will redraw correctly if the window is resized either bigger or smaller by even one pixel.All of my googling has pointed to calling revalidate() on the JPanel to fix this, but that hasn't worked for me.Calling updateUI() on the JPanel has changed it from always displaying incorrectly to displaying incorrectly half of the time.  Has anyone else seen this and found a different way to force a redraw of the combo boxes?",[],<java><swing><jpanel>,20901,"Can you give us some more information on how you add the combo boxes to the JPanel?  This is a pretty common thing to do in Swing so I doubt that it's a JVM issue but I guess anything is possible.Specifically, I would double check to make sure you're not accessing the GUI from any background threads.  In this case, maybe you're reading the choices from a DB or something and updating the JComboBox from a background thread, which is a big no-no in Swing.  See SwingUtils.invokeLater().",[],User Interface Components with Swing,"{""Choice Components"": 1.7000000000000002}"
24866,24902,Is it essential that I use libraries to manipulate XML?,I am using Java back end for creating an XML string which is passed to the browser. Currently I am using simple string manipulation to produce this XML. Is it essential that I use some XML library in Java to produce the XML string?I find the libraries very difficult to use compared to what I need.,[],<java><xml>,24902,"It's not essential, but advisable. However, if string manipulation works for you, then go for it! There are plenty of cases where small or simple XML text can be safely built by hand.Just be aware that creating XML text is harder than it looks. Here's some criteria I would consider:First: how much control do you have on the information that goes into the xml?The less control you have on the source data, the more likely you will have trouble, and the more advantageous the library becomes. For example: (a) Can you guarantee that the element names will never have a character that is illegal in a name? (b) How about quotes in an attribute's content? Can they happen, and are you handling them? (c) Does the data ever contain anything that might need to be encoded as an [entity](""http://en.wikipedia.org/wiki/XML_entity"") (like the less-than which often needs to be output as &amp;lt;); are you doing it correctly?Second, maintainability: is the code that builds the XML easy to understand by someone else?You probably don't want to be stuck with the code for life. I've worked with second-hand C++ code that hand-builds XML and it can be surprisingly obscure. Of course, if this is a personal project of yours, then you don't need to worry about ""others"": substitute ""in a year"" for ""others"" above.I wouldn't worry about performance. If your XML is simple enough that you can hand-write it, any overhead from the library is probably meaningless. Of course, your case might be different, but you should measure to prove it first.Finally, Yes; you can hand build XML text by hand if it's simple enough; but not knowing the libraries available is probably not the right reason.A modern XML library is a quite powerful tool, but it can also be daunting. However, learning the essentials of your XML library is not that hard, and it can be quite handy; among other things, it's almost a requisite in today's job marketplace. Just don't get bogged down by namespaces, schemas and other fancier features until you get the essentials.Good luck.",[],Fundamental Programming Structures in Java,"{""Strings"": 1.3}"
2158,2245,Creating a custom JButton in Java,"Is there a way to create a JButton with your own button graphic and not just with an image inside the button? If not, is there another way to create a custom JButton in java?",[],<java><swing><jbutton>,2245,"When I was first learning Java we had to make Yahtzee and I thought it would be cool to create custom Swing components and containers instead of just drawing everything on one JPanel.  The benefit of extending Swing components, of course, is to have the ability to add support for keyboard shortcuts and other accessibility features that you can't do just by having a paint() method print a pretty picture.  It may not be done the best way however, but it may be a good starting point for you.Edit 8/6 - If it wasn't apparent from the images, each Die is a button you can click. This will move it to the DiceContainer below.  Looking at the source code you can see that each Die button is drawn dynamically, based on its value.Here are the basic steps:Create a class that extends JComponentCall parent constructor super() in your constructorsMake sure you class implements MouseListenerPut this in the constructor:--CODE--Override these methods:--CODE--Override this method:--CODE--The amount of space you have to work with when drawing your button is defined by getPreferredSize(), assuming getMinimumSize() and getMaximumSize() return the same value.  I haven't experimented too much with this but, depending on the layout you use for your GUI your button could look completely different.And finally, the [source code](""https://github.com/kdeloach/labs/blob/master/java/yahtzee/src/Dice.java"").  In case I missed anything.  ","[""enableInputMethods(true);   addMouseListener(this);"", ""public Dimension getPreferredSize()  public Dimension getMinimumSize()  public Dimension getMaximumSize()"", ""public void paintComponent(Graphics g)""]",User Interface Components with Swing,"{""Sophisticated Layout Management"": 0.8, ""Introduction to Layout Management"": 0.6}"
31127,45580,Java Swing: Displaying images from within a Jar,"When running a Java app from eclipse my ImageIcon shows up just fine.But after creating a jar the path to the image obviously gets screwed up.Is there a way to extract an image from the jar at runtime so I can then open it up?  Or, is there a better way to do this?I'd like to distribute a single jar file if possible.",[],<java><swing><embedded-resource><imageicon>,45580,"To create an ImageIcon from an image file within the same jars your code is loaded:--CODE--Class.getResource returns a URL of a resource (or null!). ImageIcon has a constructors that load from a URL.To construct a URL for a resource in a jar not on your ""classpath"", see the documentation for java.net.JarURLConnection.","[""new javax.swing.ImageIcon(getClass().getResource(\""myimage.jpeg\""))""]",Graphical User Interface Programming,"{""Displaying Information in a Component"": 1.65}"
32519,32707,List in JScrollPane painting outside the viewport,"I have a list, each item of which has several things in it, including a JProgressBar which can be updated a lot. Each time one of the items updates its JProgressBar, the ListDataListener on the list tries to scroll it to the visible range using--CODE--Note that I'm trying to make sure the scrolling is done in the dispatch thread, since I thought maybe the problem was it being scrolled while it was repainting.  And yet, I still have a problem where if things are really active, some of the list items paint outside of the viewport, overwriting what's outside the JScrollPane.  Forcing an exposure event will repaint those things, but it's annoying.Is there anything else I need to look out for to stop these things painting outside of their clipping area?","[""/* * This makes the updating content item automatically scroll * into view if it is off the viewport. */public void contentsChanged(final ListDataEvent evt) {    if (!EventQueue.isDispatchThread()) {        /**          * Make sure the scrolling happens in the graphics \""dispatch\"" thread.          */        EventQueue.invokeLater(new Runnable() {            public void run()  {               contentsChanged(evt);            }        });    }    if (playbackInProgress) {        int index = evt.getIndex0();        currentContentList.ensureIndexIsVisible(index);    }}""]",<java><swing><jscrollpane>,32707,"Have you tried explicitly enabling double-buffering on the JList and/or the components that it is drawing over? (with:[setDoubleBuffered(boolean aFlag)](""http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html#setDoubleBuffered(boolean)""))Another thought is that you might need to exit the function immediately after delegating to the EDT.  The way your code is written, it looks like the update will happen in both threads if ContentChanged is invoked from a non-EDT thread.  Logging in the first if (or set a breakpoint in the if -- but not in the runnable -- should help determine if that is your problem.eg:--CODE--","[""public void contentsChanged(final ListDataEvent evt){    if (!EventQueue.isDispatchThread())    {        log.debug(\""Delegating contentsChanged(...) to EDT\"");        EventQueue.invokeLater(new Runnable()         {            public void run()             {                contentsChanged(evt);            }        });        // don't run ensureIndexIsVisible twice:        return;     }     if (playbackInProgress)     {         int index = evt.getIndex0();         currentContentList.ensureIndexIsVisible(index);     }}""]",Concurrency,"{""Tasks and Thread Pools"": 0.8, ""Asynchronous Computations"": 0.65}"
32529,32549,How do I restrict JFileChooser to a directory?,"I want to limit my users to a directory and its sub directories but the ""Parent Directory"" button allows them to browse to an arbitrary directory.How should I go about doing that?",[],<java><swing><jfilechooser>,32549,"You can probably do this by setting your own [FileSystemView](""https://docs.oracle.com/javase/8/docs/api/javax/swing/filechooser/FileSystemView.html"").",[],User Interface Components with Swing,"{""Dialog Boxes"": 0.9}"
33708,33715,"My (Java/Swing) MouseListener isn't listening, help me figure out why","So I've got a JPanel implementing MouseListener and MouseMotionListener:--CODE--The trouble is, none of these mouse functions are ever called. DisplayArea is created like this:--CODE--I am not really a Java programmer (this is part of an assignment), but I can't see anything glaringly obvious. Can someone smarter than I see anything?","[""import javax.swing.*;import java.awt.*;import java.awt.event.*;public class DisplayArea extends JPanel implements MouseListener, MouseMotionListener  {    public DisplayArea(Rectangle bounds, Display display) {        setLayout(null);        setBounds(bounds);        setOpaque(false);        setPreferredSize(new Dimension(bounds.width, bounds.height));        this.display = display;    }    public void paintComponent(Graphics g) {         Graphics2D g2 = (Graphics2D)g;         if (display.getControlPanel().Antialiasing()) {             g2.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));         }         g2.setColor(Color.white);         g2.fillRect(0, 0, getWidth(), getHeight());    }    public void mousePressed(MouseEvent event) {        System.out.println(\""mousePressed()\"");        mx1 = event.getX();        my1 = event.getY();    }    public void mouseReleased(MouseEvent event) {        System.out.println(\""mouseReleased()\"");        mx2 = event.getX();        my2 = event.getY();        int mode = display.getControlPanel().Mode();        switch (mode) {        case ControlPanel.LINE:             System.out.println(\""Line from \"" + mx1 + \"", \"" + my1 + \"" to \"" + mx2 + \"", \"" + my2 + \"".\"");        }    }    public void mouseEntered(MouseEvent event) {        System.out.println(\""mouseEntered()\"");    }    public void mouseExited(MouseEvent event) {        System.out.println(\""mouseExited()\"");    }    public void mouseClicked(MouseEvent event) {        System.out.println(\""mouseClicked()\"");    }    public void mouseMoved(MouseEvent event) {        System.out.println(\""mouseMoved()\"");    }    public void mouseDragged(MouseEvent event) {         System.out.println(\""mouseDragged()\"");    }    private Display display = null;    private int mx1 = -1;    private int my1 = -1;    private int mx2 = -1;    private int my2 = -1;}"", ""da = new DisplayArea(new Rectangle(CONTROL_WIDTH, 0, DISPLAY_WIDTH, DISPLAY_HEIGHT), this);""]",<java><swing><actionlistener><mouselistener>,33715,"The implements mouselistener, mousemotionlistener just allows the displayArea class to listen to some, to be defined, Swing component's mouse events. You have to explicitly define what it should be listening at. So I suppose you could add something like this to the constructor:--CODE--","[""this.addMouseListener(this);this.addMouseMotionListener(this);""]",Graphical User Interface Programming,"{""Event Handling"": 1.9}"
37026,37046,Java: notify() vs. notifyAll() all over again,"If one Googles for ""difference between notify() and notifyAll()"" then a lot of explanations will pop up (leaving apart the javadoc paragraphs). It all boils down to the number of waiting threads being waken up: one in notify() and all in notifyAll().However (if I do understand the difference between these methods right), only one thread is always selected for further monitor acquisition; in the first case the one selected by the VM, in the second case the one selected by the system thread scheduler. The exact selection procedures for both of them (in the general case) are not known to the programmer.What's the useful difference between [notify()](""http://download.oracle.com/javase/6/docs/api/java/lang/Object.html#notify%28%29"") and [notifyAll()](""http://download.oracle.com/javase/6/docs/api/java/lang/Object.html#notifyAll%28%29"") then? Am I missing something?",[],<java><multithreading>,37046,"  However (if I do understand the difference between these methods right), only one thread is always selected for further monitor acquisition.That is not correct.  o.notifyAll() wakes all of the threads that are blocked in o.wait() calls.  The threads are only allowed to return from o.wait() one-by-one, but they each will get their turn.Simply put, it depends on why your threads are waiting to be notified. Do you want to tell one of the waiting threads that something happened, or do you want to tell all of them at the same time?In some cases, all waiting threads can take useful action once the wait finishes. An example would be a set of threads waiting for a certain task to finish; once the task has finished, all waiting threads can continue with their business. In such a case you would use notifyAll() to wake up all waiting threads at the same time.Another case, for example mutually exclusive locking, only one of the waiting threads can do something useful after being notified (in this case acquire the lock). In such a case, you would rather use notify(). Properly implemented, you could use notifyAll() in this situation as well, but you would unnecessarily wake threads that can't do anything anyway.In many cases, the code to await a condition will be written as a loop:--CODE--That way, if an o.notifyAll() call wakes more than one waiting thread, and the first one to return from the o.wait() makes leaves the condition in the false state, then the other threads that were awakened will go back to waiting.","[""synchronized(o) {    while (! IsConditionTrue()) {        o.wait();    }    DoSomethingThatOnlyMakesSenseWhenConditionIsTrue_and_MaybeMakeConditionFalseAgain();}""]",Concurrency,"{""Synchronization"": 1.9}"
37089,37090,How can an application use multiple cores or CPUs in .NET or Java?,"When launching a thread or a process in .NET or Java, is there a way to choose which processor or core it is launched on? How does the shared memory model work in such cases?",[],<c#><java><multithreading>,37090,"If you're using multiple threads, the operating system will automatically take care of using multiple cores.",[],Concurrency,"{""Tasks and Thread Pools"": 0.8, ""Thread States"": 0.5}"
37551,,Multiple threads stuck in native calls (Java),"I have a problem with an application running on Fedora Core 6 with JDK 1.5.0_08.After some amount of uptime (usually some days) threads begin getting stuck in native methods.The threads are locked in something like this:--CODE--or--CODE--Especially puzzling to me is this one:--CODE--The threads remain stuck until the VM is restarted.Can anyone give me an idea as to what is happening here, what might be causing the native methods to block?The monitor entry address range at the top of each stuck thread is different. How can I figure out what is holding this monitor?Any suggestions or advice will be greatly appreciated!Thanks,David ","[""\""pool-2-thread-2571\"" prio=1 tid=0x08dd0b28 nid=0x319e waiting for monitor entry [0xb91fe000..0xb91ff7d4]at java.lang.Class.getDeclaredConstructors0(Native Method)"", ""\""pool-2-thread-2547\"" prio=1 tid=0x75641620 nid=0x1745 waiting for monitor entry [0xbc7fe000..0xbc7ff554]at sun.misc.Unsafe.defineClass(Native Method)"", ""\""HealthMonitor-10\"" daemon prio=1 tid=0x0868d1c0 nid=0x2b72 waiting for monitor entry [0xbe5ff000..0xbe5ff4d4]at java.lang.Thread.dumpThreads(Native Method)at java.lang.Thread.getStackTrace(Thread.java:1383)""]",<java><multithreading><native-methods><blocked>,152563,"My initial suspicion would be that you are experiencing some sort of class-loader realted dead lock. I imagine, that class loading needs to be synchronized at some level because class information will become available for the entire VM, not just the thread where it was initially loaded.The fact that the methods on top of the stack are native methods seems to be pure coincidence, since part of the class loading mechanism happens to implemented that way.I would investigate further what is going on class-loading wise. Maybe some thread uses the class loader to load a class from a network location which is slow/unavailable and thus blocks for a really long time, not yielding the monitor to other threads that want to load a class. Investigating the output when starting the JVM with -verbose:class might be one thing to try.",[],Concurrency,"{""Synchronization"": 1.65}"
39108,,Drawing animations at the show of a JDialog,"What would be the best way to draw a simple animation just before showing a modal [JDialog](""https://docs.oracle.com/javase/9/docs/api/javax/swing/JDialog.html"")? (i.e. expanding borders from the mouse click point to the dialog location). I thought it would be possible to draw on the glasspane of the parent frame on the setVisible method of the dialog.However, since the JDialog is modal to the parent, I couldn't find a way to pump drawing events into [EDT](""https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html"") before the JDialog becomes visible, since the current event on the EDT has not been completed yet.",[],<java><user-interface><swing><animation>,39868,"Are you trying to show the JDialog indepentently of the annimation? In order to get the order set properly, you may need to bundle those actions in a runnable that is passed to the EDT at once.eg:--CODE--It may be best to subclass JDialog so that you can just add the doAnnimation() logic to the setVisible(..) or show() method before calling the superclass implementation.  Finally, I imagine you'll need to set the dimensions of the dalog manually --  I don't remember if Java will know the actual size of the dialog before it is shown, so you may get some useless information for your annimation if you query the size before showing it.","[""SwingUtilities.invokeLater(new Runnable(){   public void run(){      doAnnimation();      showDialog();   }}""]",User Interface Components with Swing,"{""Dialog Boxes"": 1.7000000000000002}"
41107,41156,How to generate a random alpha-numeric string?,"I've been looking for a simple Java algorithm to generate a pseudo-random alpha-numeric string.  In my situation it would be used as a unique session/key identifier that would ""likely"" be unique over 500K+ generation (my needs don't really require anything much more sophisticated).  Ideally, I would be able to specify a length depending on my uniqueness needs. For example, a generated string of length 12 might look something like ""AEYGF7K0DM1X"".  ",[],<java><string><random><alphanumeric>,41156,"AlgorithmTo generate a random string, concatenate characters drawn randomly from the set of acceptable symbols until the string reaches the desired length.ImplementationHere's some fairly simple and very flexible code for generating random identifiers. Read the information that follows for important application notes.--CODE--Usage examplesCreate an insecure generator for 8-character identifiers:--CODE--Create a secure generator for session identifiers:--CODE--Create a generator with easy-to-read codes for printing. The strings are longer than full alphanumeric strings to compensate for using fewer symbols:--CODE--Use as session identifiersGenerating session identifiers that are likely to be unique is not good enough, or you could just use a simple counter. Attackers hijack sessions when predictable identifiers are used.There is tension between length and security. Shorter identifiers are easier to guess, because there are fewer possibilities. But longer identifiers consume more storage and bandwidth. A larger set of symbols helps, but might cause encoding problems if identifiers are included in URLs or re-entered by hand.The underlying source of randomness, or entropy, for session identifiers should come from a random number generator designed for cryptography. However, initializing these generators can sometimes be computationally expensive or slow, so effort should be made to re-use them when possible.Use as object identifiersNot every application requires security. Random assignment can be an efficient way for multiple entities to generate identifiers in a shared space without any coordination or partitioning. Coordination can be slow, especially in a clustered or distributed environment, and splitting up a space causes problems when entities end up with shares that are too small or too big.Identifiers generated without taking measures to make them unpredictable should be protected by other means if an attacker might be able to view and manipulate them, as happens in most web applications. There should be a separate authorization system that protects objects whose identifier can be guessed by an attacker without access permission.Care must be also be taken to use identifiers that are long enough to make collisions unlikely given the anticipated total number of identifiers. This is referred to as ""the birthday paradox."" [The probability of a collision,](""https://en.wikipedia.org/wiki/Birthday_problem#Square_approximation"") p, is approximately n2/(2qx), where n is the number of identifiers actually generated, q is the number of distinct symbols in the alphabet, and x is the length of the identifiers. This should be a very small number, like 2&#8209;50 or less.Working this out shows that the chance of collision among 500k 15-character identifiers is about 2&#8209;52, which is probably less likely than undetected errors from cosmic rays, etc.Comparison with UUIDsAccording to their specification, [UUIDs](""https://tools.ietf.org/html/rfc4122#section-6"") are not designed to be unpredictable, and should not be used as session identifiers.UUIDs in their standard format take a lot of space: 36 characters for only 122 bits of entropy. (Not all bits of a ""random"" UUID are selected randomly.) A randomly chosen alphanumeric string packs more entropy in just 21 characters.UUIDs are not flexible; they have a standardized structure and layout. This is their chief virtue as well as their main weakness. When collaborating with an outside party, the standardization offered by UUIDs may be helpful. For purely internal use, they can be inefficient.","[""public class RandomString {    /**     * Generate a random string.     */    public String nextString() {        for (int idx = 0; idx < buf.length; ++idx)            buf[idx] = symbols[random.nextInt(symbols.length)];        return new String(buf);    }    public static final String upper = \""ABCDEFGHIJKLMNOPQRSTUVWXYZ\"";    public static final String lower = upper.toLowerCase(Locale.ROOT);    public static final String digits = \""0123456789\"";    public static final String alphanum = upper + lower + digits;    private final Random random;    private final char[] symbols;    private final char[] buf;    public RandomString(int length, Random random, String symbols) {        if (length < 1) throw new IllegalArgumentException();        if (symbols.length() < 2) throw new IllegalArgumentException();        this.random = Objects.requireNonNull(random);        this.symbols = symbols.toCharArray();        this.buf = new char[length];    }    /**     * Create an alphanumeric string generator.     */    public RandomString(int length, Random random) {        this(length, random, alphanum);    }    /**     * Create an alphanumeric strings from a secure generator.     */    public RandomString(int length) {        this(length, new SecureRandom());    }    /**     * Create session identifiers.     */    public RandomString() {        this(21);    }}"", ""RandomString gen = new RandomString(8, ThreadLocalRandom.current());"", ""RandomString session = new RandomString();"", ""String easy = RandomString.digits + \""ACEFGHJKLMNPQRUVWXYabcdefhijkprstuvwx\"";RandomString tickets = new RandomString(23, new SecureRandom(), easy);""]",Fundamental Programming Structures in Java,"{""Strings"": 1.35}"
45075,45248,Java: Flash a window to grab user's attention,Is there a better way to flash a window in Java than this:--CODE--I know that this code is scary...But it works alright. (I should implement a loop...),"[""public static void flashWindow(JFrame frame) throws InterruptedException {        int sleepTime = 50;        frame.setVisible(false);        Thread.sleep(sleepTime);        frame.setVisible(true);        Thread.sleep(sleepTime);        frame.setVisible(false);        Thread.sleep(sleepTime);        frame.setVisible(true);        Thread.sleep(sleepTime);        frame.setVisible(false);        Thread.sleep(sleepTime);        frame.setVisible(true);}""]",<java><user-interface>,45248,"There are two common ways to do this: use JNI to set urgency hints on the taskbar's window, and create a notification icon/message. I prefer the second way, since it's cross-platform and less annoying.See [documentation on the TrayIcon class](""http://java.sun.com/javase/6/docs/api/java/awt/TrayIcon.html""), particularly the [displayMessage()](""http://java.sun.com/javase/6/docs/api/java/awt/TrayIcon.html#displayMessage(java.lang.String,%20java.lang.String,%20java.awt.TrayIcon.MessageType)"") method.The following links may be of interest:[New System Tray Functionality in Java SE 6](""http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javase6/systemtray/"")[Java Programming - Iconified window blinking](""http://forums.sun.com/thread.jspa?threadID=5130669&amp;messageID=9469354"")[TrayIcon for earlier versions of Java](""https://jdic.dev.java.net/documentation/incubator/tray/"")",[],Graphical User Interface Programming,"{""Displaying Frames"": 1.4, ""Event Handling"": 1.2}"
46160,,Getting an int representation of a String,"I am looking for a way to create an int\long representation of an arbitrary alpha-numeric String. Hash codes won't do it, because I can't afford hash collisions i.e. the representation must be unique and repeatable. The numeric representation will be used to perform efficient (hopefully) compares. The creation of the numeric key will take some time, but it only has to happen once, whereas I need to perform vast numbers of comparisons with it - which will hopefully be much faster than comparing the raw Strings.Any other idea's on faster String comparison will be most appreciated too...",[],<java><performance><string>,46216,"Unless your string is limited in length, you can't avoid collisions. There are 4294967296 possible values for an integer (2^32). If you have a string of more than 4 ASCII characters, or more than two unicode characters, then there are more possible string values than possible integer values. You can't have a unique integer value for every possible 5 character string. Long values have more possible values, but they would only provide a unique value for every possible string of 8 ASCII characters.Hash codes are useful as a two step process: first see if the hash code matches, then check the whole string. For most strings that don't match, you only need to do the first step, and it's really fast.",[],Fundamental Programming Structures in Java,"{""Strings"": 1.5}"
47045,47049,Sprintf equivalent in Java,Printf got added to Java with the 1.5 release but I can't seem to find how to send the output to a string rather than a file (which is what sprintf does in C). Does anyone know how to do this? ,[],<java><string><formatting>,47049,"--CODE--See [format](""http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)"") and its [syntax](""http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax"")","[""// Store the formatted string in 'result'String result = String.format(\""%4d\"", i * j);// Write the result to standard outputSystem.out.println( result );""]",Fundamental Programming Structures in Java,"{""Strings"": 1.7000000000000002, ""Input and Output"": 0.85}"
47605,47628,"String concatenation: concat() vs ""+"" operator","Assuming String a and b:--CODE--Under the hood, are they the same thing?Here is concat decompiled as reference. I'd like to be able to decompile the + operator as well to see what that does.--CODE--","[""a += ba = a.concat(b)"", ""public String concat(String s) {    int i = s.length();    if (i == 0) {        return this;    }    else {        char ac[] = new char[count + i];        getChars(0, count, ac, 0);        s.getChars(0, i, ac, count);        return new String(0, count + i, ac);    }}""]",<java><string><concatenation>,47628,"No, not quite.Firstly, there's a slight difference in semantics. If a is null, then a.concat(b) throws a NullPointerException but a+=b will treat the original value of a as if it were null. Furthermore, the concat() method only accepts String values while the + operator will silently convert the argument to a String (using the toString() method for objects). So the concat() method is more strict in what it accepts.To look under the hood, write a simple class with a += b;--CODE--Now disassemble with javap -c (included in the Sun JDK). You should see a listing including:--CODE--So, a += b is the equivalent of--CODE--The concat method should be faster. However, with more strings the StringBuilder method wins, at least in terms of performance.The source code of String and StringBuilder (and its package-private base class) is available in src.zip of the Sun JDK. You can see that you are building up a char array (resizing as necessary) and then throwing it away when you create the final String. In practice memory allocation is surprisingly fast.Update: As Pawel Adamski notes, performance has changed in more recent HotSpot. javac still produces exactly the same code, but the bytecode compiler cheats. Simple testing entirely fails because the entire body of code is thrown away. Summing System.identityHashCode (not String.hashCode) shows the StringBuffer code has a slight advantage. Subject to change when the next update is released, or if you use a different JVM. From [@lukaseder](""https://twitter.com/lukaseder""), [a list of HotSpot JVM intrinsics](""https://gist.github.com/apangin/7a9b7062a4bd0cd41fcc"").","[""public class Concat {    String cat(String a, String b) {        a += b;        return a;    }}"", ""java.lang.String cat(java.lang.String, java.lang.String);  Code:   0:   new     #2; //class java/lang/StringBuilder   3:   dup   4:   invokespecial   #3; //Method java/lang/StringBuilder.\""<init>\"":()V   7:   aload_1   8:   invokevirtual   #4; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;   11:  aload_2   12:  invokevirtual   #4; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;   15:  invokevirtual   #5; //Method java/lang/StringBuilder.toString:()Ljava/lang/    String;   18:  astore_1   19:  aload_1   20:  areturn"", ""a = new StringBuilder()    .append(a)    .append(b)    .toString();""]",Fundamental Programming Structures in Java,"{""Strings"": 1.8, ""Operators"": 0.8}"
50561,50573,Programmatically determine which Java thread holds a lock,Is it possible at runtime to programmatically check the name of the Thread that is holding the lock of a given object?,[],<java><multithreading><concurrency>,50573,"You can only tell whether the current thread holds a normal lock ([Thread.holdsLock(Object)](""http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#holdsLock%28java.lang.Object%29"")). You can't get a reference to the thread that has the lock without native code.However, if you're doing anything complicated with threading, you probably want to familiarize yourself with the java.util.concurrent packages. The [ReentrantLock](""http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html"") does allow you to get its owner (but its a protected method, so you'd have to extend this). Depending on your application, it may well be that by using the concurrency packages, you'll find that you don't need to get the lock's owner after all.There are non-programmatic methods to find the lock owners, such as signaling the JVM to issue a thread dump to stderr, that are useful to determine the cause of deadlocks.",[],Concurrency,"{""Synchronization"": 1.7000000000000002}"
53820,53831,Why does windows XP minimize my swing full screen window on my second screen?,"In the application I'm developping (in Java/swing), I have to show a full screen window on the second screen of the user.I did this using a code similar to the one you'll find below...Be, as soon as I click in a window opened by windows explorer, or as soon as I open windows explorer (i'm using windows XP), the full screen window is minimized...Do you know any way or workaround to fix this problem, or is there something important I did not understand with full screen windows?Thanks for the help,--CODE--","[""import javax.swing.JFrame;import javax.swing.JPanel;import javax.swing.JWindow;import java.awt.BorderLayout;import java.awt.Dimension;import java.awt.GraphicsDevice;import java.awt.GraphicsEnvironment;import java.awt.Window;import javax.swing.JButton;import javax.swing.JToggleButton;import java.awt.Rectangle;import java.awt.GridBagLayout;import javax.swing.JLabel;public class FullScreenTest {    private JFrame jFrame = null;  //  @jve:decl-index=0:visual-constraint=\""94,35\""    private JPanel jContentPane = null;    private JToggleButton jToggleButton = null;    private JPanel jFSPanel = null;  //  @jve:decl-index=0:visual-constraint=\""392,37\""    private JLabel jLabel = null;    private Window window;    /**     * This method initializes jFrame        *       * @return javax.swing.JFrame        */    private JFrame getJFrame() {        if (jFrame == null) {            jFrame = new JFrame();            jFrame.setSize(new Dimension(474, 105));            jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);            jFrame.setContentPane(getJContentPane());        }        return jFrame;    }    /**     * This method initializes jContentPane      *       * @return javax.swing.JPanel        */    private JPanel getJContentPane() {        if (jContentPane == null) {            jContentPane = new JPanel();            jContentPane.setLayout(null);            jContentPane.add(getJToggleButton(), null);        }        return jContentPane;    }    /**     * This method initializes jToggleButton         *       * @return javax.swing.JToggleButton         */    private JToggleButton getJToggleButton() {        if (jToggleButton == null) {            jToggleButton = new JToggleButton();            jToggleButton.setBounds(new Rectangle(50, 23, 360, 28));            jToggleButton.setText(\""Show Full Screen Window on 2nd screen\"");            jToggleButton.addActionListener(new java.awt.event.ActionListener() {                public void actionPerformed(java.awt.event.ActionEvent e) {                    showFullScreenWindow(jToggleButton.isSelected());                }            });        }        return jToggleButton;    }    protected void showFullScreenWindow(boolean b) {        if(window==null){            window = initFullScreenWindow();        }        window.setVisible(b);    }    private Window initFullScreenWindow() {        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();        GraphicsDevice[] gds = ge.getScreenDevices();        GraphicsDevice gd = gds[1];        JWindow window = new JWindow(gd.getDefaultConfiguration());        window.setContentPane(getJFSPanel());        gd.setFullScreenWindow(window);        return window;    }    /**     * This method initializes jFSPanel      *       * @return javax.swing.JPanel        */    private JPanel getJFSPanel() {        if (jFSPanel == null) {            jLabel = new JLabel();            jLabel.setBounds(new Rectangle(18, 19, 500, 66));            jLabel.setText(\""Hello ! Now, juste open windows explorer and see what happens...\"");            jFSPanel = new JPanel();            jFSPanel.setLayout(null);            jFSPanel.setSize(new Dimension(500, 107));            jFSPanel.add(jLabel, null);        }        return jFSPanel;    }    /**     * @param args     */    public static void main(String[] args) {        FullScreenTest me = new FullScreenTest();        me.getJFrame().setVisible(true);    }}""]",<java><windows><swing>,53831,"Usually when an application is in ""full screen"" mode it will take over the entire desktop.  For a user to get to another window they would have to alt-tab to it.  At that point windows would minimize the full screen app so that the other application could come to the front. This sounds like it may be a bug (undocumented feature...) in windows.  It should probably not be doing this for a dual screen setup.  One option to fix this is rather than setting it to be ""full screen"" just make the window the same size as the screen with location (0,0).  You can get screen information from the [GraphicsConfigurations on the GraphicsDevice](""http://java.sun.com/j2se/1.4.2/docs/api/java/awt/GraphicsDevice.html#getConfigurations%28%29"").  ",[],User Interface Components with Swing,"{""Introduction to Layout Management"": 0.65, ""Sophisticated Layout Management"": 0.85}"
54567,54799,How do I get InputVerifier to work with an editable JComboBox,I've got an JComboBox with a custom inputVerifyer set to limit MaxLength when it's set to editable.The verify method never seems to get called.The same verifyer gets invoked on a JTextField fine.What might I be doing wrong?,[],<java><swing><jcombobox>,54799,"I found a workaround. I thought I'd let the next person with this problem know about. Basically. Instead of setting the inputVerifier on the ComboBox you set it to it's ""Editor Component"". --CODE--","[""JComboBox combo = new JComboBox();JTextField tf = (JTextField)(combo.getEditor().getEditorComponent());tf.setInputVerifier(verifyer);""]",User Interface Components with Swing,"{""Choice Components"": 1.7000000000000002}"
54926,54927,Make a JPanel not draw its background (Transparent),"Is it possible, in Java, to make a JPanel skip drawing its background thus being transparent except for the components on it?",[],<java><user-interface>,54927,"setOpaque(false)It'll pass off painting the background to its parent, which may draw its own background.You can do a screen capture and then use that to paint the background of the panel.",[],Graphical User Interface Programming,"{""Displaying Information in a Component"": 1.55}"
56707,58166,Java Right Click does not make a selection. What is the easiest way to solve this globally?,Is there a way to globally make right click also select the element that you right click on?  From what I understand this has been a bug in Swing for a long time likely to never be fixed because at this point applications depend on it.  Any advice on doing this on a global scale?  Perhaps on the L&amp;F?,[],<java><swing>,58166,"Using the [Glass Pane](""http://java.sun.com/docs/books/tutorial/uiswing/components/rootpane.html"") will do the trick.[Here's a tutorial](""http://weblogs.java.net/blog/joshy/archive/2003/10/swing_hack_4_th.html"") on how to use the glass pane to get the right click button and redispatch it to the right component.As the glass pane is not a solution in this case, I suggest you take a look at the [Toolkit](""http://java.sun.com/javase/6/docs/api/java/awt/Toolkit.html"") class. Specificaly the addAWTEventListener method. You can add a global event listener with it. To add a mouse event listener:--CODE--Cheers","[""Toolkit.getDefaultToolkit().        addAWTEventListener(listener, AWTEvent.MOUSE_EVENT_MASK);""]",Graphical User Interface Programming,"{""Event Handling"": 1.8}"
58939,58963,JComboBox Selection Change Listener?,"I'm trying to get an event to fire whenever a choice is made from a JComboBox.The problem I'm having is that there is no obvious addSelectionListener() method.I've tried to use actionPerformed(), but it never fires.Short of overriding the model for the JComboBox, I'm out of ideas.How do I get notified of a selection change on a JComboBox?**Edit: I have to apologize. It turns out I was using a misbehaving subclass of JComboBox, but I'll leave the question up since your answer is good.",[],<java><swing><jcombobox><itemlistener>,58963,"It should respond to [ActionListeners](""http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html""), like this:--CODE--@John Calsbeek rightly points out that addItemListener() will work, too.  You may get 2 ItemEvents, though, one for the deselection of the previously selected item, and another for the selection of the new item. Just don't use both event types!","[""combo.addActionListener (new ActionListener () {    public void actionPerformed(ActionEvent e) {        doSomething();    }});""]",Graphical User Interface Programming,"{""Event Handling"": 1.8}"
60269,61982,How to implement draggable tab using Java Swing?,"How do I implement a draggable tab using Java Swing? Instead of the static JTabbedPane I would like to drag-and-drop a tab to different position to rearrange the tabs.EDIT: [The Java Tutorials - Drag and Drop and Data Transfer](""http://java.sun.com/docs/books/tutorial/uiswing/dnd/index.html"").",[],<java><user-interface><swing><tabs>,61982,"I liked [Terai Atsuhiro san's DnDTabbedPane](""http://java-swing-tips.blogspot.com/2008/04/drag-and-drop-tabs-in-jtabbedpane.html""), but I wanted more from it. The original Terai implementation transfered tabs within the TabbedPane, but it would be nicer if I could drag from one TabbedPane to another.Inspired by @Tom's effort, I decided to modify the code myself.There are some details I added. For example, the ghost tab now slides along the tabbed pane instead of moving together with the mouse.setAcceptor(TabAcceptor a_acceptor) should let the consumer code decide whether to let one tab transfer from one tabbed pane to another. The default acceptor always returns true.--CODE--","[""/** Modified DnDTabbedPane.java * http://java-swing-tips.blogspot.com/2008/04/drag-and-drop-tabs-in-jtabbedpane.html * originally written by Terai Atsuhiro. * so that tabs can be transfered from one pane to another. * eed3si9n. */import java.awt.*;import java.awt.datatransfer.*;import java.awt.dnd.*;import java.awt.geom.*;import java.awt.image.*;import javax.swing.*;public class DnDTabbedPane extends JTabbedPane {    public static final long serialVersionUID = 1L;    private static final int LINEWIDTH = 3;    private static final String NAME = \""TabTransferData\"";    private final DataFlavor FLAVOR = new DataFlavor(            DataFlavor.javaJVMLocalObjectMimeType, NAME);    private static GhostGlassPane s_glassPane = new GhostGlassPane();    private boolean m_isDrawRect = false;    private final Rectangle2D m_lineRect = new Rectangle2D.Double();    private final Color m_lineColor = new Color(0, 100, 255);    private TabAcceptor m_acceptor = null;    public DnDTabbedPane() {        super();        final DragSourceListener dsl = new DragSourceListener() {            public void dragEnter(DragSourceDragEvent e) {                e.getDragSourceContext().setCursor(DragSource.DefaultMoveDrop);            }            public void dragExit(DragSourceEvent e) {                e.getDragSourceContext()                        .setCursor(DragSource.DefaultMoveNoDrop);                m_lineRect.setRect(0, 0, 0, 0);                m_isDrawRect = false;                s_glassPane.setPoint(new Point(-1000, -1000));                s_glassPane.repaint();            }            public void dragOver(DragSourceDragEvent e) {                //e.getLocation()                //This method returns a Point indicating the cursor location in screen coordinates at the moment                TabTransferData data = getTabTransferData(e);                if (data == null) {                    e.getDragSourceContext().setCursor(                            DragSource.DefaultMoveNoDrop);                    return;                } // if                /*                Point tabPt = e.getLocation();                SwingUtilities.convertPointFromScreen(tabPt, DnDTabbedPane.this);                if (DnDTabbedPane.this.contains(tabPt)) {                    int targetIdx = getTargetTabIndex(tabPt);                    int sourceIndex = data.getTabIndex();                    if (getTabAreaBound().contains(tabPt)                            &amp;&amp; (targetIdx >= 0)                            &amp;&amp; (targetIdx != sourceIndex)                            &amp;&amp; (targetIdx != sourceIndex + 1)) {                        e.getDragSourceContext().setCursor(                                DragSource.DefaultMoveDrop);                        return;                    } // if                    e.getDragSourceContext().setCursor(                            DragSource.DefaultMoveNoDrop);                    return;                } // if                */                e.getDragSourceContext().setCursor(                        DragSource.DefaultMoveDrop);            }            public void dragDropEnd(DragSourceDropEvent e) {                m_isDrawRect = false;                m_lineRect.setRect(0, 0, 0, 0);                // m_dragTabIndex = -1;                if (hasGhost()) {                    s_glassPane.setVisible(false);                    s_glassPane.setImage(null);                }            }            public void dropActionChanged(DragSourceDragEvent e) {            }        };        final DragGestureListener dgl = new DragGestureListener() {            public void dragGestureRecognized(DragGestureEvent e) {                // System.out.println(\""dragGestureRecognized\"");                Point tabPt = e.getDragOrigin();                int dragTabIndex = indexAtLocation(tabPt.x, tabPt.y);                if (dragTabIndex < 0) {                    return;                } // if                initGlassPane(e.getComponent(), e.getDragOrigin(), dragTabIndex);                try {                    e.startDrag(DragSource.DefaultMoveDrop,                             new TabTransferable(DnDTabbedPane.this, dragTabIndex), dsl);                } catch (InvalidDnDOperationException idoe) {                    idoe.printStackTrace();                }            }        };        //dropTarget =        new DropTarget(this, DnDConstants.ACTION_COPY_OR_MOVE,                new CDropTargetListener(), true);        new DragSource().createDefaultDragGestureRecognizer(this,                DnDConstants.ACTION_COPY_OR_MOVE, dgl);        m_acceptor = new TabAcceptor() {            public boolean isDropAcceptable(DnDTabbedPane a_component, int a_index) {                return true;            }        };    }    public TabAcceptor getAcceptor() {        return m_acceptor;    }    public void setAcceptor(TabAcceptor a_value) {        m_acceptor = a_value;    }    private TabTransferData getTabTransferData(DropTargetDropEvent a_event) {               try {            TabTransferData data = (TabTransferData) a_event.getTransferable().getTransferData(FLAVOR);                         return data;        } catch (Exception e) {            e.printStackTrace();        }        return null;    }    private TabTransferData getTabTransferData(DropTargetDragEvent a_event) {        try {            TabTransferData data = (TabTransferData) a_event.getTransferable().getTransferData(FLAVOR);                         return data;        } catch (Exception e) {            e.printStackTrace();        }        return null;    }    private TabTransferData getTabTransferData(DragSourceDragEvent a_event) {        try {            TabTransferData data = (TabTransferData) a_event.getDragSourceContext()                .getTransferable().getTransferData(FLAVOR);                         return data;        } catch (Exception e) {            e.printStackTrace();        }        return null;            }    class TabTransferable implements Transferable {        private TabTransferData m_data = null;        public TabTransferable(DnDTabbedPane a_tabbedPane, int a_tabIndex) {            m_data = new TabTransferData(DnDTabbedPane.this, a_tabIndex);        }        public Object getTransferData(DataFlavor flavor) {            return m_data;            // return DnDTabbedPane.this;        }        public DataFlavor[] getTransferDataFlavors() {            DataFlavor[] f = new DataFlavor[1];            f[0] = FLAVOR;            return f;        }        public boolean isDataFlavorSupported(DataFlavor flavor) {            return flavor.getHumanPresentableName().equals(NAME);        }           }    class TabTransferData {        private DnDTabbedPane m_tabbedPane = null;        private int m_tabIndex = -1;        public TabTransferData() {        }        public TabTransferData(DnDTabbedPane a_tabbedPane, int a_tabIndex) {            m_tabbedPane = a_tabbedPane;            m_tabIndex = a_tabIndex;        }        public DnDTabbedPane getTabbedPane() {            return m_tabbedPane;        }        public void setTabbedPane(DnDTabbedPane pane) {            m_tabbedPane = pane;        }        public int getTabIndex() {            return m_tabIndex;        }        public void setTabIndex(int index) {            m_tabIndex = index;        }    }    private Point buildGhostLocation(Point a_location) {        Point retval = new Point(a_location);        switch (getTabPlacement()) {            case JTabbedPane.TOP: {                retval.y = 1;                retval.x -= s_glassPane.getGhostWidth() / 2;            } break;            case JTabbedPane.BOTTOM: {                retval.y = getHeight() - 1 - s_glassPane.getGhostHeight();                retval.x -= s_glassPane.getGhostWidth() / 2;            } break;            case JTabbedPane.LEFT: {                retval.x = 1;                retval.y -= s_glassPane.getGhostHeight() / 2;            } break;            case JTabbedPane.RIGHT: {                retval.x = getWidth() - 1 - s_glassPane.getGhostWidth();                retval.y -= s_glassPane.getGhostHeight() / 2;            } break;        } // switch        retval = SwingUtilities.convertPoint(DnDTabbedPane.this,                retval, s_glassPane);        return retval;    }    class CDropTargetListener implements DropTargetListener {        public void dragEnter(DropTargetDragEvent e) {            // System.out.println(\""DropTarget.dragEnter: \"" + DnDTabbedPane.this);            if (isDragAcceptable(e)) {                e.acceptDrag(e.getDropAction());            } else {                e.rejectDrag();            } // if        }        public void dragExit(DropTargetEvent e) {            // System.out.println(\""DropTarget.dragExit: \"" + DnDTabbedPane.this);            m_isDrawRect = false;        }        public void dropActionChanged(DropTargetDragEvent e) {        }        public void dragOver(final DropTargetDragEvent e) {            TabTransferData data = getTabTransferData(e);            if (getTabPlacement() == JTabbedPane.TOP                    || getTabPlacement() == JTabbedPane.BOTTOM) {                initTargetLeftRightLine(getTargetTabIndex(e.getLocation()), data);            } else {                initTargetTopBottomLine(getTargetTabIndex(e.getLocation()), data);            } // if-else            repaint();            if (hasGhost()) {                s_glassPane.setPoint(buildGhostLocation(e.getLocation()));                s_glassPane.repaint();            }        }        public void drop(DropTargetDropEvent a_event) {            // System.out.println(\""DropTarget.drop: \"" + DnDTabbedPane.this);            if (isDropAcceptable(a_event)) {                convertTab(getTabTransferData(a_event),                    getTargetTabIndex(a_event.getLocation()));                a_event.dropComplete(true);            } else {                a_event.dropComplete(false);            } // if-else            m_isDrawRect = false;            repaint();        }        public boolean isDragAcceptable(DropTargetDragEvent e) {            Transferable t = e.getTransferable();            if (t == null) {                return false;            } // if            DataFlavor[] flavor = e.getCurrentDataFlavors();            if (!t.isDataFlavorSupported(flavor[0])) {                return false;            } // if            TabTransferData data = getTabTransferData(e);            if (DnDTabbedPane.this == data.getTabbedPane()                    &amp;&amp; data.getTabIndex() >= 0) {                return true;            } // if            if (DnDTabbedPane.this != data.getTabbedPane()) {                if (m_acceptor != null) {                    return m_acceptor.isDropAcceptable(data.getTabbedPane(), data.getTabIndex());                } // if            } // if            return false;        }        public boolean isDropAcceptable(DropTargetDropEvent e) {            Transferable t = e.getTransferable();            if (t == null) {                return false;            } // if            DataFlavor[] flavor = e.getCurrentDataFlavors();            if (!t.isDataFlavorSupported(flavor[0])) {                return false;            } // if            TabTransferData data = getTabTransferData(e);            if (DnDTabbedPane.this == data.getTabbedPane()                    &amp;&amp; data.getTabIndex() >= 0) {                return true;            } // if            if (DnDTabbedPane.this != data.getTabbedPane()) {                if (m_acceptor != null) {                    return m_acceptor.isDropAcceptable(data.getTabbedPane(), data.getTabIndex());                } // if            } // if            return false;        }    }    private boolean m_hasGhost = true;    public void setPaintGhost(boolean flag) {        m_hasGhost = flag;    }    public boolean hasGhost() {        return m_hasGhost;    }    /**     * returns potential index for drop.     * @param a_point point given in the drop site component's coordinate     * @return returns potential index for drop.     */    private int getTargetTabIndex(Point a_point) {        boolean isTopOrBottom = getTabPlacement() == JTabbedPane.TOP                || getTabPlacement() == JTabbedPane.BOTTOM;        // if the pane is empty, the target index is always zero.        if (getTabCount() == 0) {            return 0;        } // if        for (int i = 0; i < getTabCount(); i++) {            Rectangle r = getBoundsAt(i);            if (isTopOrBottom) {                r.setRect(r.x - r.width / 2, r.y, r.width, r.height);            } else {                r.setRect(r.x, r.y - r.height / 2, r.width, r.height);            } // if-else            if (r.contains(a_point)) {                return i;            } // if        } // for        Rectangle r = getBoundsAt(getTabCount() - 1);        if (isTopOrBottom) {            int x = r.x + r.width / 2;            r.setRect(x, r.y, getWidth() - x, r.height);        } else {            int y = r.y + r.height / 2;            r.setRect(r.x, y, r.width, getHeight() - y);        } // if-else        return r.contains(a_point) ? getTabCount() : -1;    }    private void convertTab(TabTransferData a_data, int a_targetIndex) {        DnDTabbedPane source = a_data.getTabbedPane();        int sourceIndex = a_data.getTabIndex();        if (sourceIndex < 0) {            return;        } // if        Component cmp = source.getComponentAt(sourceIndex);        String str = source.getTitleAt(sourceIndex);        if (this != source) {            source.remove(sourceIndex);            if (a_targetIndex == getTabCount()) {                addTab(str, cmp);            } else {                if (a_targetIndex < 0) {                    a_targetIndex = 0;                } // if                insertTab(str, null, cmp, null, a_targetIndex);            } // if            setSelectedComponent(cmp);            // System.out.println(\""press=\""+sourceIndex+\"" next=\""+a_targetIndex);            return;        } // if        if (a_targetIndex < 0 || sourceIndex == a_targetIndex) {            //System.out.println(\""press=\""+prev+\"" next=\""+next);            return;        } // if        if (a_targetIndex == getTabCount()) {            //System.out.println(\""last: press=\""+prev+\"" next=\""+next);            source.remove(sourceIndex);            addTab(str, cmp);            setSelectedIndex(getTabCount() - 1);        } else if (sourceIndex > a_targetIndex) {            //System.out.println(\""   >: press=\""+prev+\"" next=\""+next);            source.remove(sourceIndex);            insertTab(str, null, cmp, null, a_targetIndex);            setSelectedIndex(a_targetIndex);        } else {            //System.out.println(\""   <: press=\""+prev+\"" next=\""+next);            source.remove(sourceIndex);            insertTab(str, null, cmp, null, a_targetIndex - 1);            setSelectedIndex(a_targetIndex - 1);        }    }    private void initTargetLeftRightLine(int next, TabTransferData a_data) {                if (next < 0) {            m_lineRect.setRect(0, 0, 0, 0);            m_isDrawRect = false;            return;        } // if        if ((a_data.getTabbedPane() == this)                &amp;&amp; (a_data.getTabIndex() == next                || next - a_data.getTabIndex() == 1)) {            m_lineRect.setRect(0, 0, 0, 0);            m_isDrawRect = false;        } else if (getTabCount() == 0) {            m_lineRect.setRect(0, 0, 0, 0);            m_isDrawRect = false;            return;        } else if (next == 0) {            Rectangle rect = getBoundsAt(0);            m_lineRect.setRect(-LINEWIDTH / 2, rect.y, LINEWIDTH, rect.height);            m_isDrawRect = true;        } else if (next == getTabCount()) {            Rectangle rect = getBoundsAt(getTabCount() - 1);            m_lineRect.setRect(rect.x + rect.width - LINEWIDTH / 2, rect.y,                    LINEWIDTH, rect.height);            m_isDrawRect = true;        } else {            Rectangle rect = getBoundsAt(next - 1);            m_lineRect.setRect(rect.x + rect.width - LINEWIDTH / 2, rect.y,                    LINEWIDTH, rect.height);            m_isDrawRect = true;        }    }    private void initTargetTopBottomLine(int next, TabTransferData a_data) {        if (next < 0) {            m_lineRect.setRect(0, 0, 0, 0);            m_isDrawRect = false;            return;        } // if        if ((a_data.getTabbedPane() == this)                &amp;&amp; (a_data.getTabIndex() == next                || next - a_data.getTabIndex() == 1)) {            m_lineRect.setRect(0, 0, 0, 0);            m_isDrawRect = false;        } else if (getTabCount() == 0) {            m_lineRect.setRect(0, 0, 0, 0);            m_isDrawRect = false;            return;        } else if (next == getTabCount()) {            Rectangle rect = getBoundsAt(getTabCount() - 1);            m_lineRect.setRect(rect.x, rect.y + rect.height - LINEWIDTH / 2,                    rect.width, LINEWIDTH);            m_isDrawRect = true;        } else if (next == 0) {            Rectangle rect = getBoundsAt(0);            m_lineRect.setRect(rect.x, -LINEWIDTH / 2, rect.width, LINEWIDTH);            m_isDrawRect = true;        } else {            Rectangle rect = getBoundsAt(next - 1);            m_lineRect.setRect(rect.x, rect.y + rect.height - LINEWIDTH / 2,                    rect.width, LINEWIDTH);            m_isDrawRect = true;        }    }    private void initGlassPane(Component c, Point tabPt, int a_tabIndex) {        //Point p = (Point) pt.clone();        getRootPane().setGlassPane(s_glassPane);        if (hasGhost()) {            Rectangle rect = getBoundsAt(a_tabIndex);            BufferedImage image = new BufferedImage(c.getWidth(),                    c.getHeight(), BufferedImage.TYPE_INT_ARGB);            Graphics g = image.getGraphics();            c.paint(g);            image = image.getSubimage(rect.x, rect.y, rect.width, rect.height);            s_glassPane.setImage(image);                    } // if        s_glassPane.setPoint(buildGhostLocation(tabPt));        s_glassPane.setVisible(true);    }    private Rectangle getTabAreaBound() {        Rectangle lastTab = getUI().getTabBounds(this, getTabCount() - 1);        return new Rectangle(0, 0, getWidth(), lastTab.y + lastTab.height);    }    public void paintComponent(Graphics g) {        super.paintComponent(g);        if (m_isDrawRect) {            Graphics2D g2 = (Graphics2D) g;            g2.setPaint(m_lineColor);            g2.fill(m_lineRect);        } // if    }    public interface TabAcceptor {        boolean isDropAcceptable(DnDTabbedPane a_component, int a_index);    }}class GhostGlassPane extends JPanel {    public static final long serialVersionUID = 1L;    private final AlphaComposite m_composite;    private Point m_location = new Point(0, 0);    private BufferedImage m_draggingGhost = null;    public GhostGlassPane() {        setOpaque(false);        m_composite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.7f);    }    public void setImage(BufferedImage draggingGhost) {        m_draggingGhost = draggingGhost;    }    public void setPoint(Point a_location) {        m_location.x = a_location.x;        m_location.y = a_location.y;    }    public int getGhostWidth() {        if (m_draggingGhost == null) {            return 0;        } // if        return m_draggingGhost.getWidth(this);    }    public int getGhostHeight() {        if (m_draggingGhost == null) {            return 0;        } // if        return m_draggingGhost.getHeight(this);    }    public void paintComponent(Graphics g) {        if (m_draggingGhost == null) {            return;        } // if         Graphics2D g2 = (Graphics2D) g;        g2.setComposite(m_composite);        g2.drawImage(m_draggingGhost, (int) m_location.getX(), (int) m_location.getY(), null);    }}""]",Graphical User Interface Programming,"{""Event Handling"": 1.6}"
64000,64183,Draining Standard Error in Java,"When launching a process from Java, both stderr and stdout can block on output if I don't read from the pipes.  Currently I have a thread that pro-actively reads from one and the main thread blocks on the other.Is there an easy way to join the two streams or otherwise cause the subprocess to continue while not losing the data in stderr? ",[],<java><multithreading><process-management>,64183,"Set the redirectErrorStream property on ProcessBuilder to send stderr output to stdout:--CODE--You should then create a thread to deal with the process stream, something like the following:--CODE--Where InputHandler is defined as:--CODE--Alternatively, just create two InputHandlers for the InputStream and ErrorStream. Knowing that the program will block if you don't read them is 90% of the battle :)","[""ProcessBuilder builder = new ProcessBuilder(command);builder.redirectErrorStream(true);"", ""Process p = builder.start();InputHandler outHandler = new InputHandler(p.getInputStream());"", ""private static class InputHandler extends Thread {    private final InputStream is;    private final ByteArrayOutputStream os;    public InputHandler(InputStream input) {        this.is = input;        this.os = new ByteArrayOutputStream();    }    public void run() {        try {            int c;            while ((c = is.read()) != -1) {                os.write(c);            }        } catch (Throwable t) {            throw new IllegalStateException(t);        }    }    public String getOutput() {        try {        os.flush();        } catch (Throwable t) {            throw new IllegalStateException(t);        }        return os.toString();    }}""]",Concurrency,"{""Tasks and Thread Pools"": 0.75}"
65128,65618,track down file handle,"I have a huge ear that uses log4j and there is a single config file that is used to set it up. In this config file there is no mention of certain log files but, additional files apart from those specified in the config file get generated in the logs folder. I've searched for other combinations of (logger|log4j|log).(properties|xml) and haven't found anything promising in all of the jar files included in the ear. How do I track down which is the offending thread/class that is creating these extra files?",[],<java><logging><file><jakarta-ee><websphere>,65618,"Try placing a breakpoint in the File class' constructors and the mkdir and createNewFile methods.  Generally, code will use the File class to create its files or directories.  You should have the Java source code for these classes included with your JVM.",[],Fundamental Programming Structures in Java,"{""Input and Output"": 0.8}"
66455,86170,Is there an easy way to change the behavior of a Java/Swing control when it gets focus?,"For most GUI's I've used, when a control that contains text gets the focus, the entire contents of the control are selected.  This means if you just start typing, you completely replace the former contents.Example:  You have spin control that is initialized with the value zero.   You tab to it and type ""1"" The value in the control is now 1.With Swing, this doesn't happen.  The text in the control is not selected and the carat appears at one end or another of the existing text.  Continuing the above example:With a Swing JSpinner, when you tab to the spin control, the carat is at the left.  You type ""1"" and the value in the control is now 10.This drives me, (and my users) up a wall, and I'd like to change it.  Even more important, I'd like to change it globally so the new behavior applies to JTextField, JPasswordField, JFormattedTextField, JTextArea, JComboBox, JSpinner, and so on.   The only way I have found to do this to add a FocusAdapter to each control and override the focusGained() method to Do The Right Thing[tm].There's gotta be an easier, and less fragile way.  Please?EDIT: One additional piece of information for this particular case.  The form I am working with was generated using Idea's form designer.  That means I normally don't actually write the code to create the components.  It is possible to tell Idea that you want to create them yourself, but that's a hassle I'd like to avoid.Motto:  All good programmers are basically lazy.",[],<java><user-interface><swing>,86170,After reading the replies so far (Thanks!) I passed the outermost JPanel to the following method: --CODE--It works!,"[""void addTextFocusSelect(JComponent component){    if(component instanceof JTextComponent){        component.addFocusListener(new FocusAdapter() {                @Override                public void focusGained(FocusEvent event) {                    super.focusGained(event);                    JTextComponent component = (JTextComponent)event.getComponent();                    // a trick I found on JavaRanch.com                    // Without this, some components don't honor selectAll                    component.setText(component.getText());                    component.selectAll();                }            });    }    else    {        for(Component child: component.getComponents()){            if(child instanceof JComponent){                addTextFocusSelect((JComponent) child);            }        }    }}""]",Graphical User Interface Programming,"{""Event Handling"": 1.65}"
73000,93914,Modal dialogs in IE gets hidden behind IE if user clicks on IE pane,"I have to write an applet that brings up a password dialog. The problem is that dialog is set to be always on top but when user clicks on IE window dialog gets hidden behind IE window nevertheless. And since dialog is modal and holds all IE threads IE pane does not refresh and dialog window is still painted on top of IE (but not refreshed). This behaviour confuses users (they see dialog on top of IE but it looks like it has hanged since it is not refreshe). So I need a way to keep that dialog on top of everything. But any other solution to this problem would be nice. Here's the code:--CODE--Resolution: As @shemnon noted I should make a window instead of (null, Frame, Applet) parent of modal dialog. So good way to initlialize parent was: --CODE--","[""        PassDialog dialog = new PassDialog(parent);        /* do some non gui related initialization */        dialog.pack();        dialog.setLocationRelativeTo(null);        dialog.setAlwaysOnTop(true);        dialog.setVisible(true);"", ""parent = javax.swing.SwingUtilities.getWindowAncestor(theApplet);""]",<java><internet-explorer><swing><applet><modal-dialog>,93914,What argument are you using for the parent?You may have better luck if you use the parent of the Applet.--CODE--Using the getWindowAncestor will skip the applet parents (getRoot(component) will return applets).  In at least some versions of Java there was a Frame that was equivalent to the IE window.  YMMV.,"[""javax.swing.SwingUtilities.getWindowAncestor(theApplet)""]",User Interface Components with Swing,"{""Dialog Boxes"": 1.45}"
81786,81803,Can I add new methods to the String class in Java?,"I'd like to add a method AddDefaultNamespace() to the String class in Java so that I can type ""myString"".AddDefaultNamespace() instead of DEFAULTNAMESPACE + ""myString"", to obtain something like ""MyDefaultNameSpace.myString"". I don't want to add another derived class either (PrefixedString for example).Maybe the approach is not good for you but I personally hate using +. But, anyway, is it possible to add new methods to the String class in Java?Thanks and regards.",[],<java><string>,81803,String is a final class which means it cannot be extended to work on your own implementation.,[],Fundamental Programming Structures in Java,"{""Strings"": 1.9}"
584234,584261,Problem with threads,"*I'm using Java.I have this thread, agent, that explores a room to determine its size and clean it if it's dirty. Then I have the interface, which draws the agent as it explores the environment. Agent is subclassed from Thread, and Java takes care of managing the threads. All I do is create the thread and say object.start().This works very well under normal circustances. However, the menus are enabled during this time, and that means the user can mess with the room while the agent is exploring it. That shouldn't happen.So, once the user clicks the option that tells the agent to clean the room, I'd like to disable all the menus. Except this isn't working as it should. Here's the problem:--CODE--The problem is that the menus are enabled before the agent thread executes its function. I thought about using Thread.join() - that would garantee that the code to enable the menus is only executed after the agent thread ends. But, if I use Thread.join() the interface doesn't update itself while the agent is moving, because it's waiting for the agent to finish!I've thought about disabling the interface from the agent and then enabling it once the agent is done, but I'm not sure that would work and the biggest problem here is that the agent shouldn't be messing around with the menus.So, to sum it up, I need a thread executing to update the interface/draw the agent moving, but that thread cannot be the same that enables the menu. It seems currently there is one thread doing both. Assuming that's possible and not too complicated.","[""...public void ActionPerformed(ActionEvent e){    //disable the menus with setEnabled(false);    agent.start();    //enable the menus with setEnabled(true);}""]",<java><multithreading><user-interface>,584261,"  I've thought about disabling the  interface from the agent and then  enabling it once the agent is done,  but I'm not sure that would work and  the biggest problem here is that the  agent shouldn't be messing around with  the menus.You could make the agent call a method in the GUI class that re-enables the menus, when it is done. The method would, of course, call the appropriate Swing methods on the EDT.--CODE--If multiple agents can run concurrently, you'll need to check if all of them are done, before re-enabling the menu.","[""class Agent extends Thread{    @override    public void run()    {       // run around the room       // finally done       gui.agentIsDone();    }}class GUI extends JFrame{    ...    void agentIsDone()    {        SwingUtilities.invokeLater(new Runnable()        {            @override             public void run()            {                menus.setEnabled(true);            }        });    } }""]",Concurrency,"{""Thread Properties"": 0.75, ""Synchronization"": 0.55, ""Asynchronous Computations"": 0.7}"
84285,,calling thread.start() within its own constructor,is it legal for a thread to call this.start() inside its own constructor? and if so what potential issues can this cause? I understand that the object wont have fully initialized until the constructor has run to completion but aside from this are there any other issues?  ,[],<java><multithreading>,84937,"For memory-safety reasons, you shouldn't expose a reference to an object or that object's fields to another thread from within its constructor.  Assuming that your custom thread has instance variables, by starting it from within the constructor, you are guaranteed to violate the Java Memory Model guidelines.  See [Brian Goetz's Safe Construction Techniques](""http://www.ibm.com/developerworks/java/library/j-jtp0618.html"") for more info.",[],Concurrency,"{""Thread Properties"": 0.85, ""Tasks and Thread Pools"": 0.65, ""What Are Threads?"": 0.6, ""Thread States"": 0.55}"
85548,85589,"How to make Swing scroll with ""ensureIndexIsVisible""?",When I run this code the selected item is not visible.  I've already tried to run it in a separate thread with no luck.--CODE--,"[""import javax.swing.JFrame;import java.awt.Container;import javax.swing.JList;import javax.swing.ListSelectionModel;import javax.swing.JScrollPane;import java.awt.Dimension;public class ScrollList extends JFrame {    int defaultValue;    ScrollList() {        Container cp = getContentPane();        JList list = createList();        defaultValue = 20;        cp.add(createScrollPane(list));        pack();        setVisible(true);        list.ensureIndexIsVisible(defaultValue);    }    JList createList() {        Integer[] model = new Integer[73];        JList list = new JList(model);        for (int i = 1; i < model.length; i++)            model[i] = i;        list.setSelectedIndex(defaultValue);        return list;    }    JScrollPane createScrollPane(JList list) {        JScrollPane s = new JScrollPane(createList());        s.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);        s.setPreferredSize(new Dimension(100, 200));        return s;    }    public static void main(String[] args) {        new ScrollList();    }}""]",<java><swing>,85589,"I figured it out!!This is the code:--CODE--Instead of using the list that you passed into the createScrollPane() method, you create a new one.","[""import javax.swing.JFrame;import java.awt.Container;import javax.swing.JList;import javax.swing.ListSelectionModel;import javax.swing.JScrollPane;import java.awt.Dimension;public class ScrollList extends JFrame {    final int defaultValue = 20;    ScrollList() {        setDefaultCloseOperation(DISPOSE_ON_CLOSE);        Container cp = getContentPane();        JList list = createList();        cp.add(createScrollPane(list));        pack();        list.ensureIndexIsVisible(list.getSelectedIndex());        setVisible(true);    }    JList createList() {        Integer[] model = new Integer[73];        JList list = new JList(model);        for (int i = 1; i < model.length; i++)            model[i] = i;        list.setSelectedIndex(defaultValue);        return list;    }    JScrollPane createScrollPane(JList list) {        JScrollPane s = new JScrollPane(list); // MAJOR FIX HERE!        s.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);        s.setPreferredSize(new Dimension(100, 200));        return s;    }    public static void main(String[] args) {        new ScrollList();    }}""]",User Interface Components with Swing,"{""Text Input"": 1.6}"
86780,86832,How to check if a String contains another String in a case insensitive manner in Java?,"Say I have two strings,--CODE--I want to perform a check returning that s2 is contained within s1. I can do this with:--CODE--I am pretty sure that contains() is case sensitive, however I can't determine this for sure from reading the documentation. If it is then I suppose my best method would be something like:--CODE--All this aside, is there another (possibly better) way to accomplish this without caring about case-sensitivity?","[""String s1 = \""AbBaCca\"";String s2 = \""bac\"";"", ""return s1.contains(s2);"", ""return s1.toLowerCase().contains(s2.toLowerCase());""]",<java><string>,86832,"Yes, contains is case sensitive.  You can use java.util.regex.Pattern with the CASE_INSENSITIVE flag for case insensitive matching:--CODE--EDIT: If s2 contains regex special characters (of which there are many) it's important to quote it first.  I've corrected my answer since it is the first one people will see, but vote up Matt Quail's since he pointed this out.","[""Pattern.compile(Pattern.quote(wantedStr), Pattern.CASE_INSENSITIVE).matcher(source).find();""]",Fundamental Programming Structures in Java,"{""Strings"": 1.8}"
88036,88097,Does the unmodifiable wrapper for java collections make them thread safe?,I need to make an ArrayList of ArrayLists thread safe. I also cannot have the client making changes to the collection. Will the unmodifiable wrapper make it thread safe or do I need two wrappers on the collection?,[],<java><multithreading><collections><unmodifiable>,88097,"It depends. The wrapper will only prevent changes to the collection it wraps, not to the objects in the collection. If you have an ArrayList of ArrayLists, the global List as well as each of its element Lists need to be wrapped separately, and you may also have to do something for the contents of those lists. Finally, you have to make sure that the original list objects are not changed, since the wrapper only prevents changes through the wrapper reference, not to the original object.You do NOT need the synchronized wrapper in this case.",[],Concurrency,"{""Thread-Safe Collections"": 1.5}"
88434,88456,How can I detect if caps lock is toggled in Swing?,I'm trying to build a better username/password field for my workplace and would like to be able to complain when they have their caps lock on.Is this possible?  And if so I'd like to have it detected before the client types their first letter.Is there a non-platform specific way to do this?,[],<java><swing>,88456,"Try this, from java.awt.Toolkit, returns a boolean:--CODE--","[""Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK)""]",Graphical User Interface Programming,"{""Event Handling"": 1.6}"
88838,88863,How to convert Strings to and from UTF8 byte arrays in Java,"In Java, I have a String and I want to encode it as a byte array (in UTF8, or some other encoding). Alternately, I have a byte array (in some known encoding) and I want to convert it into a Java String. How do I do these conversions?",[],<java><string><encoding><character-encoding>,88863,"Convert from String to byte[]:--CODE--Convert from byte[] to String:--CODE--You should, of course, use the correct encoding name. My examples used US-ASCII and UTF-8, the two most common encodings.","[""String s = \""some text here\"";byte[] b = s.getBytes(StandardCharsets.UTF_8);"", ""byte[] b = {(byte) 99, (byte)97, (byte)116};String s = new String(b, StandardCharsets.US_ASCII);""]",Fundamental Programming Structures in Java,"{""Strings"": 1.45}"
93091,93216,Why can't strings be mutable in Java and .NET?,Why is it that they decided to make String immutable in Java and .NET (and some other languages)? Why didn't they make it mutable?,[],<java><.net><string><mutable>,93216,"According to [Effective Java](""http://www.oracle.com/technetwork/java/effectivejava-136174.html""), chapter 4, page 73, 2nd edition:  ""There are many good reasons for this: Immutable classes are easier to  design, implement, and use than mutable classes. They are less prone  to error and are more secure.    [...]    ""Immutable objects are simple. An immutable object can be in  exactly one state, the state in which it was created. If you make sure  that all constructors establish class invariants, then it is  guaranteed that these invariants will remain true for all time, with  no effort on your part.    [...]    Immutable objects are inherently thread-safe; they require no synchronization. They cannot be corrupted by multiple threads  accessing them concurrently. This is far and away the easiest approach  to achieving thread safety. In fact, no thread can ever observe any  effect of another thread on an immutable object. Therefore,  immutable objects can be shared freely    [...]Other small points from the same chapter:  Not only can you share immutable objects, but you can share their internals.    [...]    Immutable objects make great building blocks for other objects, whether mutable or immutable.    [...]    The only real disadvantage of immutable classes is that they require a separate object for each distinct value.",[],Fundamental Programming Structures in Java,"{""Strings"": 1.9}"
94011,95636,How to abort a thread in a fast and clean way in java?,"Here is my problem: I've got a dialog with some parameters that the user can change (via a spinner for example). Each time one of these parameters is changed, I launch a thread to update a 3D view according to the new parameter value. If the user changes another value (or the same value again by clicking many times on the spinner arrow) while the first thread is working, I would like to abort the first thread (and the update of the 3D view) and launch a new one with the latest parameter value.How can I do something like that?PS: There is no loop in the run() method of my thread, so checking for a flag is not an option: the thread updating the 3D view basically only calls a single method that is very long to execute. I can't add any flag in this method asking to abort either as I do not have access to its code.",[],<java><multithreading>,95636,"Try interrupt() as some have said to see if it makes any difference to your thread.  If not, try destroying or closing a resource that will make the thread stop.  That has a chance of being a little better than trying to throw Thread.stop() at it.If performance is tolerable, you might view each 3D update as a discrete non-interruptible event and just let it run through to conclusion, checking afterward if there's a new latest update to perform.  This might make the GUI a little choppy to users, as they would be able to make five changes, then see the graphical results from how things were five changes ago, then see the result of their latest change.  But depending on how long this process is, it might be tolerable, and it would avoid having to kill the thread.  Design might look like this:--CODE--","[""boolean stopFlag = false;Object[] latestArgs = null;public void run() {  while (!stopFlag) {    if (latestArgs != null) {      Object[] args = latestArgs;      latestArgs = null;      perform3dUpdate(args);    } else {      Thread.sleep(500);    }  }}public void endThread() {  stopFlag = true;}public void updateSettings(Object[] args) {  latestArgs = args;}""]",Concurrency,"{""Thread States"": 0.8, ""Thread Properties"": 0.7}"
95767,97176,How can I catch AWT thread exceptions in Java?,We'd like a trace in our application logs of these exceptions - by default Java just outputs them to the console.,[],<java><swing><exception-handling><awt>,97176,There is a distinction between uncaught exceptions in the EDT and outside the EDT.Another question has a solution for both but if you want just the EDT portion chewed up...--CODE--,"[""class AWTExceptionHandler {  public void handle(Throwable t) {    try {      // insert your exception handling code here      // or do nothing to make it go away    } catch (Throwable t) {      // don't let the exception get thrown out, will cause infinite looping!    }  }  public static void registerExceptionHandler() {    System.setProperty('sun.awt.exception.handler', AWTExceptionHandler.class.getName())  }}""]","Exceptions, Assertions, and Logging","{""Catching Exceptions"": 0.9}"
100707,100751,How much resources do sleeping and waiting threads consume,"I'm wondering, how expensive it is to have many threads in waiting state in java 1.6 x64.To be more specific, I'm writing application which runs across many computers and sends/receives data from one to another. I feel more comfortable to have separate thread for each connected machine and task, like 1) sending data, 2) receiving data, 3) reestablishing connection when it is dropped. So, given that there are N nodes in cluster, each machine is going to have 3 threads for each of N-1 neighbours. Typically there will be 12 machines, which comes to 33 communication threads.Most of those threads will be sleeping most of the time, so for optimization purposes I could reduce number of threads and give more job to each of them. Like, for example. reestablishing connection is responsibility of receiving thread. Or sending to all connected machines is done by single thread.So is there any significant perfomance impact on having many sleeping threads?",[],<java><multithreading><sleep><wait>,100751,"For most cases, the resources consumed by a sleeping thread will be its stack space. Using a 2-threads-per-connection-model, which I think is similar to what you're describing, is known to cause great scalability issues for this very reason when the number of connections grow large.I've been in this situation myself, and when the number of connections grew above 500 connections (about a thousand threads), you tend to get into lots of cases where you get OutOfMemoryError, since the threads stack space usage exceeds the maximum amount of memory for a single process. At least in our case, which was in a Java on 32 bit Windows world. You can tune things and get a bit further, I guess, but in the end it's just not very scalable since you waste lots of memory.If you need a large number of connections, Java NIO (new IO or whatever) is the way to go, making it possible to handle lots of connections in the same thread.Having said that, you shouldn't encounter much of a problem with under a 100 threads on a reasonably modern server, even if it's probably still a waste of resources.",[],Concurrency,"{""Thread Properties"": 0.75, ""Thread States"": 0.65}"
102171,102737,Method that returns the line number for a given JTextPane position?,"I'm looking for a method that computes the line number of a given text position in a JTextPane with wrapping enabled.Example:  This a very very very very very very very very very very very very very very very very very very very very very very long line.  This is another very very very very very very very very very very very very very very very very very very very very very very long line.|The cursor is on line number four, not two.Can someone provide me with the implementation of the method:--CODE--","[""int getLineNumber(JTextPane pane, int pos){     return ???}""]",<java><user-interface><swing><jtextpane>,102737,Try this--CODE--,"["" /**   * Return an int containing the wrapped line index at the given position   * @param component JTextPane   * @param int pos   * @return int   */  public int getLineNumber(JTextPane component, int pos)   {    int posLine;    int y = 0;    try    {      Rectangle caretCoords = component.modelToView(pos);      y = (int) caretCoords.getY();    }    catch (BadLocationException ex)    {    }    int lineHeight = component.getFontMetrics(component.getFont()).getHeight();    posLine = (y / lineHeight) + 1;    return posLine;  }""]",User Interface Components with Swing,"{""Text Input"": 0.8}"
103179,103295,How do I set an Application's Icon Globally in Swing?,"I know I can specify one for each form, or for the root form and then it'll cascade through to all of the children forms, but I'd like to have a way of overriding the default Java Coffee Cup for all forms even those I might forget.Any suggestions?",[],<java><swing>,103295,"You can make the root form (by which I assume you mean JFrame) be your own subclass of JFrame, and put standard functionality in its constructor, such as:--CODE--You can bundle other standard stuff in here too, such as memorizing the frame's window metrics as a user preference, managing splash panes, etc.Any new frames spawned by this one would also be instances of this JFrame subclass.  The only thing you have to remember is to instantiate your subclass, instead of JFrame.  I don't think there's any substitute for remembering to do this, but at least now it's a matter of remembering a subclass instead of a setIconImage call (among possibly other features).","[""this.setIconImage(STANDARD_ICON);""]",Graphical User Interface Programming,"{""Displaying Information in a Component"": 0.6, ""Displaying Frames"": 0.8}"
104184,41990379,Is it safe to get values from a java.util.HashMap from multiple threads (no modification)?,"There is a case where a map will be constructed, and once it is initialized, it will never be modified again.  It will however, be accessed (via get(key) only) from multiple threads.  Is it safe to use a java.util.HashMap in this way?(Currently, I'm happily using a java.util.concurrent.ConcurrentHashMap, and have no measured need to improve performance, but am simply curious if a simple HashMap would suffice.  Hence, this question is not ""Which one should I use?"" nor is it a performance question.  Rather, the question is ""Would it be safe?"")",[],<java><multithreading><concurrency><hashmap>,41990379,"Your idiom is safe if and only if the reference to the HashMap is safely published. Rather than anything relating the internals of HashMap itself, safe publication deals with how the constructing thread makes the reference to the map visible to other threads.Basically, the only possible race here is between the construction of the HashMap and any reading threads that may access it before it is fully constructed. Most of the discussion is about what happens to the state of the map object, but this is irrelevant since you never modify it - so the only interesting part is how the HashMap reference is published. For example, imagine you publish the map like this:--CODE--... and at some point setMap() is called with a map, and other threads are using SomeClass.MAP to access the map, and check for null like this:--CODE--This is not safe even though it probably appears as though it is. The problem is that there is no [happens-before](""https://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html"") relationship between the set of SomeObject.MAP and the subsequent read on another thread, so the reading thread is free to see a partially constructed map. This can pretty much do anything and even in practice it does things like [put the reading thread into an infinite loop](""http://mailinator.blogspot.com/2009/06/beautiful-race-condition.html"").To safely publish the map, you need to establish a happens-before relationship between the writing of the reference to the HashMap (i.e., the publication) and the subsequent readers of that reference (i.e., the consumption). Conveniently, there are only a few easy-to-remember ways to [[1]:Exchange the reference through a properly locked field (JLS 17.4.5](""https://stackoverflow.com/q/5458848/149138"">accomplish))Use static initializer to do the initializing stores ([JLS 12.4](""http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4""))Exchange the reference via a volatile field ([JLS 17.4.5](""http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.4.5"")), or as the consequence of this rule, via the AtomicX classesInitialize the value into a final field ([JLS 17.5](""http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.5"")).The ones most interesting for your scenario are (2), (3) and (4). In particular, (3) applies directly to the code I have above: if you transform the declaration of MAP to:--CODE--then everything is kosher: readers who see a non-null value necessarily have a happens-before relationship with the store to MAP and hence see all the stores associated with the map initialization.The other methods change the semantics of your method, since both (2) (using the static initalizer) and (4) (using final) imply that you cannot set MAP dynamically at runtime. If you don't need to do that, then just declare MAP as a static final HashMap and you are guaranteed safe publication.In practice, the rules are simple for safe access to ""never-modified objects"":If you are publishing an object which is not inherently immutable (as in all fields declared final) and:You already can create the object that will be assigned at the moment of declarationa: just use a final field (including static final for static members).You want to assign the object later, after the reference is already visible: use a volatile fieldb.That's it!In practice, it is very efficient. The use of a static final field, for example, allows the JVM to assume the value is unchanged for the life of the program and optimize it heavily. The use of a final member field allows most architectures to read the field in a way equivalent to a normal field read and doesn't inhibit further optimizationsc. Finally, the use of volatile does have some impact: no hardware barrier is needed on many architectures (such as x86, specifically those that don't allow reads to pass reads), but some optimization and reordering may not occur at compile time - but this effect is generally small. In exchange, you actually get more than what you asked for - not only can you safely publish one HashMap, you can store as many more not-modified HashMaps as you want to the same reference and be assured that all readers will see a safely published map.For more gory details, refer to [Shipilev](""https://shipilev.net/blog/2014/safe-public-construction/"") or [this FAQ by Manson and Goetz](""https://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#finalRight"").[1] Directly quoting from [shipilev](""https://shipilev.net/blog/2014/safe-public-construction/"").a That sounds complicated, but what I mean is that you can assign the reference at construction time - either at the declaration point or in the constructor (member fields) or static initializer (static fields).b Optionally, you can use a synchronized method to get/set, or an AtomicReference or something, but we're talking about the minimum work you can do.c Some architectures with very weak memory models (I'm looking at you, Alpha) may require some type of read barrier before a final read - but these are very rare today.","[""class SomeClass {   public static HashMap<Object, Object> MAP;   public synchronized static setMap(HashMap<Object, Object> m) {     MAP = m;   }}"", ""HashMap<Object,Object> map = SomeClass.MAP;if (map != null) {  .. use the map} else {  .. some default behavior}"", ""public static volatile HashMap<Object, Object> MAP;""]",Concurrency,"{""Thread-Safe Collections"": 1.6, ""Synchronization"": 0.75}"
104373,453629,Mac OS X Java Swing Buttons are Disabled for no aparent reason,I wrote an application in Java and when it runs on one customer's computer running OS X The Save and Export buttons are disabled. (Everything else works in the application.)Both of these buttons open up a standard save file dialog.Any ideas?,[],<java><macos><swing><button>,453629,This was caused by misinformation recieved from the customer.Turns out the customer was trying to save to a location where files can't be saved on his/her hard drive.,[],User Interface Components with Swing,"{""Choice Components"": 0.9, ""Swing and the Model-View-Controller Design Pattern"": 0.6}"
104599,104709,Sort on a string that may contain a number,"I need to write a Java Comparator class that compares Strings, however with one twist.  If the two strings it is comparing are the same at the beginning and end of the string are the same, and the middle part that differs is an integer, then compare based on the numeric values of those integers.  For example, I want the following strings to end up in order they're shown:aaabbb 3 cccbbb 12 cccccc 11dddeee 3 ddd jpeg2000 eeeeee 12 ddd jpeg2000 eeeAs you can see, there might be other integers in the string, so I can't just use regular expressions to break out any integer.  I'm thinking of just walking the strings from the beginning until I find a bit that doesn't match, then walking in from the end until I find a bit that doesn't match, and then comparing the bit in the middle to the regular expression ""[0-9]+"", and if it compares, then doing a numeric comparison, otherwise doing a lexical comparison.Is there a better way?Update I don't think I can guarantee that the other numbers in the string, the ones that may match, don't have spaces around them, or that the ones that differ do have spaces.",[],<java><algorithm><string><sorting><comparison>,104709,"[The Alphanum Algorithm](""http://www.davekoelle.com/alphanum.html"")From the website""People sort strings with numbers differently than software. Most sorting algorithms compare ASCII values, which produces an ordering that is inconsistent with human logic. Here's how to fix it.""Edit: Here's a link to the [Java Comparator Implementation](""http://www.davekoelle.com/files/AlphanumComparator.java"") from that site.",[],Fundamental Programming Structures in Java,"{""Strings"": 1.55}"
106446,,using JTables with netbeans 6.1 aka Matisse,"Before you answer: Yes I have read the jtable tutorial over at Sun. No, it did not help me. Yes, I am a dolt. Please don't answer with a reference to that document. What I am specifically interested in is how to dynamically add rows and columns to my Jtable via the Netbeans IDE. I already have an object that contains a hashmap with my data. I can't figure out where or what object I should be passing that object to. Thanks for your time! I have a vector that contains a series (of length l) of objects (each one corresponding to a row). How do I get that vector object to display on the JTable?",[],<java><swing><netbeans>,106462,"A JTable uses a TableModel to hold its data. Your hash/vector of data will need to be adapted to be used; you can write a TableModel implementation, using the hash/vector as backing data, or, if you won't be dynamically updating the hash/vector and needing it to show automatically, you can simply copy everything into an instance of DefaultTableModel, and use that.If you do use an adapter, and dynamically update the hash/vector, remember that all updates must be done in the event dispatch thread. :-)",[],User Interface Components with Swing,"{""Choice Components"": 0.6, ""Text Input"": 0.5}"
110016,110042,Multiple column sort in JTable,I know that JTable can sort by a single column. But is it possible to allow for multiple column sort or do I need to write the code myself?,[],<java><swing><jtable>,110042,"You can sort by multiple columns by specifying more than one sort key when calling setSortKeys in the [RowSorter](""http://java.sun.com/javase/6/docs/api/javax/swing/RowSorter.html"") you're using.",[],User Interface Components with Swing,"{""Choice Components"": 0.6}"
6113944,6115913,How cancel the execution of a SwingWorker?,"Currently I have two SwingWorker threads doing job on background. If an exception occurs, the method stop to work, but the thread still runnig. How I do to stop the execution and kill the thread of the doInBackground() if an exception occurs?this.cancel(true) don't destroy/close the thread. How can I achieve this?--CODE--I see these threads in the debug of Netbeans.--CODE--","[""@Overrideprotected Boolean doInBackground() throws Exception {        try {            while (true) {                //some code here                                   return true;            }        } catch (Exception e) {                   this.cancel(true); //<-- this not cancel the thread                           return false;        }    }"", ""'AWT-EventQueue-0' em execução'AWT-Windows' em execução'SwingWorker-pool-1-thread-1' em execução'SwingWorker-pool-1-thread-2' em execução//*em execução = in execution""]",<java><multithreading><swing><swingworker><cancellation>,6115913,"By default, SwingWorker reuses worker threads, so it is perfectly normal that, even though, doInBackground() has returned, to still see the thread that executed your method.You can identify this fact by looking at the thread names, as reported by NetBeans: SwingWorker-pool-1-thread-1, where that pool is managed by SwingWorker.If you want more control, you can also pass the SwingWorker instance to an Executor.Just check [SwingWorker](""https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingWorker.html"") and [Executor](""https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html"") javadoc for further information.Besides, SwingWorker.cancel() is not supposed to be called from doInBackground() but rather from another thread, generally the EDT, e.g. when user clicks a Cancel button in a progress dialog.",[],Concurrency,"{""Tasks and Thread Pools"": 0.6, ""Asynchronous Computations"": 0.75}"
116957,122082,Which Layout Manager do you use?,"What java GUI layout manager does everyone use?  Lately, I have been using [MigLayout](""http://www.miglayout.com/""), which has some powerful component controls.  Just wanted to see what other developers are using other than the standard JDK ones.",[],<java><swing><layout>,122082,"[MiGLayout](""http://www.miglayout.com/"") is the GUI layout manager which is widely used by Java Developers.",[],User Interface Components with Swing,"{""Introduction to Layout Management"": 1.6, ""Sophisticated Layout Management"": 0.8}"
117690,117711,Wait until any of Future<T> is done,"I have few asynchronous tasks running and I need to wait until at least one of them is finished (in the future probably I'll need to wait util M out of N tasks are finished).Currently they are presented as Future, so I need something like--CODE--Is there anything like this? Or anything similar, not necessary for Future. Currently I loop through collection of futures, check if one is finished, then sleep for some time and check again. This looks like not the best solution, because if I sleep for long period then unwanted delay is added, if I sleep for short period then it can affect performance.I could try using --CODE--and decrease countdown when task is complete and do --CODE--, but I found it possible only if I control Future creation. It is possible, but requires system redesign, because currently logic of tasks creation (sending Callable to ExecutorService) is separated from decision to wait for which Future. I could also override --CODE--and create custom implementation of RunnableFuture with ability to attach listener to be notified when task is finished, then attach such listener to needed tasks and use CountDownLatch, but that means I have to override newTaskFor for every ExecutorService I use - and potentially there will be implementation which do not extend AbstractExecutorService. I could also try wrapping given ExecutorService for same purpose, but then I have to decorate all methods producing Futures.All these solutions may work but seem very unnatural. It looks like I'm missing something simple, like --CODE--in c#. Are there any well known solutions for such kind of problem?UPDATE:Originally I did not have access to Future creation at all, so there were no elegant solution. After redesigning system I got access to Future creation and was able to add countDownLatch.countdown() to execution process, then I can countDownLatch.await() and everything works fine.Thanks for other answers, I did not know about ExecutorCompletionService and it indeed can be helpful in similar tasks, but in this particular case it could not be used because some Futures are created without any executor - actual task is sent to another server via network, completes remotely and completion notification is received.","[""/** * Blocks current thread until one of specified futures is done and returns it.  */public static <T> Future<T> waitForAny(Collection<Future<T>> futures)         throws AllFuturesFailedException"", ""new CountDownLatch(1)"", ""countdown.await()"", ""<T> RunnableFuture<T> AbstractExecutorService.newTaskFor(Callable<T> callable)"", ""WaitHandle.WaitAny(WaitHandle[] waitHandles)""]",<java><multithreading><concurrency>,117711,"As far as I know, Java has no analogous structure to the WaitHandle.WaitAny method.It seems to me that this could be achieved through a ""WaitableFuture"" decorator:--CODE--Though this would only work if it can be inserted before the execution code, since otherwise the execution code would not have the new doTask() method. But I really see no way of doing this without polling if you cannot somehow gain control of the Future object before execution.Or if the future always runs in its own thread, and you can somehow get that thread. Then you could spawn a new thread to join each other thread, then handle the waiting mechanism after the join returns... This would be really ugly and would induce a lot of overhead though. And if some Future objects don't finish, you could have a lot of blocked threads depending on dead threads. If you're not careful, this could leak memory and system resources.--CODE--","[""public WaitableFuture<T>    extends Future<T>{    private CountDownLatch countDownLatch;    WaitableFuture(CountDownLatch countDownLatch)    {        super();        this.countDownLatch = countDownLatch;    }    void doTask()    {        super.doTask();        this.countDownLatch.countDown();    }}"", ""/** * Extremely ugly way of implementing WaitHandle.WaitAny for Thread.Join(). */public static joinAny(Collection<Thread> threads, int numberToWaitFor){    CountDownLatch countDownLatch = new CountDownLatch(numberToWaitFor);    foreach(Thread thread in threads)    {        (new Thread(new JoinThreadHelper(thread, countDownLatch))).start();    }    countDownLatch.await();}class JoinThreadHelper    implements Runnable{    Thread thread;    CountDownLatch countDownLatch;    JoinThreadHelper(Thread thread, CountDownLatch countDownLatch)    {        this.thread = thread;        this.countDownLatch = countDownLatch;    }    void run()    {        this.thread.join();        this.countDownLatch.countDown();    }}""]",Concurrency,"{""Tasks and Thread Pools"": 1.55, ""Asynchronous Computations"": 0.7}"
118371,118388,How do you ensure multiple threads can safely access a class field?,"When a class field is accessed via a getter method by multiple threads, how do you maintain thread safety? Is the synchronized keyword sufficient?Is this safe:--CODE--or does the setter introduce further complications?","[""public class SomeClass {    private int val;    public synchronized int getVal() {        return val;    }    private void setVal(int val) {        this.val = val;    }}""]",<java><multithreading><synchronized>,118388,"If you use 'synchronized' on the setter here too, this code is threadsafe. However it may not be sufficiently granular; if you have 20 getters and setters and they're all synchronized, you may be creating a synchronization bottleneck.In this specific instance, with a single int variable, then eliminating the 'synchronized' and marking the int field 'volatile' will also ensure visibility (each thread will see the latest value of 'val' when calling the getter) but it may not be synchronized enough for your needs. For example, expecting--CODE--to set val to 2 if and only if it's already 1 is incorrect. For this you need an external lock, or some atomic compare-and-set method.I strongly suggest you read Java Concurrency In Practice by Brian Goetz et al, it has the best coverage of Java's concurrency constructs.","["" int old = someThing.getVal(); if (old == 1) {    someThing.setVal(2); }""]",Concurrency,"{""Thread-Safe Collections"": 0.75, ""Synchronization"": 0.9}"
119328,119586,"How do I truncate a java string to fit in a given number of bytes, once UTF-8 encoded?",How do I truncate a java String so that I know it will fit in a given number of bytes storage once it is UTF-8 encoded?,[],<java><string><unicode><utf-8><truncate>,119586,"Here is a simple loop that counts how big the UTF-8 representation is going to be, and truncates when it is exceeded:--CODE--This does handle [surrogate pairs](""http://en.wikipedia.org/wiki/UTF-16"") that appear in the input string. Java's UTF-8 encoder (correctly) outputs surrogate pairs as a single 4-byte sequence instead of two 3-byte sequences, so truncateWhenUTF8() will return the longest truncated string it can. If you ignore surrogate pairs in the implementation then the truncated strings may be shorted than they needed to be.I haven't done a lot of testing on that code, but here are some preliminary tests:--CODE--Updated Modified code example, it now handles surrogate pairs.","[""public static String truncateWhenUTF8(String s, int maxBytes) {    int b = 0;    for (int i = 0; i < s.length(); i++) {        char c = s.charAt(i);        // ranges from http://en.wikipedia.org/wiki/UTF-8        int skip = 0;        int more;        if (c <= 0x007f) {            more = 1;        }        else if (c <= 0x07FF) {            more = 2;        } else if (c <= 0xd7ff) {            more = 3;        } else if (c <= 0xDFFF) {            // surrogate area, consume next char as well            more = 4;            skip = 1;        } else {            more = 3;        }        if (b + more > maxBytes) {            return s.substring(0, i);        }        b += more;        i += skip;    }    return s;}"", ""private static void test(String s, int maxBytes, int expectedBytes) {    String result = truncateWhenUTF8(s, maxBytes);    byte[] utf8 = result.getBytes(Charset.forName(\""UTF-8\""));    if (utf8.length > maxBytes) {        System.out.println(\""BAD: our truncation of \"" + s + \"" was too big\"");    }    if (utf8.length != expectedBytes) {        System.out.println(\""BAD: expected \"" + expectedBytes + \"" got \"" + utf8.length);    }    System.out.println(s + \"" truncated to \"" + result);}public static void main(String[] args) {    test(\""abcd\"", 0, 0);    test(\""abcd\"", 1, 1);    test(\""abcd\"", 2, 2);    test(\""abcd\"", 3, 3);    test(\""abcd\"", 4, 4);    test(\""abcd\"", 5, 4);    test(\""a\\u0080b\"", 0, 0);    test(\""a\\u0080b\"", 1, 1);    test(\""a\\u0080b\"", 2, 1);    test(\""a\\u0080b\"", 3, 3);    test(\""a\\u0080b\"", 4, 4);    test(\""a\\u0080b\"", 5, 4);    test(\""a\\u0800b\"", 0, 0);    test(\""a\\u0800b\"", 1, 1);    test(\""a\\u0800b\"", 2, 1);    test(\""a\\u0800b\"", 3, 1);    test(\""a\\u0800b\"", 4, 4);    test(\""a\\u0800b\"", 5, 5);    test(\""a\\u0800b\"", 6, 5);    // surrogate pairs    test(\""\\uD834\\uDD1E\"", 0, 0);    test(\""\\uD834\\uDD1E\"", 1, 0);    test(\""\\uD834\\uDD1E\"", 2, 0);    test(\""\\uD834\\uDD1E\"", 3, 0);    test(\""\\uD834\\uDD1E\"", 4, 4);    test(\""\\uD834\\uDD1E\"", 5, 4);}""]",Fundamental Programming Structures in Java,"{""Strings"": 1.65}"
121715,121777,Dynamically added JTable not displaying,"Java Newbie here. I have a JFrame that I added to my netbeans project, and I've added the following method to it, which creates a JTable. Problem is, for some reason when I call this method, the JTable isn't displayed. Any suggestions?--CODE--The method is called in the following context:--CODE--... where DBReader.outMatchesTable() is defined as--CODE--My guess is I'm overlooking something, either about the swing classes I'm using, or about Java. Any ideas?","[""public void showFromVectors(Vector colNames, Vector data) {         jt = new javax.swing.JTable(data, colNames);    sp = new javax.swing.JScrollPane(jt);    //NB: \""this\"" refers to my class DBGridForm, which extends JFrame    this.add(sp,java.awt.BorderLayout.CENTER);    this.setSize(640,480);}"", ""DBGridForm gf = new DBGridForm(); //DBGridForm extends JFrameDBReader.outMatchesTable(gf);gf.setVisible(true);"", ""static public void outMatchesTable(DBGridForm gf) {    DBReader ddb = new DBReader();    ddb.readMatchesTable(null);    gf.showFromVectors(ddb.lastRsltColNames, ddb.lastRsltData);}""]",<java><swing><netbeans><jtable>,121777,"""this"" in your context is unclear. Is it inside an applet? a JFrame?You may be having a layout issue, make sure you've called setLayout on your class with a new borderlayout.In a swing application, you'd want to use getRootContentPane().add() instead of a raw add(), depending on the version.Java tutorial on adding top-level content: [http://java.sun.com/docs/books/tutorial/uiswing/components/toplevel.html](""http://java.sun.com/docs/books/tutorial/uiswing/components/toplevel.html"")",[],Graphical User Interface Programming,"{""Displaying Information in a Component"": 1.4}"
121762,121853,Sleep a thread until an event is attended in another thread,"I have two threads in an Android application, one is the view thread, and the other is the worker thread. What I want to do is, sleep the worker thread until the view thread terminates the handling of the onDraw method.How i can do this? is there any wait for the signal or something?",[],<java><android><multithreading>,121853,"Share a java.lang.Object between the two threads, whose sole purpose is to tell the worker thread when it can continue its work.  Whenever the worker thread reaches a point where it should sleep, it does this:--CODE--When the view thread finishes its onDraw work, it calls this:--CODE--Note the requirement that the view thread owns the monitor on the object.  In your case, this should be fairly simple to enforce with a small sync block:--CODE--Consult the javadoc for java.lang.Object on these methods (and notifyAll, just in case); they're very well written.  ","[""stick.wait();"", ""stick.notify();"", ""void onDraw() {  ...  synchronized (stick) {    stick.notify();  }} // end onDraw()""]",Concurrency,"{""Tasks and Thread Pools"": 0.85, ""Synchronization"": 0.8}"
125333,125354,How to implement simple threading with a fixed number of worker threads,"I'm looking for the simplest, most straightforward way to implement the following:The main program instantiates workerthreads to do a task.Only n tasks can be running at once.When n is reached, no more workersare started until the count ofrunning threads drops back below n.",[],<java><multithreading><concurrency>,125354,"I think that [Executors.newFixedThreadPool](""http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool(int)"") fits your requirements.  There are a number of different ways to use the resulting ExecutorService, depending on whether you want a result returned to the main thread, or whether the task is totally self-contained, and whether you have a collection of tasks to perform up front, or whether tasks are queued in response to some event.  --CODE--Alternatively, if you have a new asynchronous task to perform in response to some event, you probably just want to use the ExecutorService's simple execute(Runnable) method.","[""  Collection<YourTask> tasks = new ArrayList<YourTask>();  YourTask yt1 = new YourTask();  ...  tasks.add(yt1);  ...  ExecutorService exec = Executors.newFixedThreadPool(5);  List<Future<YourResultType>> results = exec.invokeAll(tasks);""]",Concurrency,"{""Tasks and Thread Pools"": 1.55, ""Synchronization"": 0.6}"
128016,128040,"Java, Swing: how do I set the maximum width of a JTextField?","I'm writing a custom file selection component. In my UI, first the user clicks a button, which pops a JFileChooser; when it is closed, the absolute path of the selected file is written to a JTextField.The problem is, absolute paths are usually long, which causes the text field to enlarge, making its container too wide.I've tried this, but it didn't do anything, the text field is still too wide:--CODE--Currently, when it is empty, it is already 400px long, because of GridBagConstraints attached to it.I'd like it to be like text fields in HTML pages, which have a fixed size and do not enlarge when the input is too long.So, how do I set the max size for a JTextField ?","[""fileNameTextField.setMaximumSize(new java.awt.Dimension(450, 2147483647));""]",<java><swing><jtextfield>,128040,"It may depend on the layout manager your text field is in.  Some layout managers expand and some do not.  Some expand only in some cases, others always.  I'm assuming you're doing--CODE--If so, for most reasonable layouts, the field should not change size (at least, it shouldn't grow).  Often layout managers behave badly when put into JScrollPanes.In my experience, trying to control the sizes via setMaximumSize and setPreferredWidth and so on are precarious at best.  Swing decided on its own with the layout manager and there's little you can do about it.All that being said, I have no had the problem you are experiencing, which leads me to believe that some judicious use of a layout manager will solve the problem.","[""filedNameTextField = new JTextField(80); // 80 == columns""]",User Interface Components with Swing,"{""Text Input"": 1.8}"
130506,131524,How many threads should I use in my Java program?,"I recently inherited a small Java program that takes information from a large database, does some processing and produces a detailed image regarding the information. The original author wrote the code using a single thread, then later modified it to allow it to use multiple threads. In the code he defines a constant;--CODE--Which then sets the number of threads that are used to create the image.I understand his reasoning that the number of threads cannot be greater than the number of available processors, so set it the the amount to get the full potential out of the processor(s). Is this correct? or is there a better way to utilize the full potential of the processor(s)?EDIT: To give some more clarification, The specific algorithm that is being threaded scales to the resolution of the picture being created, (1 thread per pixel). That is obviously not the best solution though. The work that this algorithm does is what takes all the time, and is wholly mathematical operations, there are no locks or other factors that will cause any given thread to sleep. I just want to maximize the programs CPU utilization to decrease the time to completion.","[""//  number of threadspublic static final int THREADS =  Runtime.getRuntime().availableProcessors();""]",<java><multithreading>,131524,"Threads are fine, but as others have noted, you have to be highly aware of your bottlenecks.  Your algorithm sounds like it would be susceptible to cache contention between multiple CPUs - this is particularly nasty because it has the potential to hit the performance of all of your threads (normally you think of using multiple threads to continue processing while waiting for slow or high latency IO operations).Cache contention is a very important aspect of using multi CPUs to process a highly parallelized algorithm:  Make sure that you take your memory utilization into account.  If you can construct your data objects so each thread has it's own memory that it is working on, you can greatly reduce cache contention between the CPUs.  For example, it may be easier to have a big array of ints and have different threads working on different parts of that array - but in Java, the bounds checks on that array are going to be trying to access the same address in memory, which can cause a given CPU to have to reload data from L2 or L3 cache.Splitting the data into it's own data structures, and configure those data structures so they are thread local (might even be more optimal to use [ThreadLocal](""http://java.sun.com/j2se/1.4.2/docs/api/java/lang/ThreadLocal.html"") - that actually uses constructs in the OS that provide guarantees that the CPU can use to optimize cache.The best piece of advice I can give you is test, test, test.  Don't make assumptions about how CPUs will perform - there is a huge amount of magic going on in CPUs these days, often with counterintuitive results.  Note also that the JIT runtime optimization will add an additional layer of complexity here (maybe good, maybe not). ",[],Concurrency,"{""Thread Properties"": 1.0, ""Tasks and Thread Pools"": 0.7, ""Synchronization"": 0.65}"
133988,134014,Synchronizing on String objects in Java,"I have a webapp that I am in the middle of doing some load/performance testing on, particularily on a feature where we expect a few hundred users to be accessing the same page and hitting refresh about every 10 seconds on this page. One area of improvement that we found we could make with this function was to cache the responses from the web service for some period of time, since the data is not changing.After implementing this basic caching, in some further testing I found out that I didn't consider how concurrent threads could access the Cache at the same time. I found that within the matter of ~100ms, about 50 threads were trying to fetch the object from the Cache, finding that it had expired, hitting the web service to fetch the data, and then putting the object back in the cache.The original code looked something like this:--CODE--So, to make sure that only one thread was calling the web service when the object at key expired, I thought I needed to synchronize the Cache get/set operation, and it seemed like using the cache key would be a good candidate for an object to synchronize on (this way, calls to this method for email b@b.com would not be blocked by method calls to a@a.com).I updated the method to look like this:--CODE--I also added logging lines for things like ""before synchronization block"", ""inside synchronization block"", ""about to leave synchronization block"", and ""after synchronization block"", so I could determine if I was effectively synchronizing the get/set operation.However it doesn't seem like this has worked. My test logs have output like:  (log output is 'threadname' 'logger name' 'message')  http-80-Processor253 jsp.view-page - getSomeDataForEmail: about to enter synchronization block  http-80-Processor253 jsp.view-page - getSomeDataForEmail: inside synchronization block  http-80-Processor253 cache.StaticCache - get: object at key [SomeData-test@test.com] has expired  http-80-Processor253 cache.StaticCache - get: key [SomeData-test@test.com] returning value [null]  http-80-Processor263 jsp.view-page - getSomeDataForEmail: about to enter synchronization block  http-80-Processor263 jsp.view-page - getSomeDataForEmail: inside synchronization block  http-80-Processor263 cache.StaticCache - get: object at key [SomeData-test@test.com] has expired  http-80-Processor263 cache.StaticCache - get: key [SomeData-test@test.com] returning value [null]  http-80-Processor131 jsp.view-page - getSomeDataForEmail: about to enter synchronization block  http-80-Processor131 jsp.view-page - getSomeDataForEmail: inside synchronization block  http-80-Processor131 cache.StaticCache - get: object at key [SomeData-test@test.com] has expired  http-80-Processor131 cache.StaticCache - get: key [SomeData-test@test.com] returning value [null]  http-80-Processor104 jsp.view-page - getSomeDataForEmail: inside synchronization block  http-80-Processor104 cache.StaticCache - get: object at key [SomeData-test@test.com] has expired  http-80-Processor104 cache.StaticCache - get: key [SomeData-test@test.com] returning value [null]  http-80-Processor252 jsp.view-page - getSomeDataForEmail: about to enter synchronization block  http-80-Processor283 jsp.view-page - getSomeDataForEmail: about to enter synchronization block  http-80-Processor2 jsp.view-page - getSomeDataForEmail: about to enter synchronization block  http-80-Processor2 jsp.view-page - getSomeDataForEmail: inside synchronization block  I wanted to see only one thread at a time entering/exiting the synchronization block around the get/set operations.Is there an issue in synchronizing on String objects? I thought the cache-key would be a good choice as it is unique to the operation, and even though the final String key is declared within the method, I was thinking that each thread would be getting a reference to the same object and therefore would synchronization on this single object.What am I doing wrong here?Update: after looking further at the logs, it seems like methods with the same synchronization logic where the key is always the same, such as --CODE--do not exhibit the same concurrency problem - only one thread at a time is entering the block.Update 2: Thanks to everyone for the help! I accepted the first answer about intern()ing Strings, which solved my initial problem - where multiple threads were entering synchronized blocks where I thought they shouldn't, because the key's had the same value.As others have pointed out, using intern() for such a purpose and synchronizing on those Strings does indeed turn out to be a bad idea - when running JMeter tests against the webapp to simulate the expected load, I saw the used heap size grow to almost 1GB in just under 20 minutes.Currently I'm using the simple solution of just synchronizing the entire method - but I really like the code samples provided by martinprobst and MBCook, but since I have about 7 similar getData() methods in this class currently (since it needs about 7 different pieces of data from a web service), I didn't want to add almost-duplicate logic about getting and releasing locks to each method. But this is definitely very, very valuable info for future usage. I think these are ultimately the correct answers on how best to make an operation like this thread-safe, and I'd give out more votes to these answers if I could!","[""private SomeData[] getSomeDataByEmail(WebServiceInterface service, String email) {  final String key = \""Data-\"" + email;  SomeData[] data = (SomeData[]) StaticCache.get(key);  if (data == null) {      data = service.getSomeDataForEmail(email);      StaticCache.set(key, data, CACHE_TIME);  }  else {      logger.debug(\""getSomeDataForEmail: using cached object\"");  }  return data;}"", ""private SomeData[] getSomeDataByEmail(WebServiceInterface service, String email) {  SomeData[] data = null;  final String key = \""Data-\"" + email;  synchronized(key) {          data =(SomeData[]) StaticCache.get(key);    if (data == null) {        data = service.getSomeDataForEmail(email);        StaticCache.set(key, data, CACHE_TIME);    }    else {      logger.debug(\""getSomeDataForEmail: using cached object\"");    }  }  return data;}"", ""final String key = \""blah\"";...synchronized(key) { ...""]",<java><multithreading><synchronization><thread-safety><synchronized>,134014,"Without putting my brain fully into gear, from a quick scan of what you say it looks as though you need to intern() your Strings:--CODE--Two Strings with the same value are otherwise not necessarily the same object.Note that this may introduce a new point of contention, since deep in the VM, intern() may have to acquire a lock. I have no idea what modern VMs look like in this area, but one hopes they are fiendishly optimised.I assume you know that StaticCache still needs to be thread-safe. But the contention there should be tiny compared with what you'd have if you were locking on the cache rather than just the key while calling getSomeDataForEmail.Response to question update:I think that's because a string literal always yields the same object. Dave Costa points out in a comment that it's even better than that: a literal always yields the canonical representation. So all String literals with the same value anywhere in the program would yield the same object.EditOthers have pointed out that synchronizing on intern strings is actually a really bad idea - partly because creating intern strings is permitted to cause them to exist in perpetuity, and partly because if more than one bit of code anywhere in your program synchronizes on intern strings, you have dependencies between those bits of code, and preventing deadlocks or other bugs may be impossible.Strategies to avoid this by storing a lock object per key string are being developed in other answers as I type.Here's an alternative - it still uses a singular lock, but we know we're going to need one of those for the cache anyway, and you were talking about 50 threads, not 5000, so that may not be fatal. I'm also assuming that the performance bottleneck here is slow blocking I/O in DoSlowThing() which will therefore hugely benefit from not being serialised. If that's not the bottleneck, then:If the CPU is busy then this approach may not be sufficient and you need another approach.If the CPU is not busy, and access to server is not a bottleneck, then this approach is overkill, and you might as well forget both this and per-key locking, put a big synchronized(StaticCache) around the whole operation, and do it the easy way.Obviously this approach needs to be soak tested for scalability before use -- I guarantee nothing.This code does NOT require that StaticCache is synchronized or otherwise thread-safe. That needs to be revisited if any other code (for example scheduled clean-up of old data) ever touches the cache.IN_PROGRESS is a dummy value - not exactly clean, but the code's simple and it saves having two hashtables. It doesn't handle InterruptedException because I don't know what your app wants to do in that case. Also, if DoSlowThing() consistently fails for a given key this code as it stands is not exactly elegant, since every thread through will retry it. Since I don't know what the failure criteria are, and whether they are liable to be temporary or permanent, I don't handle this either, I just make sure threads don't block forever. In practice you may want to put a data value in the cache which indicates 'not available', perhaps with a reason, and a timeout for when to retry.--CODE--Every time anything is added to the cache, all threads wake up and check the cache (no matter what key they're after), so it's possible to get better performance with less contentious algorithms. However, much of that work will take place during your copious idle CPU time blocking on I/O, so it may not be a problem.This code could be commoned-up for use with multiple caches, if you define suitable abstractions for the cache and its associated lock, the data it returns, the IN_PROGRESS dummy, and the slow operation to perform. Rolling the whole thing into a method on the cache might not be a bad idea.","[""final String firstkey = \""Data-\"" + email;final String key = firstkey.intern();"", ""// do not attempt double-check locking here. I mean it.synchronized(StaticObject) {    data = StaticCache.get(key);    while (data == IN_PROGRESS) {        // another thread is getting the data        StaticObject.wait();        data = StaticCache.get(key);    }    if (data == null) {        // we must get the data        StaticCache.put(key, IN_PROGRESS, TIME_MAX_VALUE);    }}if (data == null) {    // we must get the data    try {        data = server.DoSlowThing(key);    } finally {        synchronized(StaticObject) {            // WARNING: failure here is fatal, and must be allowed to terminate            // the app or else waiters will be left forever. Choose a suitable            // collection type in which replacing the value for a key is guaranteed.            StaticCache.put(key, data, CURRENT_TIME);            StaticObject.notifyAll();        }    }}""]",Concurrency,"{""Synchronization"": 1.7000000000000002}"
138533,138767,"Java Swing: Ctrl+F1 does not work globally, but each other key combination","I have a swing gui with a tabbed pane in the north. Several key events are added to its input map:--CODE--If the tabbed pane or another button in a toolbar has the focus, Ctrl+F1 has no function. If another component is focused (e.g. JTree), Ctrl+F1 executes the action.The problem is, that it workes everywhere if I change the Keycode to e.g. VK_F2.The key F1 is'nt used anywhere else in the program.Any idea?Thanks,AndréEdit: A full text search in the java source code gave the answer: The ToolTipManager registeres the Key Ctrl+F1 to display the tooltip text if the key combination is pressed. So if a button with a tooltip is focused, Ctrl+F1 is handled by the ToolTipManager. Otherwise my action is called.","[""InputMap paneInputMap = pane.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);paneInputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_E, KeyEvent.CTRL_MASK ), \""finish\"");paneInputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_F1, KeyEvent.CTRL_MASK ), \""toggletoolbar\"");""]",<java><swing><keyevent>,138767,"So that this gets an answer, here's the solution copied from your edit in the question. ;-)  The ToolTipManager registeres the Key  Ctrl+F1 to display the tooltip text if  the key combination is pressed. So if  a button with a tooltip is focused,  Ctrl+F1 is handled by the  ToolTipManager. Otherwise my action is  called.",[],Graphical User Interface Programming,"{""Event Handling"": 1.45}"
138793,138922,How do I add a separator to a JComboBox in Java?,"I have a JComboBox and would like to have a separator in the list of elements. How do I do this in Java?A sample scenario where this would come in handy is when making a combobox for font-family-selection; similar to the font-family-selection-control in Word and Excel. In this case I would like to show the most-used-fonts at the top, then a separator and finally all font-families below the separator in alphabetical order.Can anyone help me with how to do this or is this not possible in Java?",[],<java><swing><jcombobox><jseparator>,138922,"There is a pretty short tutorial with an example that shows how to use a custom ListCellRenderer on java2s [http://www.java2s.com/Code/Java/Swing-Components/BlockComboBoxExample.htm](""http://www.java2s.com/Code/Java/Swing-Components/BlockComboBoxExample.htm"")Basically it involves inserting a known placeholder in your list model and when you detect the placeholder in the ListCellRenderer you return an instance of 'new JSeparator(JSeparator.HORIZONTAL)'",[],User Interface Components with Swing,"{""Choice Components"": 1.7000000000000002}"
139088,144142,JFrame.setDefaultLookAndFeelDecorated(true);,when i use setDefaultLookAndFeelDecorated(true) method in Javawhy is the Frame appear FullScreen when i maximize the Frame ?and how can i disaple the FullScreen mode in this method ?,[],<java><user-interface><swing>,144142,"Setting setDefaultLookAndFeelDecorated to true causes the decorations to be handled by the look and feel; this means that a System look-and-feel on both Windows and Mac (I have no Linux at hand now) retains the borders you would expect them of a native window, e.g. staying clear of the taskbar in Windows.When using the Cross Platform look-and-feel, a.k.a. Metal, which is the default on Windows, the Windows version will take over the entire screen, making it look like a full-screen window. On Mac, the OS refuses to give away its own titlebar, and draws a complete Metal frame (including the title bar) in a Mac-native window.So, in short, if you want to make sure the taskbar gets respected, use the Windows system look-and-feel on Windows. You can set it by using something like--CODE--","[""UIManager.setLookAndFeel((LookAndFeel) Class.forName(UIManager.getCrossPlatformLookAndFeelClassName()).newInstance());""]",Graphical User Interface Programming,"{""Displaying Information in a Component"": 0.85, ""Displaying Frames"": 0.8}"
141284,141303,The difference between the Runnable and Callable interfaces in Java,"What is the difference between using the Runnable and Callable interfaces when designing a concurrent thread in Java, why would you choose one over the other?",[],<java><multithreading><interface><runnable><callable>,141303,"See explanation [here](""http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html"").  The Callable interface is similar to  Runnable, in that both are designed  for classes whose instances are  potentially executed by another  thread. A Runnable, however, does not  return a result and cannot throw a  checked exception.",[],Concurrency,"{""Tasks and Thread Pools"": 0.9}"
144892,144893,How to center a Window in Java?,"What's the easiest way to centre a java.awt.Window, such as a JFrame or a JDialog?",[],<java><swing><user-interface><awt>,144893,"From [this link](""https://web.archive.org/web/20080921040824/http://blog.codebeach.com/2008/02/center-dialog-box-frame-or-window-in.html"")  If you are using Java 1.4 or newer,  you can use the simple method  setLocationRelativeTo(null) on the  dialog box, frame, or window to center  it.",[],User Interface Components with Swing,"{""Introduction to Layout Management"": 0.6, ""Dialog Boxes"": 0.5, ""Sophisticated Layout Management"": 0.8}"
145052,145173,"Simplest way to use ""BeanUtils alike"" replace","Is there any libraries that would allow me to use the same known notation as we use in BeanUtils for extracting POJO parameters, but for easily replacing placeholders in a string?I know it would be possible to roll my own, using BeanUtils itself or other libraries with similar features, but I didn't want to reinvent the wheel.I would like to take a String as follows:--CODE--And passing one instance of the User class below:--CODE--To something like:--CODE--Would get each placeholder replaced with actual values.Any ideas?","[""String s = \""User ${user.name} just placed an order. Deliver is to bemade to ${user.address.street}, ${user.address.number} - ${user.address.city} / ${user.address.state}\"";"", ""public class User {   private String name;   private Address address;    // (...)   public String getName() { return name; }    public Address getAddress() {  return address; } }public class Address {   private String street;   private int number;   private String city;   private String state;   public String getStreet() { return street; }   public int getNumber() {  return number; }   // other getters...}"", ""System.out.println(BeanUtilsReplacer.replaceString(s, user));""]",<java><string><replace><placeholder>,145173,"Rolling your own using BeanUtils wouldn't take too much wheel reinvention (assuming you want it to be as basic as asked for). This implementation takes a Map for replacement context, where the map key should correspond to the first portion of the variable lookup paths given for replacement.--CODE--Given the variables provided in your question:--CODE--","[""import java.lang.reflect.InvocationTargetException;import java.util.Map;import java.util.regex.Matcher;import java.util.regex.Pattern;import org.apache.commons.beanutils.BeanUtils;public class BeanUtilsReplacer{    private static Pattern lookupPattern = Pattern.compile(\""\\\\$\\\\{([^\\\\}]+)\\\\}\"");    public static String replaceString(String input, Map<String, Object> context)        throws IllegalAccessException, InvocationTargetException, NoSuchMethodException    {        int position = 0;        StringBuffer result = new StringBuffer();        Matcher m = lookupPattern.matcher(input);        while (m.find())        {            result.append(input.substring(position, m.start()));            result.append(BeanUtils.getNestedProperty(context, m.group(1)));            position = m.end();        }        if (position == 0)        {            return input;        }        else        {            result.append(input.substring(position));            return result.toString();        }    }}"", ""Map<String, Object> context = new HashMap<String, Object>();context.put(\""user\"", user);System.out.println(BeanUtilsReplacer.replaceString(s, context));""]",Fundamental Programming Structures in Java,"{""Strings"": 1.7000000000000002}"
146498,147428,JTable column spanning,"I am trying to make a JTable that has column spans available. Specifically, I am looking to nest a JTable inside another JTable, and when the user clicks to view the nested table, it should expand to push down the rows below and fill the empty space. This is similar to what you see in MS Access where you can nest tables, and clicking the expand button on a row will show you the corresponding entries in the nested table. If someone knows of a way to perform a column span with JTable, can you please point me in the right direction? Or if you know of an alternative way to do this, I am open to suggestions. The application is being built with Swing. Elements in the table, both high level and low level, have to be editable in any solution. Using nested JTables this won't be a problem, and any other solution would have to take this into consideration as well.",[],<java><swing><jtable>,147428,"As a pointer in the right direction, try [this article](""http://www.swingwiki.org/howto:column_spanning"") at SwingWiki that explains the TableUI method of column spanning quite well. Before this, I also tried some alternatives such as overriding the TableCellRenderer paint methods without much success.",[],User Interface Components with Swing,"{""Choice Components"": 0.7}"
147802,147898,Why does Swing in my Java Applet flicker on fast mouse over?,"I made a Java Applet with some Standard GUI Components on it. I used the [MigLayout](""http://www.miglayout.com/"") Manager.If I move the mouse slowly over the various GUI Components everything appears to be fine, but if I move the mouse fast, it flickers.What could make that nasty ugly redraw?(Core 2 Duo 6300, 2GB Ram, Windows XP)",[],<java><swing><applet>,147898,One thought would be to check your code (and/or the MigLayout code) for unnecessary repaint() operations.Custom UIs and layouts can cause weird problems sometimes...,[],Graphical User Interface Programming,"{""Event Handling"": 1.45, ""Displaying Information in a Component"": 0.7}"
149153,6504520,Loading animated gif from JAR file into ImageIcon,"I'm trying to create a ImageIcon from a animated gif stored in a jar file.--CODE--The image loads, but only the first frame of the animated gif.  The animation does not play. If I load the animated gif from a file on the filesystem, everything works as expected.  The animation plays through all the of frames.  So this works:--CODE--How can I load an animated gif into an ImageIcon from a jar file?EDIT:   Here is a complete test case, why doesn't this display the animation?--CODE--","[""ImageIcon imageIcon = new ImageIcon(ImageIO.read(MyClass.class.getClassLoader().getResourceAsStream(\""animated.gif\"")));"", ""ImageIcon imageIcon = new ImageIcon(\""/path/on/filesystem/animated.gif\"");"", ""import javax.imageio.ImageIO;import javax.swing.*;public class AnimationTest extends JFrame {    public static void main(String[] args) {        SwingUtilities.invokeLater(new Runnable() {            public void run() {                AnimationTest test = new AnimationTest();                test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                test.setVisible(true);            }        });    }    public AnimationTest() {        super();        try {            JLabel label = new JLabel();            ImageIcon imageIcon = new ImageIcon(ImageIO.read(AnimationTest.class.getClassLoader().getResourceAsStream(\""animated.gif\"")));            label.setIcon(imageIcon);            imageIcon.setImageObserver(label);            add(label);            pack();        } catch (Exception e) {            e.printStackTrace();        }    }}""]",<java><swing><animated-gif><javax.imageio>,6504520,This reads gif animation from inputStream--CODE--,"[""InputStream in = ...;Image image = Toolkit.getDefaultToolkit().createImage(org.apache.commons.io.IOUtils.toByteArray(in));""]",Fundamental Programming Structures in Java,"{""Input and Output"": 0.8}"
154791,159358,Java TreeNode: How to prevent getChildCount from doing expensive operation?,"I'm writing a Java Tree in which tree nodes could have children that take a long time to compute (in this case, it's a file system, where there may be network timeouts that prevent getting a list of files from an attached drive).The problem I'm finding is this:getChildCount() is called before the user specifically requests opening a particular branch of the tree.  I believe this is done so the JTree knows whether to show a + icon next to the node.An accurate count of children from getChildCount() would need to perform the potentially expensive operation If I fake the value of getChildCount(), the tree only allocates space for that many child nodes before asking for an enumeration of the children.  (If I return '1', I'll only see 1 child listed, despite that there are more)The enumeration of the children can be expensive and time-consuming, I'm okay with that.  But I'm not okay with getChildCount() needing to know the exact number of children.Any way I can work around this?Added: The other problem is that if one of the nodes represents a floppy drive (how archaic!), the drive will be polled before the user asks for its files; if there's no disk in the drive, this results in a system error.Update: Unfortunately, implementing the TreeWillExpand listener isn't the solution.  That can allow you to veto an expansion, but the number of nodes shown is still restricted by the value returned by TreeNode.getChildCount().",[],<java><swing><jtree>,159358,"There are a few parts to the solution:Like Lorenzo Boccaccia said, use the [TreeWillExpandListener](""http://java.sun.com/docs/books/tutorial/uiswing/components/tree.html#data"")Also, need to call nodesWereInserted on the tree, so the proper number of nodes will be displayed.  [See this code](""http://www.jroller.com/Thierry/resource/SwingX/LazyLoadingTreeNode.java"")I have determined that if you don't know the child count, TreeNode.getChildCount() needs to return at least 1 (it can't return 0)",[],Collections,"{""Concrete Collections"": 0.7}"
156472,156489,Is there a good drop-in replacement for Java's JEditorPane?,"I'm not happy with the rendering of HTML by Swing's JEditorPane. In particular bullets for unordered lists are hideous. Customising the rendering seems extremely difficult. Therefore I'm looking for a replacement with better HTML rendering.Does this exist? (I asked Google, and found nothing except a promising dead link).",[],<java><swing><jeditorpane>,156489,"Something that I looked at extensively a while back - and there are many options - however I nearly ended up using [http://lobobrowser.org/cobra.jsp](""http://lobobrowser.org/cobra.jsp""), but then the project was cancelled so I can't tell you how it all turned out...",[],User Interface Components with Swing,"{""Choice Components"": 0.7, ""Text Input"": 0.65}"
156912,218811,Sending a keyboard event from java to any application (on-screen-keyboard),"I am working on developing an on-screen keyboard with java.  This keyboard has a JComponent for every possible key.  When a mouse down is detected on the button, I want to send a specific keyboard code to the application currently on focus.  The keyboard itself is within a JFrame with no decorations and set to always-on-top.I found that the Robot class can be used to simulate these keyboard events on the native queue.  However, in this case, selecting the JComponent would mean that the key-press is received on the JFrame, and I wouldn't be able to receive it in the other applicationHow can I keep my on-screen keyboard ""Always-without-focus""? Is it maybe possible to use another approach to send the key-press? ",[],<java><events><swing><keyboard><java-native-interface>,218811,"Apparently the only way to do this is to have a JNI layer that will make the conversion from java to native.  Java has no easy way to provide such funcionality.This could be an interesting concept for a small, third party library for someone who wants to learn JNI...",[],Graphical User Interface Programming,"{""Displaying Information in a Component"": 0.7, ""Event Handling"": 1.55}"
156975,157046,How to add a horizontal gap with a JLabel,"I have a JLabel (actually, it is a JXLabel).I have put an icon and text on it.Now I wand to add some spacing on the left side of the component, like this:I DON'T accept suggestion to move the JLabel or add spacing by modifying the image.I just want to know how to do it with plain java code.",[],<java><swing><jlabel><swingx>,157046,I have found the solution!--CODE--Thanks everyone!,"[""setBorder(new EmptyBorder(0,10,0,0));""]",User Interface Components with Swing,"{""Text Input"": 1.7000000000000002}"
160315,160861,How to check for key being held down on startup in Java,"I'm trying to write a resolution selection dialog that pops up when a program first starts up. To prevent boring the user, I want to implement the fairly standard feature that you can turn off that dialog with a checkbox, but get it back by holding down the alt key at startup.Unfortunately, there is no obvious way to ask java whether a given key is currently being pressed. You can only register to be informed of new key presses via a KeyListener, but that doesn't help if the keypress starts before the app launches.",[],<java><swing><keyboard><key><awt>,160861,--CODE--,"[""public class LockingKeyDemo {    static Toolkit kit = Toolkit.getDefaultToolkit();    public static void main(String[] args) {        System.out.println(\""caps lock2 = \""                + kit.getLockingKeyState(KeyEvent.VK_CAPS_LOCK));}}""]",Graphical User Interface Programming,"{""Event Handling"": 1.65}"
160382,161145,Extract all string from a java project,"I have a rather big number of source files that I need parse and extract all string literals and put them in a file as play old java constant.For exemple:--CODE--Would become:--CODE--And in Constants.java I would have:--CODE--I do not want the strings to be externalized in a property text file.One reason is for consistency and code readability.The other is that our client code uses GWT, which does not support Java property text file mechanism.I could write some sort of parser (using ant replace task maybe)?But I wondered if an IDE already does this sort of thing automatically.","[""Label l = new Label(\""Cat\"");"", ""Label l = new Label(Constants.CAT);"", ""public final static String CAT = \""Cat\"";""]",<java><eclipse><string><gwt><plugins>,161145,"To complete Peter Kelley answer, you might consider for eclipse IDE the AST solution.You might then write an AST program which parse your source code and does what you want.A full example is available in this [eclipse corner article](""http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html""), also more details in the [eclipse help](""http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html"").And you can find some examples in [Listing 5 of the section ""Implementation of in-place translation"" of Automating the embedding of Domain Specific Languages in Eclipse JDT](""http://www.eclipse.org/articles/Article-AutomatingDSLEmbeddings/#implementation_in_place""), alongside [multiple examples in GitHub projects](""https://github.com/search?q=%22org.eclipse.jdt.core.dom.ASTVisitor%22&amp;ref=cmdform&amp;type=Code"").",[],Fundamental Programming Structures in Java,"{""Strings"": 1.25, ""Input and Output"": 0.65}"
164088,164180,Make your collections thread-safe?,"When designing a collection class, is there any reason not to implement locking privately to make it thread safe? Or should I leave that responsibility up to the consumer of the collection?",[],<c#><java><multithreading><collections>,164180,"  is there any reason not to implement locking privately to make it thread safe? It depends. Is your goal to write a collection class which is accessed by multiple threads?If so, make it thread safe. If not, don't waste your time. This kind of thing is what people refer to when they talk about 'premature optimization'Solve the problems that you have. Don't try to solve future problems that you think you may have some years in the future, because you can't see the future, and you'll invariably be wrong.Note: You still need to write your code in a maintainable way, such that if you did need to come along and add locking to the collection, it wouldn't be terribly hard. My point is ""don't implement features that you don't need and won't use""",[],Concurrency,"{""Thread-Safe Collections"": 1.8, ""Synchronization"": 0.65}"
169799,169857,How do I dynamically add Panels to other panels at runtime in Java?,I'm trying to get into java again (it's been a few years). I never really did any GUI coding in java. I've been using Netbeans to get started with this.When using winforms in C# at work I use a usercontrols to build parts of my UI and add them to forms dynamically. I've been trying to use JPanels like usercontrols in C#. I created a JPanel form called BlurbEditor. This has a few simple controls on it. I am trying to add it to another panel at run time on a button event. Here is the code that I thought would work:--CODE--This unfortunately is not working. What am I doing wrong?,"[""mainPanel.add(new BlurbEditor());mainPanel.revalidate();//I've also tried all possible combinations of these too//mainPanel.repaint();//mainPanel.validate();""]",<java><swing>,169857,I figured it out. The comments under the accepted answer here explain it:Dynamically added JTable not displayingBasically I just added the following before the mainPanel.add()--CODE--,"[""mainPanel.setLayout(new java.awt.BorderLayout());""]",Graphical User Interface Programming,"{""Displaying Information in a Component"": 0.65, ""Displaying Frames"": 0.65, ""Event Handling"": 0.6}"
172841,190302,Selection overridden by formatter,"I have applied a Formatter to a JFormattedTextField using a FormatterFactory, when a user clicks into the text field I want to select the contents. A focus listener does not work as expected because the formatter gets called, which eventually causes the value to be reset which ultimately de-selects the fields contents. I think what is happening is that after the value changes, the Caret moves to the rightmost position and this deselects the field.Does anyone have any knowledge of how to get around this and select the fields contents correctly?",[],<java><swing><caret><formatter>,190302,Quick and dirty workaround is to use EventQueue.invokeLater from your focusListener.--CODE--,"["" EventQueue.invokeLater(new Runnable(){  public void run() { yourTextField.selectAll();}});""]",Graphical User Interface Programming,"{""Event Handling"": 1.45}"
178667,1421097,Does JEditorPane have Charset problems when showing HTML?,"I have the following code:--CODE--If you run it, you'll notice the frame is blank. However, if I remove the ""; charset=ISO-8859-1"" from the meta tag, the HTML shows up. Any ideas why and what I can do to prevent this (other than manually hacking the HTML string over which I have no control...).Edit #1 - putProperty( ""Ignore-Charset"", ""true"" ) makes no difference unfortunately.","[""import javax.swing.JEditorPane;import javax.swing.JFrame;import javax.swing.JScrollPane;import javax.swing.ScrollPaneConstants;public class ScratchPad {    public static void main(String args[]) throws Exception {        String html =\""<html>\""+\""<head>\""+\""<meta http-equiv=\\\""Content-Type\\\"" content=\\\""text/html; charset=ISO-8859-1\\\""/>\""+ // this is the problem right here\""<title>Error 400 BAD_REQUEST</title>\""+\""</head>\""+\""<body>\""+\""<h2>HTTP ERROR: 400</h2><pre>BAD_REQUEST</pre>\""+\""<p>RequestURI=null</p>\""+\""<p><i><small><a href=\\\""http://jetty.mortbay.org\\\"">Powered by jetty://</a></small></i></p>\""+\""</body>\""+\""</html>\"";        JFrame f = new JFrame();        JEditorPane editor = new JEditorPane();        editor.setEditable( false );        editor.getDocument().putProperty( \""Ignore-Charset\"", \""true\"" );  // this line makes no difference either way        editor.setContentType( \""text/html\"" );        editor.setText( html );        f.add( new JScrollPane(editor, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,                                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER) );        f.pack();        f.setVisible( true );    }}""]",<java><html><swing><jeditorpane>,1421097,Use the follow line before setText and after setContentType.--CODE--This is one of the mystic undocumented features. setContentType create a new Document that it has no effect if you set it before.,"[""editor.getDocument().putProperty(\""IgnoreCharsetDirective\"", Boolean.TRUE);""]",User Interface Components with Swing,"{""Choice Components"": 0.75, ""Text Input"": 0.7}"
181615,181971,Java threads: Is it possible view/pause/kill a particular thread from a different java program running on the same JVM?,"I have a program 'foo' running different threads, fooT1, fooT2, .. fooTn.Now if I want write another program 'bar', which could kill the thread fooTr, is that possible?Reason: One of the thread fooTr tracks product license. If this thread is killed; one may run this product indefinitely. And killing 'foo' itself is tolerable as 'foo' as that is exactly what is being done on license expiry.System: Fedora Distribution of LinuxNote: The commands which start JVM and program foo are placed in /etc/init.d and anyone who has a decent knowledge of rc.1/rc.2/rc.3 structure can change/add the starting parameters to these.I hope my question is clear. If not, I can always edit it.",[],<java><multithreading><jvm>,181971,"To my knowledge it is not possible to do this directly. What you could consider however is to create some kind of service on your 'foo' that can be called from 'bar' to kill the thread. There are, of course, hundreds of ways to implement this. My first thought would be to do this using [RMI](""https://stackoverflow.com/search?q=java+rmi"").",[],Concurrency,"{""Tasks and Thread Pools"": 0.8, ""Thread Properties"": 0.6, ""Synchronization"": 0.65}"
181690,181757,Thread synchronization question (in java),"my java application has a loading task which requires two server calls which can be parallelized. So I launch a Thread t1 (doing task1) and a Thread t2 (for task2).I want then to do a specific task, task3 when both other tasks (1 &amp; 2) are over. Naturally I can't tell which of task1 and task2 will finish first...Which would be for you the simplest (and safest) way to code this ?Thank you for your help",[],<java><multithreading><concurrency><synchronization>,181757,"You've got several options:If task3 is on a separate thread AND task1 and task2 threads are exclusive to their tasks (no thread pooling) and finish when the task finish, you can use {T1.join(); T2.join();} to wait for both threads. Pros: Easy. Cons: The situation is rarely that simple.If task3 is on a separate thread, you could use java.util.concurrent.CountDownLatch shared between all threads. Task 3 will wait for the latch while task1 and task2 will decrease it. Pros: quite easy, oblivious to the environment. Cons: require T3 to be created before it's really needed.If task3 should only be created AFTER task1 and task2 are finished (no separate thread for it until after task1 and task2 finishes), you'd have to build something a bit more complex. I'd recommend either creating your own ExecutorService that take a condition n addition to the future and only executes the future when the condition changes, or creating a management service that will check conditions and submit given futures based on these conditions. Mind, this is of the top of my head, there might be simpler solutions. Pros: resources-friendly. Cons: complex.",[],Concurrency,"{""Synchronization"": 1.9}"
182316,182422,Java: Swing Libraries & Thread Safety,"I've often heard criticism of the lack of thread safety in the Swing libraries.  Yet, I am not sure as to what I would be doing in my own code with could cause issues:In what situations does the fact Swing is not thread safe come into play ?What should I actively avoid doing ?",[],<java><multithreading><swing>,182422,"Never do long running tasks in response to a button, event, etc as these are on the event thread. If you block the event thread, the ENTIRE GUI will be completely unresponsive resulting in REALLY pissed off users. This is why Swing seems slow and crusty. Use Threads, Executors, and SwingWorker to run tasks NOT ON THE EDT ( event dispatch thread). Do not update or create widgets outside of the EDT. Just about the only call you can do outside of the EDT is Component.repaint(). Use SwingUtilitis.invokeLater to ensure certain code executes on the EDT.Use [EDT Debug Techniques](""http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html"") and a smart look and feel (like [Substance](""https://substance.dev.java.net/""), which checks for EDT violation)If you follow these rules, Swing can make some very attractive and RESPONSIVE GUIsAn example of some REALLY awesome Swing UI work: [Palantir Technologies](""http://www.palantirtech.com/""). Note: I DO NOT work for them, just an example of awesome swing. Shame no public demo... Their [blog](""http://blog.palantirtech.com/"") is good too, sparse, but good",[],Concurrency,"{""Thread-Safe Collections"": 1.1, ""Asynchronous Computations"": 0.7}"
2561690,2570101,Placing component on Glass Pane,"I have a subclass of JLabel that forms a component of my GUI.  I have implemented the ability to drag and drop the component from one container to another, but without any visual effects.  I want to have this JLabel follow the cursor during the drag of the item from one container to another.  I figured that I could just create a glass pane and draw it on there.  However, even after I add the component to the glass pane, set the component visible, and set the glass pane visible, and set the glass pane as opaque, I still so not see the component.  I know the component works because I can add it to the content pane and have it show up.How do I add a component to the glass pane?Finally figured how to get the simple example working.  Thanks, @akf.  I was able to adapt this solution to my original problem, allowing me to remove ~60 lines of Java2D code that manually rendered a representation of the JLabel.--CODE--","[""package test;import java.awt.Color;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.JPanel;import javax.swing.border.LineBorder;public class MainFrame extends JFrame {    /**     * @param args     */    public static void main(String[] args) {        MainFrame mf = new MainFrame();        mf.setSize(400, 400);        mf.setLocationRelativeTo(null);        mf.setDefaultCloseOperation(DISPOSE_ON_CLOSE);        mf.setGlassPane(new JPanel());        JLabel l = new JLabel();        l.setText(\""Hello\"");        l.setBorder(new LineBorder(Color.BLACK, 1));        l.setBounds(10, 10, 50, 20);        l.setBackground(Color.RED);        l.setOpaque(true);        l.setPreferredSize(l.getSize());        //mf.add(l);        ((JPanel)mf.getGlassPane()).add(l);        mf.getGlassPane().setVisible(true);        mf.setVisible(true);    }}""]",<java><swing><glasspane>,2570101,"Besides the pointers to the LayerPane examples already provided, the issue with your original code centers around the setting of the preferred size of your label.  You set it before the JLabel has been sized, so your:--CODE--is ineffectual.  If, on the other hand, you make that call after you make your call to setBounds, you will see your desired results.  With that in mind, reorder this:--CODE--to look like this:--CODE--","[""l.setPreferredSize(l.getSize());"", ""l.setPreferredSize(l.getSize());l.setBounds(10, 10, 50, 20);"", ""l.setBounds(10, 10, 50, 20);l.setPreferredSize(l.getSize());""]",User Interface Components with Swing,"{""Choice Components"": 0.9}"
44563643,,How to pass ArrayList<String> to String[] and display the value inside a Spinner?,"What I'm trying to do is the following, I've an ArrayList which I populate with data, then I have a String[] that I'm using to display text on my spinner, so I want to put the data of my ArrayList inside to replace what's by default but nothing happens. When I'm trying to display it without Arrays.toString() it gives me the following :--CODE--But with the arrays.tostring() i get what i want.So how to pass my data ArrayList inside my string[] to display it on spinner ?Here is my code : --CODE--My spinner : --CODE--Here is OnItemSelectedListener :--CODE--Thanks for your help !","[""[Ljava.lang.string;@e4b348"", ""String prestationuserlist;ArrayList<String> textfordropdown2 = new ArrayList<>();String[] textfordropdown = {\""test\"", \""test\"", \""test\"",\""test\"", \""test\"", \""test\"",\""test\"", \""test\"", \""test\"",\""test\"", \""test\"", \""test\"",\""test\"", \""test\"", \""test\"",\""test\"", \""test\"", \""test\""};String[] valueofdropdowtext = {\""test\"", \""test\"", \""test\""};Spinner  spinnerdynamic;for(int i=0;i<arrSize;i++) {   object = prestationlist.getJSONObject(i);   // Here, we populate the array with value of json, each text and db value   textfordropdown2.add(object.getString(\""Text\""));   valueofdropdown.add(object.getString(\""Value\""));   valueofdropdowtext = valueofdropdown.toArray(new String[0]);   textfordropdown = textfordropdown2.toArray(new String [textfordropdown2.size()]);}"", ""    //Start Create a spinner with different view and value.    spinnerdynamic = (Spinner)findViewById(R.id.dynamic_spinner);    ArrayAdapter<String> adapter1 =            new ArrayAdapter<String>(MainActivity.this,                    android.R.layout.simple_spinner_item, textfordropdown );// Here we set the text with API return value.    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);// Here we create a dropdown list item.    spinnerdynamic.setAdapter(adapter1);    spinnerdynamic.setOnItemSelectedListener(onItemSelectedListener1); // Here we call the function which is getting the value according to selected text.    //End Create a spinner with different view and value."", ""  OnItemSelectedListener onItemSelectedListener1 =            new OnItemSelectedListener(){                @Override                public void onItemSelected(AdapterView<?> parent, View view,                                           int position, long id) {                    prestationuserlist = valueofdropdowtext[position];                    test = textfordropdown[position];                }                @Override                public void onNothingSelected(AdapterView<?> parent) {}            };""]",<java><android><string><arraylist><spinner>,44563935,"You don't need to convert your arrayList of Strings into an Array when using it with spinner adapter.See code below ---CODE--This is what I get -[](""https://i.stack.imgur.com/jHWKg.png"")","[""    spinner = (Spinner) findViewById(R.id.spinner);    // populate arraylist with data    ArrayList<String> spinnerArrayList = new ArrayList<>();    for(int i=1; i<10; i++)    {        spinnerArrayList.add(\""Item \"" + i);    }    // create spinner adapter with the above arraylist    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,            android.R.layout.simple_spinner_item, spinnerArrayList);    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);    // attach adapter to spinner    spinner.setAdapter(dataAdapter);""]",Fundamental Programming Structures in Java,"{""Strings"": 0.8, ""Arrays"": 0.8}"
2345966,,Java JComponent Scrollable resetting position,"I have a a JPanel with a BorderLayout()BorderLayout.CENTER contains a JComponent which implements scrollableAnd the north contains a JLabel, when ever I call setText() on the JLabel, the positioning of the JComponent resets back to the default position, of viewing the top left point? Are there methods to get around this, I have had a look in the api but I cannot see anything.Any help would be much appreciated.",[],<java><swing><jcomponent><scrollable>,2345993,"  BorderLayout.CENTER contains a  JComponent which implements scrollableThat only has meaning when the compnent is added to a JScrollPane. It has no relevance regarding the layout of a component.  when ever I call setText() on the  JLabel, the positioning of the  JComponent resets back to the default  positionI really have no idea what your program is doing. This probably invokes the layout manager which is putting the component in the proper position. So if this changes position it means it wasn't in the proper position before.So basically we don't have enough information to provide an answer.If you need more help post your [SSCCE](""http://sscce.org""). ",[],User Interface Components with Swing,"{""Choice Components"": 0.8, ""Sophisticated Layout Management"": 0.85}"
19778040,19778176,Java HashMaps with only put and get - possibly concurrency issues?,"I've worked with ConcurrentHashMaps, but I'm not quite sure if that will cover all of the bases here.I have a Spring Component. This Component will contain a Map. This will simply be a quick reference for objects in an external service. If the map does not contain a matching String, it will make a call to the external service, retrieve the object, and store it in the mapping. Then other classes can use the mapping for quick retrieval and usage. As such, there are only put() and get() operations performed on the map. Entries are never removed.That being said, I'm a little concerned that ConcurrentHashMap may not provide the atomic control I'd like. Fetching SomeObject from the external service is potentially expensive. I'd rather not have two separate threads calling in at nearly the same time, resulting in multiple calls for the same value to the external service. The idea is this:--CODE--Or this:--CODE--The former is certainly simpler, but the latter would ensure that one two or more threads won't try to simultaneously trigger a fetching of the same SomeObject. Alternatively, I suppose I could try locking out only gets that attempt to retrieve a SomeObject that is already in the process of being fetched and does not block retrieving SomeObjects that already exist, but that would require a wait mechanism on the various string values and I'm not sure how to best implement that.","[""Map<String, SomeObject> map = Collections.concurrentHashMap(    new HashMap<String, SomeObject>());public SomeObject getSomeObject(String key){    if (!map.containsKey(key)){        map.put(key, retrieveSomeObjectFromService(key));    }    return map.get(key);"", ""Map<String, SomeObject> map = new HashMap<String, SomeObject>();public SomeObject getSomeObject(String key){    synchronized(map){        if (!map.containsKey(key)){            map.put(key, retrieveSomeObjectFromService(key));        }    }    return map.get(key);}""]",<java><multithreading><concurrency><hashmap><synchronized>,19778176,"I would suggest you do a little bit of both!Fast path, just 1 get out of the concurrent hashmap.Slow path, full sync and lock--CODE--Do you understand why we need the 2nd get inside of the lock?  Leaving that out leaves a case where we end up making the inside object twice, and having different copies of it floating around.Also doing the assign the result to value and nullcheck vs using the contains method - understand why that is better?  If we do a .contains then a .get, we just did 2 hashmap lookup.  If I just do a get, I can cut my hashmap lookup time in half.Another version Peter suggested.. less lines of code, but not my personal preference:--CODE--","[""private final ConcurrentHashMap<String, Object> map = new ConcurrentHashMap<String, Object>();private final ReentrantLock lock = new ReentrantLock();public Object getSomeObject(String key) {    Object value = map.get(key);    if (value == null) {        try {            lock.lock();            value = map.get(key);            if (value == null) {                value = retrieveSomeObjectFromService(key);                map.put(key, value);            }        } finally {            lock.unlock();        }    }    return value;}"", ""private final ConcurrentHashMap<String, Object> map = new ConcurrentHashMap<String, Object>();public Object getSomeObject(String key) {    Object value = map.get(key);    if (value == null) {        synchronized (map) {            value = map.get(key);            if (value == null) {                value = retrieveSomeObjectFromService(key);                map.put(key, value);            }        }    }    return value;}""]",Concurrency,"{""Thread-Safe Collections"": 0.85, ""Synchronization"": 0.8}"
52070533,52070742,"How to construct a Path ""with zero elements""?","I'm about to write a test of a custom FileVisitor which requires the filename of a path.The documentation of [Path's getFileName](""https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#getFileName()"") reads  Returns:      a path representing the name of the file or directory, or null if this path has zero elementsApart from using a mock - which I try to avoid - how do I construct a Path with zero elements?Paths.get("""") - requires a non-null argument, the empty string is one elementnew File("""").toPath() - requires also a non-null argument, the empty string is one element, tooanything like Paths.get(""."") or Paths.get(""./"") also have non-zero elementsFor all of these, the filename is never null.Probably it's a behavior of the WindowsFileSystem implementation in Java.Does anyone know if other implementation of FileSystem behave differently and it's actually possible, that getFileName() returns null?",[],<java><file><nio>,52070742,(At least on OSX) java.nio.file.Paths.get('/') results in such a zero-element sun.nio.fs.UnixPath.,[],Fundamental Programming Structures in Java,"{""Input and Output"": 0.6}"
15448025,,Swing jfilechooser blocking other frames after passing null,I want my jfilechooser to display without blocking parent but i tried everything and still it is blocking parent. Any Solution....--CODE--,"[""public class main_class {    public static void main(String[] args) {        JFrame parent_frame = new JFrame(\""PARENT\"");        if (parent_frame != null) {            parent_frame.setBounds(50, 50, 500, 500);            parent_frame.setVisible(true);            parent_frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);            JFileChooser chooser = new JFileChooser();            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);            int returnVal = chooser.showDialog(null, \""Ok\"");        }    }}""]",<java><swing>,15448084,"By default, showDialog will use a modal dialog.JFileChooser is simply based on a JComponent, so, so long as you don't mind that your  code won't block, you could add the JFileChooser to a frame/dialog that you can yourself.  ",[],User Interface Components with Swing,"{""Choice Components"": 0.8}"
5773874,5773913,"JTabbedPane JLabel, JTextField","Right, I have a JTabbedPane that has a JPanel that contains a JLabel and a JTextField. my code JTabbed Pane declaration : --CODE--textfield declaration  :--CODE--JLabel :         this.channelLabel = new JLabel(""Channel name : "");        this.channelLabel.setSize(150, 30);        this.channelLabel.setLocation(10,10);--CODE--So what my plan is, was to have a tabbed pane that  has a JPanel where I have some Labels, textfields and buttons on fixed positions, but after doing this this is my result: [http://i.stack.imgur.com/vXa68.png](""http://i.stack.imgur.com/vXa68.png"")What I wanted was that I had the JLabel and next to it a full grown JTextfield on the left side not in the middle. Anyone any idea what my mistake is ? thank you :)","[""        this.tabPane = new JTabbedPane();    this.tabPane.setSize(750, 50);    this.tabPane.setLocation(10, 10);        tabPane.setSize(750,450);    tabPane.add(\""ControlPanel\"",controlPanel);"", ""    this.channelTxtFld = new JTextField(\""\"");    this.channelTxtFld.setFont(this.indentedFont);    this.channelTxtFld.setSize(200, 30);    this.channelTxtFld.setLocation(200, 10);"", ""private void createPanels() {    controlPanel = new JPanel();    controlPanel.setSize(650,500);} private void fillPanels() {    controlPanel.add(channelLabel);    controlPanel.add(channelTxtFld);}""]",<java><swing><jbutton><jlabel><jtextfield>,5773913,"What kind of Layout Manager are you using for your controlPanel, you probably want BorderLayout, putting the Label in the West, and the TextField in the center.BTW, setting the size and position of various components doesn't make sense unless you are using a Null Layout, which isn't a good idea. So i'd remove all that stuff and let the Layout Manager do it for you.",[],User Interface Components with Swing,"{""Choice Components"": 0.8}"
14120978,,Why Runnable.run() method was made to return no output,"I am trying to understand why Runnable.run method was made to take nothing as input and return nothing as output?I understand that a thread's local variable (reference or primitive) has to come from own stack, but system could have been made to initialized. Put another way, I don't think it is technically impossible (but I may be wrong).",[],<java><multithreading>,14121018,"Returning something is useful and is supported by Callable which can return one object. --CODE--As you can see Callable can return a value because the ExecutorService supports holding passing the value back to the thread with the Future object.  This was only added in Java 5.0, so before this having Runnable returning a value wouldn't have been useful as there was no where for this return value to go.Runnable doesn't need to take any arguments as it is an object which can hold any number of fields. e.g.--CODE--As you can see, the run() method can use any number of values which as passed implcitly by virtue of the fact the Runnable is an object, not just a holder for a method.","[""Future<MyReturnType> ret = executor.submit(new Callable<MyReturnType>() {    public MyReturnType call() throws Exception {         // do something         return new MyReturnType(value1, value2 ...);    }});"", "" static void bgLog(final Level level, final String message, final Throwable t) {    logExec.submit(new Runnable() {        // the anonymous nested class implicitly holds a copy of the final arguments above.        public void run() {           LOG.log(level, message, t);        }    }); }""]",Concurrency,"{""Thread States"": 0.8}"
12273164,12273283,Moving object won't stay within set bounds?,"I'm creating an applet in which a sheep is herded by a dog, both are objects as the dog object moves closer the sheep the sheep moves away in a random direction. (I'm sorry I know I've asked a lot of questions about this applet). So far everything works except the sheep object wont stay within the bounds I've set and eventually disappears off the screen entirely. I've tried lots of different things but nothing seems to work. Any ideas why the sheep object wont stay within the bounds? Any help would be much appreciated.Here is the code, there are two separate java files:MainPanel.java--CODE--SheepDog.java--CODE--","[""import java.awt.Graphics;import java.awt.event.MouseEvent;import java.awt.event.MouseMotionListener;import java.util.Random;import javax.swing.JPanel;public class MainPanel extends JPanel implements MouseMotionListener{    private static final long serialVersionUID = 1L;    Dog dog;    Sheep sheep;    int[] directionNumbersLeft = {0, 1, 3};    int[] directionNumbersRight = {1, 2, 3};    int[] directionNumbersUp = {0, 1, 2};    int[] directionNumbersDown = {0, 2, 3};    int x;    int selection;    int xposR;    int yposR;    int sheepx;    int sheepy;    int sheepBoundsx;    int sheepBoundsy;    int MAX_DISTANCE = 50;    int direction;    int distance;    public MainPanel()    {        addMouseMotionListener(this);        sheepx = 175;        sheepy = 75;        dog = new Dog(22,22);        sheep = new Sheep(sheepx, sheepy);        sheepBoundsx = 30;        sheepBoundsy = 30;    }    public void paintComponent(Graphics g)    {        super.paintComponent(g);        dog.display(g);        sheep.display(g);        g.drawRect(20, 20, 600, 600);    }    public void mouseDragged(MouseEvent e)    {        xposR = e.getX();        yposR = e.getY();        dog.setLocation(xposR, yposR);        sheep.setLocation(sheepx, sheepy);        direction = (int)(Math.random()*4);        Random rand = new Random();        x = rand.nextInt(3);        if (xposR > sheepx&amp;&amp; xposR < sheepx+sheepBoundsx &amp;&amp; yposR > sheepy                &amp;&amp; yposR < sheepy+sheepBoundsy &amp;&amp; direction == 0){            sheepx = sheepx + 50;        }        if (xposR > sheepx&amp;&amp; xposR < sheepx+sheepBoundsx &amp;&amp; yposR > sheepy                &amp;&amp; yposR < sheepy+sheepBoundsy &amp;&amp; direction == 1){            sheepy = sheepy + 50;        }        if (xposR > sheepx&amp;&amp; xposR < sheepx+sheepBoundsx &amp;&amp; yposR > sheepy                &amp;&amp; yposR < sheepy+sheepBoundsy &amp;&amp; direction == 2){            sheepx = sheepx - 50;        }        if (xposR > sheepx&amp;&amp; xposR < sheepx+sheepBoundsx &amp;&amp; yposR > sheepy                &amp;&amp; yposR < sheepy+sheepBoundsy &amp;&amp; direction == 3){            sheepy = sheepy - 50;        }        if (sheepx <= 20){            direction = directionNumbersLeft[x];        }        if (sheepy <= 20){            direction = directionNumbersUp[x];        }        if (sheepx >= 600){            direction = directionNumbersRight[x];        }        if (sheepy >= 600){            direction = directionNumbersDown[x];        }        if (xposR < sheepx){            direction = directionNumbersLeft[x];        }        if (xposR > sheepx){            direction = directionNumbersRight[x];        }        if (yposR > sheepy){            direction = directionNumbersDown[x];        }        if (yposR < sheepy){            direction = directionNumbersUp[x];        }        repaint();    }    public void mouseMoved(MouseEvent e) {    }}"", ""import java.awt.Color;import java.awt.Graphics;import javax.swing.*;public class SheepDog extends JApplet{    /**     *     */    private static final long serialVersionUID = 1L;    /**     *     */    MainPanel mainPanel;    public void init()    {        mainPanel = new MainPanel();        add(mainPanel);    }}class Dog{    int xpos;    int ypos;    int circleWidth = 30;    int circleHeight = 30;    public Dog(int x, int y)    {        xpos = x;        ypos = y;    }    public void setLocation(int lx, int ly)    {        xpos = lx;        ypos = ly;    }    public void display(Graphics g)    {        g.setColor(Color.blue);        g.fillOval(xpos, ypos, circleWidth, circleHeight);    }}class Sheep{    int xpos;    int ypos;    int circleWidth = 30;    int circleHeight = 30;    public Sheep(int x, int y)    {        xpos = x;        ypos = y;    }    public void setLocation(int lx, int ly)    {        xpos = lx;        ypos = ly;    }    public void display(Graphics g)    {        g.setColor(Color.green);        g.fillOval(xpos , ypos, circleWidth, circleHeight);        g.drawOval(xpos - 10, ypos - 10, 50, 50);    }}""]",<java><swing><random><applet>,12273283,"Try adding elses to your long string of if() statements, like so:--CODE--The way you had it before, if sheepx was left then 20, and less than the dog's x, it would still go away from the dog, even though it should've been worried about the boundaries. This was because both if statements would trigger, and modify direction, but since you check'd for boundary first, that would be overwritten by the attempt to run from the dog. Try this solution, tell me how it works","[""    if (sheepx <= 20){        direction = directionNumbersLeft[x];    } else if (sheepy <= 20){        direction = directionNumbersUp[x];    } else if (sheepx >= 600){        direction = directionNumbersRight[x];    } else ...""]",User Interface Components with Swing,"{""Choice Components"": 0.8, ""Sophisticated Layout Management"": 0.8}"
56621362,,How to change window size according to screen size in Java?,"I set the size of my window as 640 x 1136, and I'm running the program on a 13-inch MBP, which has a resolution of 2560 x 1600. I'm assuming that the window should be able to fully displayed on my screen, but it only shows the top half. Here's my code.--CODE--Here's how it looks like on my screen:[](""https://i.stack.imgur.com/QS66A.png"")I tried to play around with the parameters and I found that when the HEIGHT is around 800, the window would exceed the screen. How can the max window height be only 1/2 of the resolution of the screen? And is there a way to increase or decrease the size of the window according to the screen size automatically while keeping everything in scale?Thanks! ","[""public static final int WIDTH = 640;  // width of windowpublic static final int HEIGHT = 1136; // height of windowpublic static void main(String[] args) {    JFrame frame = new JFrame();    World world = new World();    frame.add(world);    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);    frame.setSize(WIDTH, HEIGHT);    frame.setLocationRelativeTo(null);     frame.setVisible(true); // 1) set window visible 2) paint() asap    world.action(); // start the program}""]",<java><swing>,56629501,You have to get screen size at runtime and adjust frame size accordingly. This will allow your program to look identically on different screens. --CODE--,"[""Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();frame.setSize(dim.width / 2, dim.height / 2);""]",User Interface Components with Swing,"{""Sophisticated Layout Management"": 0.8}"
26290043,26296967,"Optimizing java heap usage by String using StringBuffer , StringBuilder , String.intern()","I am monitoring the performance and CPU of a large java application , using VisualVM. When I look at its memory profile I see maximum heap (about 50%) is being used up by char arrays.Following is a screenshot of the memory profile:In the memory profile at any given time i see roughly about 9000 char[] objects. The application accepts a large file as input. The file roughly has about 80 lines each line consisting of 15-20 delimited config options. The application parses the file and stores these lines in a ArrayList of Strings. It then parses these string to get the individual config options for each server. The application also frequently logs each event to the console.Java implementation of Strings uses char[] internally along with a reference to array and 3 integer.From different posts on the internet it seems like StringBuffer , StringBuilder , String.intern() are more memory efficient data types. How do they compare to java.lang.String ? Has anybody benchmarked them ? If the application uses multithreading (which it does)are they a safe alternative ? ",[],<java><string><optimization><heap-memory><visualvm>,26296967,"What I do is is have one or more String pools.  I do this to a) not create new Strings if I have one in the pool and b) reduce the retained memory size, sometimes by a factor of 3-5. You can write a simple string interner yourself but I suggest you consider how the data is read in first to determine the optimal solution.  This matters as you can easily make matters worse if you don't have an efficient solution.As EJP points out processing a line at a time is more efficient, as is parsing each line as you read it. i.e. an int or double takes up far less space than the same String (unless you have a very high rate of duplication)Here is an example of a StringInterner which takes a StringBuilder to avoid creating objects needlessly.  You first populate a recycled StringBuilder with the text and if a String matching that text is in the interner, that String is returned (or a toString() of the StringBuilder is.) The benefit is that you only create objects (and no more than needed) when you see a new String (or at least one not in the array) This can get a 80% to 99% hit rate and reduce memory consumption (and garbage) dramatically when loading many strings of data.--CODE--This class is interesting in that it is not thread safe in the tradition sense, but will work correctly when used concurrently, in fact might work more efficiently when multiple threads have different views of the contents of the array.","[""public class StringInterner {    @NotNull    private final String[] interner;    private final int mask;    public StringInterner(int capacity) {        int n = nextPower2(capacity, 128);        interner = new String[n];        mask = n - 1;    }    @Override    @NotNull    public String intern(@NotNull CharSequence cs) {        long hash = 0;        for (int i = 0; i < cs.length(); i++)            hash = 57 * hash + cs.charAt(i);        int h = hash(hash) &amp; mask;        String s = interner[h];        if (isEqual(s, cs))            return s;        String s2 = cs.toString();        return interner[h] = s2;    }    static boolean isEqual(@Nullable CharSequence s, @NotNull CharSequence cs) {        if (s == null) return false;        if (s.length() != cs.length()) return false;        for (int i = 0; i < cs.length(); i++)            if (s.charAt(i) != cs.charAt(i))                return false;        return true;    }    static int nextPower2(int n, int min) {        if (n < min) return min;        if ((n &amp; (n - 1)) == 0) return n;        int i = min;        while (i < n) {            i *= 2;            if (i <= 0) return 1 << 30;        }        return i;    }    static int hash(long n) {        n ^= (n >> 43) ^ (n >> 21);        n ^= (n >> 15) ^ (n >> 7);        return (int) n;    }}""]",Fundamental Programming Structures in Java,"{""Strings"": 0.8}"
51297382,,arraylist of character arrays java,I originally have an arraylist of strings but I want to save it as an arraylist of those strings.toCharArray() instead. Is it possible to make an arraylist that stores char arrays? Here is how I tried to implement it.--CODE--,"[""String[] words = new String[]{\""peter\"",\""month\"",\""tweet\"", \""pete\"", \""twee\"", \""pet\"", \""et\""};    HashMap<Integer,ArrayList<Character[]>> ordered = new HashMap<>();    int length = 0;    int max = 0; //max Length of words left    for(String word: words){        if(ordered.containsKey(length) == false){ //if int length key doesnt exist yet             ordered.put(length, new ArrayList<Character[]>()); //put key in hashmap with value of arraylist with the one value             ordered.get(length).add(word.toCharArray());        }    }""]",<java><arrays><string><arraylist><char>,51297427,"Note that toCharArray() returns an array of primitives (char[]), and not an array of the boxing class (Character[] as you currently have). Additionally, you're only adding the given array to the map if the length of the array isn't in the map, which probably isn't the behavior you wanted (i.e., you should move the line ordered.get(length).add(word.toCharArray()); outside the if statement).Also, note that Java 8's streams can do a lot of the heavy lifting for you:--CODE--EDIT:As per the question in the comment, this is also entirely possible in Java 7 without streams:--CODE--","[""String[] words = new String[]{\""peter\"",\""month\"",\""tweet\"", \""pete\"", \""twee\"", \""pet\"", \""et\""};Map<Integer, List<char[]>> ordered =    Arrays.stream(word)          .map(String::toCharArray)          .collect(Collectors.groupingBy(x -> x.length));"", ""String[] words = new String[]{\""peter\"",\""month\"",\""tweet\"", \""pete\"", \""twee\"", \""pet\"", \""et\""};Map<Integer, List<char[]>> ordered = new HashMap<>();for (String word: words) {    int length = words.length();    // if int length key doesnt exist in the map already    List<char[]> list = orderd.get(length);    if (list == null) {        list = new ArrayList<>();        orderd.put(length, list);    }    list.add(word);}""]",Collections,"{""Concrete Collections"": 0.8, ""Maps"": 0.8}"
40956750,,JList never get updated,"After the user buy something from the machine, the machine should update the quantity. How do I update the quantity?The loop works fine and in debug mode, it shows i and newQty value. This code in GUI class. --CODE--In actionPerformed() I have this code. --CODE--Here some pics. So, you can see what's going on with (quantity)A1: Coke - 1.25(1) should be A1: Coke - 1.25 (0)[](""https://i.stack.imgur.com/Rl1Es.png"")After buying it.[](""https://i.stack.imgur.com/h5v2n.png"")[](""https://i.stack.imgur.com/MCch8.png"")","[""char letter = 'A';        for (int i = 0; i < stock.length;) {            for (int j = 1; j < 7 &amp;&amp; i < stock.length; j++) {                stock[i].setId(letter + \""\"" + j);                i++;            }            letter++;        }    for (int i = 0; i < stock.length; ++i) {   listModel.addElement(stock[i].getId() + \"": \"" + stock[i].getDescription()   + \"" - \"" + stock[i].getPrice() + \""(\"" + stock[i].getQuantity() + \"")\"");        }        listOfItem.setModel(listModel);"", ""if (e.getActionCommand().equals(\""Vend!\"")) {        for (int i = 0; i < stock.length; ++i) {            if (userSelection.equals(stock[i].getId())) {                if (userBalance < stock[i].getPrice()) {         JOptionPane.showMessageDialog(null, \""You do not have enough money. \""        + \""Please add more money or select a different item.\"");            }                else if (stock[i].getQuantity() == 0) {    JOptionPane.showMessageDialog(null, \""Sorry, we are out of this item.\"");                }        else {            int newQty = stock[i].getQuantity() - 1;            stock[i].setQuantity(newQty);            userBalance -= stock[i].getPrice();            MoneyRemainingText.setText(String.valueOf(userBalance));            JOptionPane.showMessageDialog(null, \""You bought \"" + stock[i].getDescription() + \"" for $\""                    + stock[i].getPrice() + \"". Your change is $\"" + userBalance);            vendingMachine.setVisible(false);            selectTextField.setText(\""\"");            --userBalance;            setSelection();        }    }        }    }""]",<java><swing>,40957182,"Using a list here is a mistake.List is smething that u append a price and it is added on the stack.However If you want to save the day try --CODE--The only obligation you have here is to get the index(line number you want to edit).PS:I would need more code , to debbug.","[""model.setElementAt(\""Your new text\"", index);""]",User Interface Components with Swing,"{""Choice Components"": 0.8}"
21570278,,How do I show only the first letters of a string?,I'm prompting the user to enter their first and last name but I can't figure out how to show just their first and last initials--CODE--,"[""import javax.swing.*;//import java.awt.*;public class Lab2Program2 {    public static void main (String [] args) {    String firstName;    String lastName;    firstName = JOptionPane.showInputDialog(null, \""What is your first name?\"");    lastName = JOptionPane.showInputDialog(null, \""What is your last name?\"");    JOptionPane.showMessageDialog(null, \"" Your initials are \"" +                             firstName + \"" \"" + lastName);    }}""]",<java><string><substring><joptionpane>,21570347,"If you want to show a message box like you were doing before, this should work:--CODE--","[""JOptionPane.showMessageDialog(null,     \""Your initials are \"" + firstName.substring(0, 1) + \"" \"" + lastName.substring(0, 1));""]",Fundamental Programming Structures in Java,"{""Strings"": 1.0}"
11905263,,Aligning Decimal when convert int to string,I understand that in Java you can use printf such as--CODE--But if say you have--CODE--and you want to convert it to String with the decimal alignment. So you will have--CODE--Is there any way to do this other than having a bunch of if statment to check the length?,"[""System.out.printf(\""check1 =  \"" + \""%11.5f  percent\\n\"", 2.0564);System.out.printf(\""cat =     \"" + \""%11.5f  percent\\n\"", 1232.05);"", ""int temp1 = 1.02int temp2 = 12345.01234"", ""a = \""DMC       1.02    percent\""b = \""POLY  12345.01234 percent\""""]",<java><string><alignment><int><decimal>,11905379,Use:--CODE--It produces:--CODE--You may need to increase the value of %-15s to correctly fit very large numbers.,"[""String.format(\""%-15s%11.5f percent\"", \""DMC\"", 1.02);String.format(\""%-15s%11.5f percent\"", \""POLY\"", 12345.01234);"", ""DMC           1.02000 percentPOLY      12345.01234 percent""]",Fundamental Programming Structures in Java,"{""Strings"": 1.0, ""Data Types"": 0.8}"
9329375,,String mismatch by single letter,I want to find out wheather a string has single mismatch. --CODE--In case 1 both string length is same but it has 1 character mismatchIn case 2 both string length differ by 1 and any one character can be mismatched in both String.,"[""1)CHARACTER INTERCHANGE W/O DISTURBING PATTERNACRPG0182F v/s ACRPG0812FACNPA4428K v/s ACHPA4428K2)CHARACTER LENGTH DIFFERS BY 1 DIGITACRPG0182F v/s ACRPG0812ACRPG0182F v/s CRPG0812F""]",<java><string>,9329434,"get the number using regex (\d+)fill a Set with all characters (numberStr.toCharArray())use [guava](""http://code.google.com/p/guava-libraries/"") Sets - Sets.difference(set1, set2) and see if it has exactly one elementOriginally I thought you need to check the difference in a different way: whether only one digit is different, rather than ""the string contains only one different digit, regardless of the order"". If order is also important, just calculate the [levenshtein distance](""http://en.wikipedia.org/wiki/Levenshtein_distance"") and see if it's equal to 1.StringUtils.getLevenshteinDistance(s1, s2) from [commons-lang](""http://commons.apache.org/lang/"") will do it.",[],Fundamental Programming Structures in Java,"{""Strings"": 1.0}"
11681711,11682571,Set column indexes after moving a column in JTable,"I'm using a JTable, and I need to allow moving of its columns. But there comes the problem. Once they have rearranged, it's like just they have changed there content and title only. But I also need their indexes to be changed as well.To make this more clear, I'll give an example. Let's say my first column is called ""names"". When calling the 'setName()' method, a name must always go to that column, no matter where the column is. But not to the first column..Hope you got my point!I've finished writing required methods. Hope there is a way to achieve this without touching the finished methods. Any help is much appreciated!!!",[],<java><swing><jtable>,11682571,"  To make this more clear, I'll give an example. Let's say my first column is called ""names"". When calling the 'setName()' method, a name must always go to that column, no matter where the column is. But not to the first column..Hope you got my point!If you want to change the data, simply alter the underlying TableModel directly. The order of the columns never changes in the TableModel, it is only in the view (the JTable) that those columns are re-ordered.If you do want to go through the table, you will have to convert from 'view-coordinates' to 'model-coordinates' by using the available JTable#convertColumnIndexToModel (view -> model) and the JTable#convertColumnIndexToView (model->view) methods as @MadProgrammer mentioned.You should certainly not update the setValueAt method of the TableModel as you mentioned in one of your comments. As said before, the TableModel does not change the order of the columns, so the setValueAt should always be called with 'model coordinates', hence there is no need to transform those",[],User Interface Components with Swing,"{""Choice Components"": 0.8}"
10612436,10612728,Unable to execute all statements in code block using threading,I am trying to read a number of files in a folder and process them simultaneously using threads. The structure of the program is like this :--CODE--The call method here creates another object and calls a method on it. But oddly enough the program terminates after executing some lines in the call method(it does not reach the final statement in it). I am confused here. Can someone throw some light on what is happening. Please help me,"[""// Assuming there are 5 files in the directory// creating the threadsExecutorService pool = Executors.newFixedThreadPool(5)ExecutorCompletionService service = new ExecutorCompletionService(pool)directory.listFiles().each { eachFile ->   service.submit(new FileReader(eachFile, param2))}// the FileReader classclass FileReader implements Callable {    File file    String param    FileReader(File file, String param){        this.file = file        this.param = param    }   Object call(){      LOG.info(\""Processing file\"" + filePath)      ConfigInfo configInfo = new ConfigInfo()  configInfo.setFilePath(filePath);  configInfo.setReaderUid(readerUid);  configInfo.setPatternsMap(patternsMap);  new LogfileDataProcessor(configObject, param).processFileContent()   }}""]",<java><multithreading><groovy>,10612728,You need your program wait for thread to be finished. You can use CountDounLatch for example for this:--CODE--You can pass latch into thread as constructor arguments.,"[""CountDownLatch latch = new CountDownLatch(numberOfFilesInDirectory);directory.listFiles().each { eachFile ->   service.submit(new FileReader(eachFile, param2))}latch.await();// And in your Callable:class FileReader implements Callable {File fileString paramFileReader(File file, String param){    this.file = file    this.param = param}public Object call() {    try {    LOG.info(\""Processing file\"" + filePath)    ConfigInfo configInfo = new ConfigInfo()    configInfo.setFilePath(filePath);    configInfo.setReaderUid(readerUid);    configInfo.setPatternsMap(patternsMap);    new LogfileDataProcessor(configObject, param).processFileContent();    } finally {        latch .countDown();    }}""]",Concurrency,"{""Tasks and Thread Pools"": 0.8, ""Thread States"": 0.8}"
8177602,,Threading java - two simultaneous work pools,"I have a situation as follows:A SimpleAsyncTaskExecutor is working on a work list where it does some work (usually with concurrent parameter set to 2 or 3). Now everytime a thread dispatched from SimpleAsyncTaskExecutor FINISHES, I want it to add an item (not actually produced/evaluated by the task) to a work pool. This work pool is then worked on by a second SimpleAsyncTaskExecutor and is worked on. A producer/consumer problem.Easiest approach?",[],<java><multithreading><producer-consumer>,8178412,Have you looked at BlockingQueue.  Sounds like you need a queue between the two.,[],Concurrency,"{""Synchronization"": 0.8}"
13963241,,Convert Document (XML) directly to String in java without using transform or XMLSerializer,Is there another way to convert XML Document object to String just like using transform or XmlSerializer from Apache API? I don't want to use mentioned conversion methods because it renders my output xml modifying tags representation ( like collapsing the empty tags to singleton tags). I want conversion method that output in String from the Document object (kind of treating content of Document object as text).,[],<java><xml><string><domdocument>,13963315,"You could do worse than SAX, by extending [DefaultHandler2](""http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/ext/DefaultHandler2.html"") or [DefaultHandler](""http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/helpers/DefaultHandler.html""):--CODE--","[""class Parser extends DefaultHandler {     StringBuffer sb = new StringBuffer();    public void characters(char[] ch, int start, int length) {        sb.append(new String(ch, start, length);    }    public void startElement(String ns, String qname, String name, Attributes attrs) {        sb.append(qname+\"": \"");    }    public void endElement(String ns, String qname, String name) {        sb.append(\""\\n\"");    }    public String toString() {        return sb.toString();    }}""]",Fundamental Programming Structures in Java,"{""Arrays"": 0.8}"
24550072,24550250,Problems with getting number of chars in a file,I don't understand why the first variant is working and the second is not.--CODE--,"[""BufferedReader reader = new BufferedReader(new InputStreamReader(in, charsetName));try {                char[] buffer = new char[4096];    reader.read(buffer, 0, 4096);    return new String(buffer);} finally {    reader.close();}BufferedReader reader = new BufferedReader(new InputStreamReader(in, charsetName));try {    int size = 0;    int ch=0;    while ((ch=reader.read())!=-1){        size++;    }    char[] buffer = new char[size];    reader.read(buffer, 0, size);    return new String(buffer);} finally {    reader.close();}""]",<java><file>,24550250,"BufferedReader  use a sort of pointer in the file to locate the position from where he should read , this pointer change whenever we call read(*) method. so in your case the second want will read nothing because the pointer has reach the end of the file.",[],Fundamental Programming Structures in Java,"{""Input and Output"": 0.8}"
17249304,,Set JMenu Direction RTL,I have a jMenuBar1 and there are two jMenu items (say jMenu1 and jMenu2) added to the jMenuBar1.I managed to align the jMenuBar1 object with this line of code :--CODE--Now I am trying to align the text in jMenu Items to right and making the text RTL(Right to Left) but nothing seems to work.I have already tried --CODE--and no luck.any solution will be highly appreciated. ,"[""jMenuBar1.add(Box.createHorizontalGlue());    "", ""Menu1.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);jMenu1.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);""]",<java><swing><right-to-left><jmenu>,17250860,You might need to give us more information maybe some screen shots of what you have and what you are trying to achieve as menu.setComponentOrientation() seems to work fine for me...I get thisrunning this--CODE--,"[""import javax.swing.*;import java.awt.*;public class MenuTest extends JFrame{    public static void display()    {        JFrame frame = new JFrame();        frame.setSize(400,400);        frame.setLayout(new GridLayout(6,1));        JMenuBar menuBar = new JMenuBar();        menuBar.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);        JMenu jMenu1 = new JMenu(\""Menu1\"");        jMenu1.setMinimumSize(new Dimension(200, 20));        jMenu1.setMaximumSize(new Dimension(200, 20));        jMenu1.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);        JMenu jMenu2 = new JMenu(\""Menu2\"");        jMenu2.setMinimumSize(new Dimension(200, 20));        jMenu2.setMaximumSize(new Dimension(200, 20));        JMenuItem menuItem1 = new JMenuItem(\""Item1\"");        JMenuItem menuItem2 = new JMenuItem(\""Item2\"");        menuItem1.setMinimumSize(new Dimension(200, 20));        menuItem1.setMaximumSize(new Dimension(200, 20));        menuItem1.setPreferredSize(new Dimension(200, 20));        menuItem1.setSize(new Dimension(200, 20));        menuItem2.setMinimumSize(new Dimension(200, 20));        menuItem2.setMaximumSize(new Dimension(200, 20));        menuItem1.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);        menuItem2.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);        jMenu1.setHorizontalAlignment(JMenu.TRAILING);        jMenu1.add(menuItem1);        jMenu1.add(menuItem2);        menuBar.add(jMenu1);        menuBar.add(jMenu2);        menuBar.setSize(frame.getWidth(), 20);        frame.add(menuBar);        frame.setVisible(true);    }    public static void main(String[] args)    {        EventQueue.invokeLater(                new Runnable() {                    @Override                    public void run() {                        MenuTest.display();                    }                }         );    }}""]",User Interface Components with Swing,"{""Menus"": 0.9}"
36442880,,"In Java, how can I convert a string to a double (not Double)?","It's part of a school lab and I've researched and I can't find anything to accomplish this task. I'm reading in lines from a file using FileReader and BufferedReader. The data in the file is a name and an age in the following format:John doe 20 Jane doe 30etc. I already have code that will take each line and split as such:split[0] = {""John"", ""doe"", ""20""}I need to get the ""20"" and store in an array of doubles such as double[0] = 20;The reason it has to be a double and not Double is because that part of the code in the assignment is already written and I'm sure I cannot just decide to change everything and use a Double instead. How can I do this? Thank you in advance!",[],<java><string><double>,36442975,"Use [Double#parseDouble](""https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29"").As you can see the static method returns a primitive double and not an object Double:--CODE----CODE--","[""public static double parseDouble(String s)"", ""public static void main(String[] args) {    String strNumber = \""20\"";    double myParsedDouble = Double.parseDouble(strNumber);    System.out.println(myParsedDouble);}""]",Fundamental Programming Structures in Java,"{""Data Types"": 0.75, ""Strings"": 0.8}"
3420311,3420431,Java Swing button colors,I am using NET Beans IDE for developing my application in LINUX. I have used synthetica package to generate new look and feel. All is well till now.Now my next stage is to add colors to buttons when some database status changes.For example:In a restaurant i have 2 tables and when 8 people came in to dine and i will create 2 table in my software  since the people are unattended i want the buttons to those 2 tables to be green. When the order is processed for any of those tables the button color of the processed table should be changed to orange. When it is under processing it should be flashing color. How to do this in java ? I will take care of database update i just want to know how to change the colors of the buttons and adding flashing technique.,[],<java><swing><netbeans>,3420431,"Here is a [ related to flashing a component.Addendum: You can learn more in the article How to Use Buttons](""https://stackoverflow.com/questions/2123841"">). In particular, you can use setForeground() to change the color of a button's text, but the corresponding setBackground() doesn't read well on some platforms. Using a [Border](""http://download.oracle.com/javase/tutorial/uiswing/components/border.html"") is one alternative; a colored panel, shown below, is another.--CODE--","[""package overflow;import java.awt.Color;import java.awt.EventQueue;import java.awt.GridLayout;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.util.ArrayList;import java.util.List;import java.util.Random;import javax.swing.JButton;import javax.swing.JFrame;import javax.swing.JPanel;import javax.swing.Timer;public class ButtonTest extends JPanel implements ActionListener {    private static final int N = 4;    private static final Random rnd = new Random();    private final Timer timer = new Timer(1000, this);    private final List<ButtonPanel> panels = new ArrayList<ButtonPanel>();    public ButtonTest() {        this.setLayout(new GridLayout(N, N, N, N));        for (int i = 0; i < N * N; i++) {            ButtonPanel bp = new ButtonPanel(i);            panels.add(bp);            this.add(bp);        }    }    @Override    public void actionPerformed(ActionEvent e) {        for (JPanel p : panels) {            p.setBackground(new Color(rnd.nextInt()));        }    }    private static class ButtonPanel extends JPanel {        public ButtonPanel(int i) {            this.setBackground(new Color(rnd.nextInt()));            this.add(new JButton(\""Button \"" + String.valueOf(i)));        }    }    public static void main(String[] args) {        EventQueue.invokeLater(new Runnable() {            @Override            public void run() {                JFrame f = new JFrame(\""ButtonTest\"");                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                ButtonTest bt = new ButtonTest();                f.add(bt);                f.pack();                f.setLocationRelativeTo(null);                f.setVisible(true);                bt.timer.start();            }        });    }}""]",User Interface Components with Swing,"{""Choice Components"": 0.85}"
11827326,11837558,SwingPropertyChangeSupport to dynamically update JTextArea,"I'm trying to build upon the answer to a question regarding SwingPropertyChangeSupportI am attempting to modify the code given here in an answer by the very helpful, Hovercraft Full Of Eels: WindowListener does not work as expected, to allow a displayed array to be updated when changes are entered via an input dialog.The array is updated OK but not refreshed in the GUI. I was hoping someone might be able to tell me where I've gone wrong.here is the code:--CODE---EDIT-Hopefully removed compilation errors.","[""import java.awt.BorderLayout;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.FocusListener;import java.beans.PropertyChangeEvent;import java.beans.PropertyChangeListener;import javax.swing.JButton;import javax.swing.JFrame;import javax.swing.JOptionPane;import javax.swing.JPanel;import javax.swing.JTextArea;import javax.swing.event.SwingPropertyChangeSupport;public class Main {public static void main(String[] arg) {    GuiForUpdate display = new GuiForUpdate();    display.setVisible(true);}}class GuiForUpdate extends JFrame implements ActionListener {/** *  */private static final long serialVersionUID = 1L;private FocusListener focusListener;private String mList;private JButton changeArrayButton;private JTextArea codeIn, displayOutput;private int arrayIndex;private JPanel displayPanel;private ArrayForUpdating arrayForUpdate = new ArrayForUpdating();public GuiForUpdate() {    setSize(224, 180);    layoutLeft();    layoutDisplay();    layoutBottom();}/** * adds a display area for array */public void layoutDisplay() {    displayPanel = new JPanel();    add(displayPanel, BorderLayout.CENTER);    displayOutput = new JTextArea();    displayPanel.add(displayOutput);    displayOutput.addFocusListener(focusListener);    mList = arrayForUpdate.getBoundProperty();    arrayForUpdate.addPropertyChangeListener(new PropertyChangeListener() {        @Override        public void propertyChange(PropertyChangeEvent pcEvt) {            if (pcEvt.getPropertyName().equals(                    ArrayForUpdating.BOUND_PROPERTY)) {                mList = (pcEvt.getNewValue().toString());            }        }    });    displayOutput.setText(mList);}/** * adds left hand side elements to left of GUI */public void layoutLeft() {    JPanel left = new JPanel();    add(left, BorderLayout.WEST);    codeIn = new JTextArea(2, 2);    left.add(codeIn);    codeIn.addFocusListener(focusListener);}/** * adds bottom elements to bottom of GUI */public void layoutBottom() {    JPanel bottom = new JPanel();    changeArrayButton = new JButton(\""Modify array\"");    changeArrayButton.addActionListener(this);    bottom.add(changeArrayButton);    add(bottom, BorderLayout.SOUTH);}/** * Process button clicks */public void actionPerformed(ActionEvent ae) {    if (ae.getSource() == changeArrayButton) {        // first check if any code entered        if (codeIn.getText().trim().length() != 0) {            // call modifyMemory() method            modifyArray();        } else            JOptionPane.showMessageDialog(null,                    \""Please enter something first.\"");    }}/** * method to process modify array */public void modifyArray() {    // show dialog to retrieve entered address    String addressToModify = (String) JOptionPane            .showInputDialog(\""At which location?\"");    // confirm if a string was entered    if ((addressToModify != null) &amp;&amp; (addressToModify.length() > 0)) {        // convert to integer if decimal address entered        arrayIndex = Integer.parseInt(addressToModify);    }    // pass as integer    processInput(arrayIndex);}public void processInput(int a) {    String newValue = codeIn.getText();    arrayForUpdate.instructionsIn(newValue, a);}}class ArrayForUpdating {public static final String BOUND_PROPERTY = \""bound property\"";private String boundProperty = \""\"";private SwingPropertyChangeSupport spcSupport = new SwingPropertyChangeSupport(        this);private StringBuilder mList;private int[] myArray;public ArrayForUpdating() {    myArray = new int[5];    for (int i = 0; i < myArray.length; i++) {        myArray[i] = 0;    }    setArrayyDisplayString();}/**  * method to create formatted string of array */public void setArrayyDisplayString() {    // create StringBuilder for display in memory tab    mList = new StringBuilder();    for (int i = 0; i < myArray.length; i++) {        mList.append(String.format(\""%10s %02d %10s %02d\"", \""Pos:   \"", i,                \""Value:  \"", myArray[i]));        mList.append(\""\\n\"");    }    setBoundProperty(mList.toString());}/** * This method takes in a string passed through from the GUI */public void instructionsIn(String codeIn, int loc) {    String code = codeIn.trim();    int oc = Integer.parseInt(code);    // add the data to the array    setArrayData(loc, oc);    loc++;}/**    * method to add data to the array */public void setArrayData(int a, int memData) {    myArray[a] = memData;    // print array to console for checking    for (int i = 0; i < myArray.length; i++) {        System.out.println(\""location: \"" + i + \"" value: \"" + myArray[i]);    }    setArrayyDisplayString();}public SwingPropertyChangeSupport getSpcSupport() {    return spcSupport;}public void setSpcSupport(SwingPropertyChangeSupport spcSupport) {    this.spcSupport = spcSupport;}public String getBoundProperty() {    return boundProperty;}public void setBoundProperty(String boundProperty) {        String oldValue = this.boundProperty;        System.out.println(\""old = \"" + oldValue);        String newValue = boundProperty;        System.out.println(\""new = \"" + newValue);        this.boundProperty = newValue;        spcSupport.firePropertyChange(BOUND_PROPERTY, oldValue, newValue);    }    public void addPropertyChangeListener(PropertyChangeListener listener) {    spcSupport.addPropertyChangeListener(listener);    }}""]",<java><arrays><swing><refresh>,11837558,"When I put displayOutput.setText(mList) within the propertyChange method, it worked:--CODE--Thank you to everyone for your help and especially your patience. ","[""@Overridepublic void propertyChange(PropertyChangeEvent pcEvt) {    if (pcEvt.getPropertyName().equals(        ArrayForUpdating.BOUND_PROPERTY)) {        mList = (pcEvt.getNewValue().toString());        displayOutput.setText(mList);    }}""]",User Interface Components with Swing,"{""Text Input"": 0.9}"
34814840,,how to peek password while typing in JPasswordField,"I want to create a JPasswordField where I can see the characters while typing,I tried passtxt.setEchoChar((char) 0); but it completely change the '*' to textI don't want this,I want to view text while typing character by character ( as we see in mobile browsers)thanks--CODE--","[""import java.awt.BorderLayout;import java.awt.Checkbox;import java.awt.event.ItemEvent;import java.awt.event.ItemListener;import javax.swing.Box;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.JPanel;import javax.swing.JPasswordField;import javax.swing.JTextField;public class Main {  public static void main(String args[]) {    JFrame f = new JFrame(\""JPasswordField  \"");    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);    JPanel p=new JPanel();    p.add(new JLabel(\""Username\""));    p.add(new JTextField(20));     p.add(new JLabel(\""Password\""));    JPasswordField jpassword = new JPasswordField(20);    p.add(jpassword);    Checkbox c=new Checkbox(\""type password and click\"");    c.addItemListener(new ItemListener() {        public void itemStateChanged(ItemEvent e) {            if (e.getStateChange() == ItemEvent.SELECTED) {                jpassword.setEchoChar('*');            } else {                jpassword.setEchoChar((char) 0);            }        }    });    jpassword.setEchoChar((char)0);     p.add(c);    f.add(p);    f.setSize(300, 200);    f.setVisible(true);  }}""]",<java><swing><jpasswordfield>,34815991,"This is an easy solution. Use a JTextField instead of JPasswordField and a String member to store the real password seperately:--CODE--implement a java.awt.event.KeyListener, and overwrite keyReleased like this:--CODE--Add the Listener to the text field and you're done.This will overwrite all but the last character typed in with a * any time a new letter or digit is typed.","[""private JTextField textField = new JTextField();private String password = \""\"";"", ""public void keyReleased(KeyEvent e) {    if (Character.isLetter(e.getKeyChar()) ||         Character.isDigit(e.getKeyChar())) { //Add other valid characters as needed        //Get text and last typed character        String text = textField.getText();        char typed = text.charAt(text.length()-1);        //store typed letter separately for later use        password += (text.length() > 0) ? typed : \""\"";        StringBuilder sb = new StringBuilder();        for (int c=0; c<text.length()-1; c++) {            sb.append(\""*\"");        }        sb.append(typed);        //set password with asterisks, for authentication use member: password        textField.setText(sb.toString());}""]",User Interface Components with Swing,"{""Text Input"": 0.9}"
2738608,,Progress bar in Java,I have got a form in Java (Swing) loading large amount of data from the database. I want to display a progress bar while the program gets actually loaded.How can i do it? The code is as follows:--CODE--,"[""import java.awt.*;import javax.swing.*;import java.awt.event.*;import java.sql.*;import java.applet.*;import java.util.*;import java.awt.Color;public class bookshow extends JFrame implements MouseListener, ActionListener {    JPanel p1, p2, p3;    JLabel l1, l2, l3, l4;    ImageIcon image;    JButton b[] = new JButton[84];    JButton btnocc, btnbook, btnsel;    ResultSet rs;    private JMenuBar menuBar = new JMenuBar();    private JMenuItem exit, home, save;    private JMenu fileMenu, gotoMenu;    public int cnt = 0, x = 150, y = 90, i, j, put = 0, k = 0, avail = 1, point, x1, y1, count = 0, quan;    public static int prev_click = -1, xpos, ypos;    public static int prev[] = new int[5];    public static int pos[][] = new int[5][2];    public String movname, movdate, movtime;    public bookshow() {        avail = 1;        try {            String sql = \""Select * from Pass\"";            String url = \""jdbc:odbc:tbs\"";            Connection con = DriverManager.getConnection(url);            Statement s = con.createStatement();            rs = s.executeQuery(sql);            while (rs.next()) {                movname = rs.getString(\""movname\"");                movdate = rs.getString(\""movdate\"");                movtime = rs.getString(\""movtime\"");                quan = Integer.parseInt(rs.getString(\""Quantity\""));            }        } catch (Exception ex) {            System.out.println(ex);        }        try {            String sql = \""Delete from Pass\"";            String url = \""jdbc:odbc:tbs\"";            Connection con = DriverManager.getConnection(url);            Statement s = con.createStatement();            s.executeUpdate(sql);            con.close();        } catch (Exception ex) {            System.out.println(ex);        }        setTitle(\""Select Ticket\"");        setDefaultCloseOperation(EXIT_ON_CLOSE);        p1 = new JPanel();        getContentPane().add(p1);        p1.setLayout(null);        p1.setBackground(Color.white);        setJMenuBar(menuBar);        fileMenu = new JMenu(\""File\"");        menuBar.add(fileMenu);        exit = new JMenuItem(\""Exit\"");        exit.addActionListener(this);        fileMenu.add(exit);        exit.setAccelerator(KeyStroke.getKeyStroke('E', Event.CTRL_MASK));        save = new JMenuItem(\""Save\"");        save.addActionListener(this);        fileMenu.add(save);        save.setAccelerator(KeyStroke.getKeyStroke('S', Event.CTRL_MASK));        gotoMenu = new JMenu(\""Go To\"");        menuBar.add(gotoMenu);        home = new JMenuItem(\""Home\"");        //exit.addActionListener(this);        gotoMenu.add(home);        home.setAccelerator(KeyStroke.getKeyStroke('H', Event.CTRL_MASK));        p2 = new JPanel();        p2.setLayout(null);        p2.setBackground(Color.lightGray);        p2.setBounds(100, 50, 500, 20);        p1.add(p2);        l1 = new JLabel(\""GOLD\"");        l1.setBounds(240, 0, 100, 20);        p2.add(l1);        l1.setBackground(Color.red);        try {            String sql = \""Select * from Book\"";            String url = \""jdbc:odbc:tbs\"";            Connection con = DriverManager.getConnection(url);            Statement s = con.createStatement();            rs = s.executeQuery(sql);            while (rs.next()) {                String getname = rs.getString(\""MovName\"");                String getdate = rs.getString(\""MovDate\"");                String gettime = rs.getString(\""MovTime\"");                if (movname.equalsIgnoreCase(getname) &amp;&amp; movdate.equals(getdate) &amp;&amp; movtime.equals(gettime)) {                    put = 1;                    break;                }            }        } catch (Exception ex) {            System.out.println(ex);        }        for (i = 1; i <= 4; i++) {            for (j = 1; j <= 14; j++) {                point = 0;                b[cnt] = new JButton();                b[cnt].setBounds(x, y, 20, 20);                b[cnt].setBackground(Color.white);                p1.add(b[cnt]);                if (put == 0) {                    try {                        String sql = \""Insert into Book values('\"" + movname + \""','\"" + movtime + \""','\"" + movdate + \""',\"" + x + \"",\"" + y + \"",1)\"";                        String url = \""jdbc:odbc:tbs\"";                        Connection con = DriverManager.getConnection(url);                        Statement s = con.createStatement();                        s.executeUpdate(sql);                        con.close();                    } catch (Exception ex) {                        System.out.println(ex);                    }                } else {                    try {                        String sql = \""Select * from Book\"";                        String url = \""jdbc:odbc:tbs\"";                        Connection con = DriverManager.getConnection(url);                        Statement s = con.createStatement();                        rs = s.executeQuery(sql);                        while (rs.next()) {                            String getname = rs.getString(\""MovName\"");                            String getdate = rs.getString(\""MovDate\"");                            String gettime = rs.getString(\""MovTime\"");                            avail = Integer.parseInt(rs.getString(\""Avail\""));                            if (movname.equalsIgnoreCase(getname) &amp;&amp; movdate.equals(getdate) &amp;&amp; movtime.equals(gettime)) {                                k++;                                if (avail == 0 &amp;&amp; k == (cnt + 1)) {                                    b[cnt].setBackground(Color.red);                                    point = 1;                                    b[cnt].setEnabled(false);                                }                            }                        }                    } catch (Exception ex) {                        System.out.println(ex);                    }                }                if (point == 0) {                    b[cnt].addMouseListener(this);                }                cnt++;                x = x + 30;                k = 0;            }            x = 150;            y = y + 40;        }        y = 300;        x = 150;        p3 = new JPanel();        p3.setLayout(null);        p3.setBackground(Color.lightGray);        p3.setBounds(100, 260, 500, 20);        p1.add(p3);        l2 = new JLabel(\""ECONOMY\"");        l2.setBounds(220, 0, 100, 20);        p3.add(l2);        l2.setBackground(Color.red);        for (i = 1; i <= 2; i++) {            for (j = 1; j <= 14; j++) {                point = 0;                b[cnt] = new JButton();                b[cnt].setBounds(x, y, 20, 20);                b[cnt].setBackground(Color.white);                p1.add(b[cnt]);                if (put == 0) {                    try {                        String sql = \""Insert into Book values('\"" + movname + \""','\"" + movtime + \""','\"" + movdate + \""',\"" + x + \"",\"" + y + \"",1)\"";                        String url = \""jdbc:odbc:tbs\"";                        Connection con = DriverManager.getConnection(url);                        Statement s = con.createStatement();                        s.executeUpdate(sql);                        con.close();                    } catch (Exception ex) {                        System.out.println(ex);                    }                } else {                    try {                        String sql = \""Select * from Book\"";                        String url = \""jdbc:odbc:tbs\"";                        Connection con = DriverManager.getConnection(url);                        Statement s = con.createStatement();                        rs = s.executeQuery(sql);                        while (rs.next()) {                            String getname = rs.getString(\""MovName\"");                            String getdate = rs.getString(\""MovDate\"");                            String gettime = rs.getString(\""MovTime\"");                            avail = Integer.parseInt(rs.getString(\""Avail\""));                            if (movname.equalsIgnoreCase(getname) &amp;&amp; movdate.equals(getdate) &amp;&amp; movtime.equals(gettime)) {                                k++;                                if (avail == 0 &amp;&amp; k == (cnt + 1)) {                                    b[cnt].setBackground(Color.red);                                    point = 1;                                    b[cnt].setEnabled(false);                                }                            }                        }                    } catch (Exception ex) {                        System.out.println(ex);                    }                }                if (point == 0) {                    b[cnt].addMouseListener(this);                }                cnt++;                x = x + 30;                k = 0;            }            x = 150;            y = y + 40;        }        image = new ImageIcon(\""screen.jpg\"");        l3 = new JLabel(image);        l3.setBounds(70, y + 20, 600, 54);        p1.add(l3);        l4 = new JLabel(\""Seat to Occupy\"");        l4.setBounds(140, 490, 100, 15);        p1.add(l4);        btnocc = new JButton();        btnocc.setBounds(260, 490, 15, 15);        btnocc.setBackground(Color.white);        p1.add(btnocc);        l4 = new JLabel(\""Booked seat\"");        l4.setBounds(320, 490, 80, 15);        p1.add(l4);        btnbook = new JButton();        btnbook.setBounds(410, 490, 15, 15);        btnbook.setBackground(Color.red);        p1.add(btnbook);        l4 = new JLabel(\""Current selection\"");        l4.setBounds(460, 490, 100, 15);        p1.add(l4);        btnsel = new JButton();        btnsel.setBounds(570, 490, 15, 15);        btnsel.setBackground(Color.green);        p1.add(btnsel);        setSize(770, 650);        setVisible(true);    }    public void mousePressed(MouseEvent e) {    }    public void mouseReleased(MouseEvent e) {    }    public void mouseEntered(MouseEvent e) {        Cursor mycursor = new Cursor(Cursor.HAND_CURSOR);        setCursor(mycursor);    }    public void mouseExited(MouseEvent e) {        Cursor mycursor = new Cursor(Cursor.DEFAULT_CURSOR);        setCursor(mycursor);    }    public void mouseClicked(MouseEvent e) {        int row, col, ex;        for (i = 0; i < cnt; i++) {            if (e.getSource().equals(b[i])) {                if (count < quan) {                    prev[count] = i;                    b[prev[count]].setBackground(Color.green);                    row = i / 14;                    col = i % 14;                    x1 = 150 + (30 * col);                    if (row >= 0 &amp;&amp; row <= 3) {                        y1 = 90 + (40 * row);                    } else {                        y1 = 300 + (40 * (row - 4));                    }                    pos[count][0] = x1;                    pos[count][1] = y1;                    count++;                } else {                    ex = prev[0];                    b[ex].setBackground(Color.white);                    for (int j = 0; j <= (count - 1); j++) {                        prev[j] = prev[j + 1];                        pos[j][0] = pos[j + 1][0];                        pos[j][1] = pos[j + 1][1];                    }                    prev[count - 1] = i;                    row = i / 14;                    col = i % 14;                    x1 = 150 + (30 * col);                    if (row >= 0 &amp;&amp; row <= 3) {                        y1 = 90 + (40 * row);                    } else {                        y1 = 300 + (40 * (row - 4));                    }                    pos[count - 1][0] = x1;                    pos[count - 1][1] = y1;                    for (int j = 0; j <= (count - 1); j++) {                        b[prev[j]].setBackground(Color.green);                    }                    count = quan;                }            }        }    }    public void actionPerformed(ActionEvent e) {        if (e.getSource() == save) {            if (count != quan) {                JOptionPane.showMessageDialog(null, \""Please select the exact numbers of seat\"", \""Error\"", JOptionPane.ERROR_MESSAGE);            } else {                for (i = 0; i < count; i++) {                    try {                        String sql = \""Update Book set Avail=0 where MovName='\"" + movname + \""' AND MovDate='\"" + movdate + \""' AND MovTime='\"" + movtime + \""' AND X=\"" + pos[i][0] + \"" AND y=\"" + pos[i][1] + \"" \"";                        String url = \""jdbc:odbc:tbs\"";                        Connection con = DriverManager.getConnection(url);                        Statement s = con.createStatement();                        s.executeUpdate(sql);                        con.close();                    } catch (Exception ex) {                        System.out.println(ex);                    }                    setVisible(false);                    bookmain bm = new bookmain();                }            }        }    }    public static void main(String args[]) {        bookshow mm = new bookshow();    }}""]",<java><swing><progress-bar>,2738629,"[Java progress bar tutorial](""http://java.sun.com/docs/books/tutorial/uiswing/components/progress.html"") should help.Another example can be found in [SwingWorker](""http://java.sun.com/javase/6/docs/api/javax/swing/SwingWorker.html#process(java.util.List)"") java docs entry.Instead of calling the nextPrimeNumber() it could be in your case processNextBook().To work out the progress you could use a similar idea as bellow changing to the variables to something meaningful in your code eg. setProgress(100 * booksProcessed.size() / books.size());The code bellow should give you the basic idea how to achieve what your looking for.--CODE--","[""class PrimeNumbersTask extends          SwingWorker<List<Integer>, Integer> {     PrimeNumbersTask(JTextArea textArea, int numbersToFind) {          //initialize      }     @Override     public List<Integer> doInBackground() {         while (! enough &amp;&amp; ! isCancelled()) {                 number = nextPrimeNumber();                 publish(number);                 setProgress(100 * numbers.size() / numbersToFind);             }         }         return numbers;     }     @Override     protected void process(List<Integer> chunks) {         for (int number : chunks) {             textArea.append(number + \""\\n\"");         }     } } JTextArea textArea = new JTextArea(); final JProgressBar progressBar = new JProgressBar(0, 100); PrimeNumbersTask task = new PrimeNumbersTask(textArea, N); task.addPropertyChangeListener(     new PropertyChangeListener() {         public  void propertyChange(PropertyChangeEvent evt) {             if (\""progress\"".equals(evt.getPropertyName())) {                 progressBar.setValue((Integer)evt.getNewValue());             }         }     });""]",User Interface Components with Swing,"{""Sophisticated Layout Management"": 0.7, ""Choice Components"": 0.7}"
13402889,13402939,What will happen if we are creating the Java Swing application in main thread?,What will happen if we are creating the Java Swing application in main thread? Rule of thumb is that we have to start the application in EDT??please help.,[],<java><swing><rule>,13402939,"Q1. Rule of thumb is that we have to start the application in EDTNot really a rule of thumb - more like a requirement [specified by the library](""http://docs.oracle.com/javase/7/docs/api/javax/swing/package-summary.html""):  In general Swing is not thread safe. All Swing components and related classes, unless otherwise documented, must be accessed on the event dispatching thread. Q2. What will happen if we are creating the Java Swing application in main thread?It might work or not: the behaviour is unspecified. An example is given on that same page:  If you modify the model on a separate thread you run the risk of exceptions and possible display corruption.",[],User Interface Components with Swing,"{""Swing and the Model-View-Controller Design Pattern"": 0.8}"
17745738,17745838,"Reading and writing files ""simultaneously"" in different processes","I've got two Java processes, Processor and Simulator. The Simulator writes to File X a prescribed data record (10 lines of text) every 5s. The Processor reads this file continually, waiting for tokens to indicate a valid record. The code is this (with some substitutions for filenames):In Simulator, every 5s:--CODE--In Processor, constantly:--CODE--Previously, the Processor was hooked to an InputStream and there was no problem using the Scanner (configured appropriately) to read data as it arrived.Here, I can see that the data is being written correctly when it is generated by refreshing the file in Notepad. But when using a file rather than an InputStream, the if ( parseDataBundle()) { line is never reached.What am I doing wrong? The Processor seems to have hold of the file resource, since I can't delete it whilst it's running. My gut thinks it's probably something to do with a misuse of concurrency.","[""FileWriter fileWriter = new FileWriter(DATA_FILE, true);BufferedWriter bufferedWriter = new BufferedWriter(fileWriter);bufferedWriter.write(DATA);bufferedWriter.close();"", ""mScanner = new Scanner(new BufferedReader(        new FileReader(DATA_FILE)));mScanner.useLocale(Locale.UK);while (true) {                  while (mScanner.hasNextLine()) {    // Parse the data bundle.    if (parseDataBundle()) {            ...        }    }}""]",<java><file><io><ipc>,17745838,"I would say it's a misuse of files.  Files are not a designed for messaging.  Once you have reached the end of the file, that is it.  The only way to avoid this is to make sure you only read when you know there is more data (by checking the length)  This is more complicated when using text.You can use files with text but it is tricky. You have to have one thread polling the file size and when it changes, read just the bytes added (and no more). This can be written to a pipe. Your reading thread can read from the pipe using InputStreamReader and BufferedReader.To vary the polling interval you can use an escalating sleep interval like--CODE--The benefit of this approach is the that time it sleeps for adjusts to the rate it gets messages.","[""long lastSize = int maxSleep = 5000, sleep = 200;while(!Thread.currentThread().isInterrupted()) {     long size = file.length();     if (size > lastSize) {        copyData(size - lastSize);        lastSize = size;        sleep = 200;     } else {        Thread.sleep(sleep);        sleep += 200;        if (sleep > maxSleep)            sleep = maxSleep;}""]",Fundamental Programming Structures in Java,"{""Input and Output"": 0.8}"
15832791,,Change the icon name in the notification area in windows in Java,I created a program that supports system tray notifications. I set an icon with a tooltip and balloon message for my system tray. When i start the program the icon appears in the Notification Area Icons in Windows and the Default Name next to it is Java(TM) Platform SE Binary. Can I change this default name to a custom name like my program name?,[],<java><swing><system-tray><trayicon>,15834152,please caused with this code too--CODE--,"[""import java.awt.AWTException;import java.awt.Color;import java.awt.Component;import java.awt.Graphics;import java.awt.Graphics2D;import java.awt.GraphicsConfiguration;import java.awt.GraphicsDevice;import java.awt.GraphicsEnvironment;import java.awt.Image;import java.awt.MenuItem;import java.awt.PopupMenu;import java.awt.SystemTray;import java.awt.TrayIcon;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.image.BufferedImage;import java.beans.PropertyChangeEvent;import java.beans.PropertyChangeListener;import java.util.logging.Level;import java.util.logging.Logger;import javax.swing.AbstractAction;import javax.swing.Action;import javax.swing.Icon;import javax.swing.ImageIcon;import javax.swing.SwingUtilities;import javax.swing.Timer;import javax.swing.UIManager;public class ActiveTray {    private SystemTray tray;    private TrayIcon trayIcon;    private Icon icon, icon1;    private Image image, image1;    private Timer timer;    public ActiveTray() {        if (SystemTray.isSupported() == false) {            System.err.println(\""No system tray available\"");            return;        }        tray = SystemTray.getSystemTray();        PropertyChangeListener propListener = new PropertyChangeListener() {            public void propertyChange(PropertyChangeEvent evt) {                TrayIcon oldTray[] = (TrayIcon[]) evt.getOldValue();                TrayIcon newTray[] = (TrayIcon[]) evt.getNewValue();                System.out.println(oldTray.length + \"" / \"" + newTray.length);            }        };        tray.addPropertyChangeListener(\""trayIcons\"", propListener);        icon = new BevelArrowIcon(BevelArrowIcon.UP, false, false);        image = iconToImage(icon);        icon1 = new BevelArrowIcon(BevelArrowIcon.DOWN, false, false);        image1 = iconToImage(icon1);        PopupMenu popup = new PopupMenu();        MenuItem item = new MenuItem(\""Hello, World\"");        trayIcon = new TrayIcon(image, \""Tip Text\"", popup);        ActionListener menuActionListener = new ActionListener() {            public void actionPerformed(ActionEvent e) {                trayIcon.displayMessage(\""Good-bye\"", \""Cruel World\"",                        TrayIcon.MessageType.WARNING);            }        };        item.addActionListener(menuActionListener);        popup.add(item);        ActionListener actionListener = new ActionListener() {            public void actionPerformed(ActionEvent e) {                tray.remove(trayIcon);            }        };        trayIcon.addActionListener(actionListener);        try {            tray.add(trayIcon);            start();        } catch (AWTException ex) {            Logger.getLogger(ActiveTray.class.getName()).log(Level.SEVERE, null, ex);        }    }    private void start() {        timer = new javax.swing.Timer(125, updateCol());        timer.start();        trayIcon.displayMessage(null, \""  Aplication Loaded  \"", TrayIcon.MessageType.NONE);    }    private Action updateCol() {        return new AbstractAction(\""Icon load action\"") {            private static final long serialVersionUID = 1L;            @Override            public void actionPerformed(ActionEvent e) {                Runnable doRun = new Runnable() {                    @Override                    public void run() {                        Image img = trayIcon.getImage();                        if (img == image) {                            trayIcon.setImage(image1);                        } else {                            trayIcon.setImage(image);                        }                    }                };                SwingUtilities.invokeLater(doRun);            }        };    }    public static void main(String args[]) {        ActiveTray activeTray = new ActiveTray();    }    static Image iconToImage(Icon icon) {        if (icon instanceof ImageIcon) {            return ((ImageIcon) icon).getImage();        } else {            int w = icon.getIconWidth();            int h = icon.getIconHeight();            GraphicsEnvironment ge =                    GraphicsEnvironment.getLocalGraphicsEnvironment();            GraphicsDevice gd = ge.getDefaultScreenDevice();            GraphicsConfiguration gc = gd.getDefaultConfiguration();            BufferedImage image = gc.createCompatibleImage(w, h);            Graphics2D g = image.createGraphics();            icon.paintIcon(null, g, 0, 0);            g.dispose();            return image;        }    }    static class BevelArrowIcon implements Icon {        public static final int UP = 0;         // direction        public static final int DOWN = 1;        private static final int DEFAULT_SIZE = 16;        private Color edge1;        private Color edge2;        private Color fill;        private int size;        private int direction;        public BevelArrowIcon(int direction, boolean isRaisedView,                boolean isPressedView) {            if (isRaisedView) {                if (isPressedView) {                    init(UIManager.getColor(\""controlLtHighlight\""),                            UIManager.getColor(\""controlDkShadow\""),                            UIManager.getColor(\""controlShadow\""),                            DEFAULT_SIZE, direction);                } else {                    init(UIManager.getColor(\""controlHighlight\""),                            UIManager.getColor(\""controlShadow\""),                            UIManager.getColor(\""control\""),                            DEFAULT_SIZE, direction);                }            } else {                if (isPressedView) {                    init(UIManager.getColor(\""controlDkShadow\""),                            UIManager.getColor(\""controlLtHighlight\""),                            UIManager.getColor(\""controlShadow\""),                            DEFAULT_SIZE, direction);                } else {                    init(UIManager.getColor(\""controlShadow\""),                            UIManager.getColor(\""controlHighlight\""),                            UIManager.getColor(\""control\""),                            DEFAULT_SIZE, direction);                }            }        }        public BevelArrowIcon(Color edge1, Color edge2, Color fill,                int size, int direction) {            init(edge1, edge2, fill, size, direction);        }        @Override        public void paintIcon(Component c, Graphics g, int x, int y) {            switch (direction) {                case DOWN:                    drawDownArrow(g, x, y);                    break;                case UP:                    drawUpArrow(g, x, y);                    break;            }        }        @Override        public int getIconWidth() {            return size;        }        @Override        public int getIconHeight() {            return size;        }        private void init(Color edge1, Color edge2, Color fill,                int size, int direction) {            edge1 = Color.red;            edge2 = Color.blue;            this.edge1 = edge1;            this.edge2 = edge2;            this.fill = fill;            this.size = size;            this.direction = direction;        }        private void drawDownArrow(Graphics g, int xo, int yo) {            g.setColor(edge1);            g.drawLine(xo, yo, xo + size - 1, yo);            g.drawLine(xo, yo + 1, xo + size - 3, yo + 1);            g.setColor(edge2);            g.drawLine(xo + size - 2, yo + 1, xo + size - 1, yo + 1);            int x = xo + 1;            int y = yo + 2;            int dx = size - 6;            while (y + 1 < yo + size) {                g.setColor(edge1);                g.drawLine(x, y, x + 1, y);                g.drawLine(x, y + 1, x + 1, y + 1);                if (0 < dx) {                    g.setColor(fill);                    g.drawLine(x + 2, y, x + 1 + dx, y);                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);                }                g.setColor(edge2);                g.drawLine(x + dx + 2, y, x + dx + 3, y);                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);                x += 1;                y += 2;                dx -= 2;            }            g.setColor(edge1);            g.drawLine(xo + (size / 2), yo + size - 1, xo                    + (size / 2), yo + size - 1);        }        private void drawUpArrow(Graphics g, int xo, int yo) {            g.setColor(edge1);            int x = xo + (size / 2);            g.drawLine(x, yo, x, yo);            x--;            int y = yo + 1;            int dx = 0;            while (y + 3 < yo + size) {                g.setColor(edge1);                g.drawLine(x, y, x + 1, y);                g.drawLine(x, y + 1, x + 1, y + 1);                if (0 < dx) {                    g.setColor(fill);                    g.drawLine(x + 2, y, x + 1 + dx, y);                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);                }                g.setColor(edge2);                g.drawLine(x + dx + 2, y, x + dx + 3, y);                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);                x -= 1;                y += 2;                dx += 2;            }            g.setColor(edge1);            g.drawLine(xo, yo + size - 3, xo + 1, yo + size - 3);            g.setColor(edge2);            g.drawLine(xo + 2, yo + size - 2, xo + size - 1, yo + size - 2);            g.drawLine(xo, yo + size - 1, xo + size, yo + size - 1);        }    }}""]",User Interface Components with Swing,"{""Choice Components"": 0.8, ""Sophisticated Layout Management"": 0.8}"
20826518,20827661,Space out console text without tabs using Java,Hey I am currently writing an expression calculator in Java. I have now got it to work but can't figure out how to space out writing in the terminal what I want is two list next to each other. I would originally of used tabs but because the arrays can grow it moves the other one. Here's what I get now:--CODE--Heres what I would like to achieve:--CODE--Heres the code I am currently using to print the stack and output buffer:--CODE--,"[""OUTPUT BUFFER               STACK[]                          [][(]                         [][(]                         [4][(, +]                      [4][(, +, (]                   [4][(, +, (]                   [4, 2][(, +, (, *]                    [4, 2][(, +, (, *, (]                 [4, 2][(, +, (, *, (]                 [4, 2, -2][(, +, (, *, (, -]                  [4, 2, -2][(, +, (, *, (, -]                  [4, 2, -2, 1][(, +, (, *]                    [4, 2, -2, 1, -][(, +]                     [4, 2, -2, 1, -, *][]                         [4, 2, -2, 1, -, *, +][*]                        [4, 2, -2, 1, -, *, +][*]                        [4, 2, -2, 1, -, *, +, 1.5][%]                        [4, 2, -2, 1, -, *, +, 1.5, *]FINAL OUTPUT: [4, 2, -2, 1, -, *, +, 1.5, *, 2, %]INFIX: ( 4 + ( 2 * ( -2 - 1 ) ) ) * 1.5 % 2 POSTFIX: 4 2 -2 1 - * + 1.5 * 2 % TOKEN   ACTION      STACK4      Add             [4.0]2      Add             [4.0, 2.0]-2     Add             [4.0, 2.0, -2.0]1      Add             [4.0, 2.0, -2.0, 1.0]-      Operate         [4.0, 2.0, -3.0]*      Operate         [4.0, -6.0]+      Operate         [-2.0]1.5    Add             [-2.0, 1.5]*      Operate         [-3.0]2      Add             [-3.0, 2.0]%      Operate         [-1.0]ANSWER: -1.0"", ""OUTPUT BUFFER               STACK[]                          [][(]                         [][(]                         [4][(, +]                      [4][(, +, (]                   [4][(, +, (]                   [4, 2][(, +, (, *]                [4, 2][(, +, (, *, (]             [4, 2][(, +, (, *, (]             [4, 2, -2][(, +, (, *, (, -]          [4, 2, -2][(, +, (, *, (, -]          [4, 2, -2, 1][(, +, (, *]                [4, 2, -2, 1, -][(, +]                      [4, 2, -2, 1, -, *][]                          [4, 2, -2, 1, -, *, +][*]                         [4, 2, -2, 1, -, *, +][*]                         [4, 2, -2, 1, -, *, +, 1.5][%]                         [4, 2, -2, 1, -, *, +, 1.5, *]FINAL OUTPUT: [4, 2, -2, 1, -, *, +, 1.5, *, 2, %]INFIX: ( 4 + ( 2 * ( -2 - 1 ) ) ) * 1.5 % 2 POSTFIX: 4 2 -2 1 - * + 1.5 * 2 % TOKEN   ACTION      STACK4      Add           [4.0]2      Add           [4.0, 2.0]-2     Add           [4.0, 2.0, -2.0]1      Add           [4.0, 2.0, -2.0, 1.0]-      Operate       [4.0, 2.0, -3.0]*      Operate       [4.0, -6.0]+      Operate       [-2.0]1.5    Add           [-2.0, 1.5]*      Operate       [-3.0]2      Add           [-3.0, 2.0]%      Operate       [-1.0]ANSWER: -1.0"", ""System.out.println(\""OUTPUT BUFFER\\t\\t\\t\\tSTACK\"");ArrayList<String> out = new ArrayList<String>();Stack<String> stack = new Stack<String>();for(String token : inputTokens){    System.out.print(stack+ \""\\t\\t\\t\\t\\t\"");    System.out.println(out);    if(isOperator(token)){        while(!stack.empty() &amp;&amp; isOperator(stack.peek())){            if (checkPri(token, stack.peek())<=0 || checkPri(token, stack.peek()) < 0 ){                out.add(stack.pop());                //System.out.println(\""OUTPUT: \"" + out);                continue;            }            break;        }        stack.push(token);    }else if(token.equals(\""(\"")){        stack.push(token);    }else if(token.equals(\"")\"")){        while(!stack.empty() &amp;&amp; !stack.peek().equals(\""(\"")){            out.add(stack.pop());        }        stack.pop();    } else {        out.add(token);        //System.out.println(\""OUTPUT BUFFER: \"" + out);    }}""]",<java><string><printing><stack><shunting-yard>,20827661,"you can use String.format(String,args...) or System.out.printf(String,args...);I don't know how to explain due to my poor english, but here the example:--CODE--will get this output:--CODE--","[""int i=10000,j=200,k=5000000;System.out.printf(\""%10d%10d%10d\"",i,j,k);"", ""10000     200       5000000^         ^         ^each has ten spaces between them because of %10d""]",Collections,"{""Concrete Collections"": 0.75, ""Legacy Collections"": 0.85}"
30153362,30153426,What does it mean to have a synchronized block on a different monitor than 'this' instance?,"I have the following piece of code. It has two objects, namely MultiThreadingTest, and the ThreadB object. When we say synchronized(b), what does it mean exactly? Can the 'main' thread get a lock on b before ThreadB finishes it's execution? I can't understand the significance of monitor object in the synchronized block.--CODE--","["" package threads;    class MultiThreadingTest    {        public static void main(String[] args)        {            ThreadB b = new ThreadB();            b.setName(\""Thread B\"");            b.start();            synchronized(b)                 {                System.out.println(\""Current thread : \""+ Thread.currentThread().getName());                          try                {                    System.out.println(\""Waiting for b to complete...\"");                    b.wait();                }                catch (InterruptedException e)                {                    e.printStackTrace();                }                   System.out.println(\""Total = \""+b.total );            }        }    }    class ThreadB extends Thread    {        int total;        public void run()        {            synchronized(this)            {                System.out.println(\""Current thread : \""+Thread.currentThread().getName());                for(int i=0;i<100;i++)                {                    total = total + i;                }                notify();            }        }    }""]",<java><multithreading>,30153426,"synchronized(this) means that you won't be able to enter this block of code if another thread is inside a block of code that is also synchronized on the object referenced by this.synchronized(b) means that you won't be able to enter this block of code if another thread is inside a block of code that is also synchronized on the object referenced by b.They thus do the exact same thing. The only difference is the object that is used to lock.Note that waiting, synchronizing and notifying on an object of type Thread is a really really bad idea. It confuses things, and will lead to unwanted behavior because other methods (join() for example) also use the Thread as a monitor.",[],Concurrency,"{""Synchronization"": 0.9}"
46783376,46783494,Peculiar behavior of split() of string class,"To my understanding following program should print 0,0 as an output.However, when I run this program I am getting 1,0 as an output.--CODE--Please help me understand what is going on here ?","[""public class Test1 {    public static void main(String[] args) {        System.out.println(\""\"".split(\"";\"").length); //1        System.out.println(\"";\"".split(\"";\"").length);//0    }}""]",<java><string>,46783494,relavant code--CODE--,"[""        // If no match was found, return this        if (off == 0)            return new String[]{this};        // Add remaining segment        if (!limited || list.size() < limit)            list.add(substring(off, value.length));""]",Fundamental Programming Structures in Java,"{""Strings"": 1.0}"
29473686,29473941,paintComponent does not paint correctly,I'm trying to  make checkers game but the following architecture does not show on  JFrame what I'm doing wrong //base class --CODE--//black rectangle  --CODE--//white rectangle  --CODE--and here the Main  Class    import javax.swing.JFrame;--CODE--I expect something like thisSo what's wrong with my code? why paintComponent in  CaseBlanche and CaseNoire does not behave as expected?Please help   ,"[""import java.awt.event.MouseEvent;import java.awt.event.MouseListener;import javax.swing.*;public abstract class   Case extends JComponent implements MouseListener {     /**     *      */    private static final long serialVersionUID = 1L;    protected static final int LONGUEUR=40;     protected  int x,y,width,height;       @Override    public void mouseClicked(MouseEvent arg0) {        // TODO Auto-generated method stub    }    @Override    public void mouseEntered(MouseEvent arg0) {        // TODO Auto-generated method stub    }    @Override    public void mouseExited(MouseEvent arg0) {        // TODO Auto-generated method stub    }    @Override    public void mousePressed(MouseEvent arg0) {        // TODO Auto-generated method stub    }    @Override    public void mouseReleased(MouseEvent e) {        // TODO Auto-generated method stub    }}"", ""import java.awt.Color;import java.awt.Graphics;public class CaseNoire extends Case{/**     *      */    private static final long serialVersionUID = 1L;    public CaseNoire(int x, int y,int width,int height)    {        this.x=x;        this.y=y;          this.width = width;           this.height= height;    }@Overrideprotected void paintComponent(Graphics g){       g.setColor(Color.black);          g.fillRect(x, y,width,height);  }}"", ""import java.awt.Color;import java.awt.Dimension;import java.awt.Graphics;public class CaseBlanche extends Case {    /**     *      */    private static final long serialVersionUID = 1L;    public CaseBlanche(int x, int y,int width,int height)    {        this.x=x;        this.y=y;          this.width = width;           this.height= height;    }    @Override    public void paintComponent(Graphics g)    {        super.paintComponent(g);        g.setColor(Color.white);              g.fillRect(x, y,width,height);       }}import java.awt.Color;import java.awt.Graphics;import java.awt.Paint;import javax.swing.JComponent;import javax.swing.JPanel;public class Plateau extends JComponent{    private Case[][] cases= new Case[10][10];      @Override    protected void paintComponent(Graphics g) {        // TODO Auto-generated method stub        super.paintComponent(g);                           for(int i=0; i<10;  i++)           {               for(int j=0;j<10;j++)               {                   if((i+j)%2==0)                   {                       CaseBlanche blanche= new CaseBlanche(j*Case.LONGUEUR,i*Case.LONGUEUR,Case.LONGUEUR, Case.LONGUEUR);                       //cases[i][j]=blanche;                       add(blanche);                        //g.setColor(Color.white);                             // g.fillRect(j*40, i*40,40,40);                    }                   else                   {                       CaseNoire caseNoire=new CaseNoire(j*Case.LONGUEUR,i*Case.LONGUEUR,Case.LONGUEUR, Case.LONGUEUR);                   add(caseNoire);                   }                                  }           }                            }}"", ""public class MainDamesFrame extends JFrame {    /**     *      */    private static final long serialVersionUID = 1L;    public static void main(String[] args )    {        MainDamesFrame damesFrame = new MainDamesFrame();     }     public  MainDamesFrame()        {        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        setTitle(\""Jeu de Dames\"");                                   this.getContentPane().add(new Plateau());               setSize(800, 600);        setVisible(true);                       }}""]",<java><swing>,29473941,"--CODE--You have a typo. Get rid of the ""s"" in paintComponents().--CODE--This won't work as you expected because the (880, 600) included the title bar and borders, so some of the squares will not be painted properly.So, your custom painting classes should override the getPreferredSize() method to return the size of each component. Then you can use the pack() method to make sure the components are properly sized.There is no need for the CaseNoir and CaseBlanche classes. When you create the Case object you can just use:--CODE--Then when you paint the component you just use:--CODE--Also, your Plateau class is wrong. The paintComponent() method is for painting. Your code is creating and adding components components. If you want to add components then you should be using a layout manager. The GridLayout will easily add components in a grid as long as the getPreferredSize() method has been implemented. You create the component with a specified width/height, so to implement this method you do something like:--CODE--Check out this Chessboard Example for a way to add components in a grid.","[""public void paintComponents(Graphics g)"", ""setSize(800, 600);"", ""setBackground(Color.BLACK);"", ""g.setColor( getBackground() );"", ""@Overridepublic Dimension getPreferredSize(){    return new Dimension(width, height)}""]",User Interface Components with Swing,"{""Choice Components"": 0.8, ""Text Input"": 0.8}"
18219316,,after compiling code JFrame does not appear,"I'm using the Intellij idea platform.I have the following code:--CODE--I expected to see a JFrame after compiling this code, but was nothing appeared. What kind of problem can it be?Also must admit, that I haven't possibility to run method ""main"". InteligIdea propose me only to compile Ramka.java. After compiling IntelijIdeay says, that compilation completed successfully, but thats all and is nothing happened. In my previous exercises I always ran method ""main"".","[""package GUI.test;import javax.swing.*;public class Ramka extends JFrame{    Ramka(){        setVisible(true);        setSize(100,100);    }    public void main (String[] args){        new Ramka();    }}""]",<java><swing><jform>,18219888,"You should do something like this:--CODE--Besides missing the static identifier at main, you also have to make sure that your frame runs in the right thread check [""concurrency""](""http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html"") for swing","[""public static void main (String[] args){            java.awt.EventQueue.invokeLater(new Runnable() {            public void run() {                new Ramka().setVisible(true);            }        });    }""]",User Interface Components with Swing,"{""Choice Components"": 0.8, ""Text Input"": 0.8}"
44930223,,JButtons in JPanel take too much space,"i have a problem with some buttons and panels. I created a JPanel with a GridBagLayout 6x1.--CODE--The problem comes when i try to add buttons to this panel as they take space based on how many they are, even tho they should have fixed size. For example if I do--CODE--I create 4 buttons and the panel is supposed to have 4 button and 2 ""empty spaces"". But instead it ha 4 buttons that take all the space they can.[](""https://i.stack.imgur.com/rTpHs.png"")  If i do--CODE--I get this instead[](""https://i.stack.imgur.com/bDkVk.png"")Shouldn't the dimensions be fixed? Can anyone help me?","[""        GraphicPaintedPanel deck = new GraphicPaintedPanel();        GridBagLayout gblDecks = new GridBagLayout();                                                       gblDecks.columnWidths = new int[]{0, 0, 0, 0, 0, 0, 0};        gblDecks.rowHeights = new int[]{0, 0};        gblDecks.columnWeights = new double[]{0.15, 0.15, 0.15, 0.15, 0.15, 0.15, Double.MIN_VALUE};        gblDecks.rowWeights = new double[]{1.0, Double.MIN_VALUE};        deck.setLayout(gblDecks);"", ""            for(int j=0; j<4; j++){            JButton activate= new JButton(\""ACTIVATE LEADER CARD\"");            GridBagConstraints gbcActivate = new GridBagConstraints();            gbcActivate.gridx = j;            gbcActivate.fill = GridBagConstraints.BOTH;            deck.add(activate, gbcActivate);            }"", ""            for(int j=0; j<6; j++){            JButton activate= new JButton(\""ACTIVATE LEADER CARD\"");            GridBagConstraints gbcActivate = new GridBagConstraints();            gbcActivate.gridx = j;            gbcActivate.fill = GridBagConstraints.BOTH;            deck.add(activate, gbcActivate);            }""]",<java><swing><jpanel><jbutton><gridbaglayout>,44930580,"gbcActivate.fill = GridBagConstraints.BOTHIf we go to the [tutorial](""https://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html"") it says:  fill   Used when the component's display area is larger than the component's requested size to determine whether and how to resize the component. Valid values (defined as GridBagConstraints constants) include NONE (the default), HORIZONTAL (make the component wide enough to fill its display area horizontally, but do not change its height), VERTICAL (make the component tall enough to fill its display area vertically, but do not change its width), and BOTH (make the component fill its display area entirely).So, it will fill the display area independtly of what you specify for the columnWeights, etc. Try removing it or changing it for GridBagConstraints.NONEOr as suggested in the comments above, use another [layout manager](""https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html"") such as [FlowLayout](""https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html#flow"")",[],User Interface Components with Swing,"{""Introduction to Layout Management"": 0.8, ""Choice Components"": 0.8}"
34673150,34673195,Java Swing: How to remove the default-spacing for JButtons in a JPanel,"I'm busy writing a button menu for a Java Swing application and I am wondering if it is possible to remove the padding between JButtons that are added to a JPanel.The JPanel uses a FlowLayout that is aligned left.--CODE--The buttons are standard JButtons--CODE--I added the JButtons to the panel as normal--CODE--Everything works as expected but what do I need to do to remove the default spacing between the buttons?I found a suggested solution online which is the following--CODE--However this seems to remove the spacing inside of the button and not the spacing between each button.Is this spacing produced by the FlowLayout? If so, how can I remove it?","[""JPanel panelMenu = new JPanel(new FlowLayout(FlowLayout.LEFT));"", ""JButton buttOne = new JButton(\""One\"");JButton buttTwo = new JButton(\""Two\"");"", ""add(panelMenu, BorderLayout.NORTH);panelMenu.add(buttOne);panelMenu.add(buttTwo);"", ""buttOne.setBorder(null);buttOne.setBorderPainted(false);buttOne.setMargin(new Insets(0,0,0,0));buttTwo.setBorder(null);buttTwo.setBorderPainted(false);buttTwo.setMargin(new Insets(0,0,0,0));""]",<java><swing><jbutton><spacing><flowlayout>,34673195,"// 0, 0 equates to horizontal and vertical offsets, the default is 5.--CODE--Should sort it!","[""JPanel panelMenu = new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));""]",User Interface Components with Swing,"{""Choice Components"": 0.85}"
34159151,,Why is the overridden `add` method that JFrame defines is not mentioned in the API documentation of JFrame?,"Quoting [http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html](""http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html"") :  As a conveniance add and its variants, remove and setLayout have  been overridden to forward to the contentPane as necessary. This means  you can write:--CODE--    And the child will be added to the contentPane. Quoting from Core Java Volume I - Fundamentals (9th Edition), Chapter 7,Section 7.4.  As of Java SE 5.0, the JFrame.add method has given up trying to  reeducate programmers, and simply calls add on the content pane.    Thus, you can simply use the call--CODE--But when I scroll through the API docs at[http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html](""http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html""), Ican't find any documentation on the add method in JFrame thatoverrides an add method of a parent class.In fact, the first occurrence of any add method I see in this page isin the 'Methods inherited from class java.awt.Container' section of thepage.Why is the overridden add method that JFrame defines is not mentionedin the API documentation of JFrame?","[""frame.add(child);"", ""frame.add(c);""]",<java><swing>,34160822,"[add](""http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add(java.awt.Component)"") has not been overridden and still is inherited from [java.awt.Container](""http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html"") but as you can see below, a call is made to addImpl which is overridden in [JFrame](""http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html"")--CODE--[JFrame#addImpl()](""http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#addImpl(java.awt.Component,%20java.lang.Object,%20int)"")  Adds the specified child Component. This method is overridden to  conditionally forward calls to the contentPane. By default, children  are added to the contentPane instead of the frame, refer to  RootPaneContainer for details.","[""376     public Component add(Component comp) {377         addImpl(comp, null, -1);378         return comp;379     }""]",User Interface Components with Swing,"{""Choice Components"": 0.85}"
33689850,33689993,Using ReentrantLock instead of synchronized for improving performance,"I'm trying to find the most optimal solution for my particular situation. I currently have the following class:--CODE--The class represents all updates of amount of money shared by a user group. The group may consist up to 100 users. The amount field may be updated by any user of the group concurrently.Calling the update(int) includes entering two synchronized blocks which is not very good from performance standpoint. Also it may happen that the BULK operation will be computed twice or more times even if there is no need for it. Actually, assume that three threads are trying to acces update() concurrently. The check(date) returned true in each of the threads. It doesn't do any harm, but the BULK operation is quite heavy (more thaqn 1 minute). So, it's critical to not perform it even twice if there is no need.It's not possible to wrap the BULK operation into a synchronized block becuase it includes calling a couple of alien methods. So, I tend to use ReentrantLock instead of synchronization. The class then may be rewritten as follows:--CODE--QUESTION: Is such using of ReentrantLock more efficient in such circumstances than explicit synchronization.","[""public class Container    private volatile Date date;    private int amount;    private final Object lock = new Object();    public void update(int amount){        int actualAmount;        if(check(date)){              //do some BULK computation to compute the actualAmount             synchronized(lock){                 date = new Date();                 this.amount = actualAmount;             }        }    }    private boolean check(Date date){        synchronized(lock){          //reading from the date and returning true if the date is expired        }    }}"", ""public class Container    private volatile Date date;    private int amount;    private final Lock lock = new ReentrantLock();    public void update(int amount){        int actualAmount;        lock.lock();        try{            if(check(date)){                 //do some BULK computation to compute the actualAmount                 date = new Date();                 this.amount = actualAmount;            }        } finally {            lock.unlock();        }    }    private boolean check(Date date){         //reading from the date and returning true if the date is expired    }}""]",<java><multithreading><synchronization><locking>,33689993,You can do the same without synchronization.Synchronization is needed only if a thread needs to know the value of a variable to update it. If the thread only change a variable it is sufficient to define it as volatile.--CODE--NOTE: A synchronization can be necessary if the amount depends on the actual amount value. A synchronization for date is not necessary,"[""public class Container    private volatile Date date;    private volatile int amount;    public void update(int amount){        int actualAmount;        if (check(date)) {              //do some BULK computation to compute the actualAmount             date = new Date();             this.amount = actualAmount;        }    }    private boolean check(Date date) {          //reading from the date and returning true if the date is expired    }}""]",Concurrency,"{""Synchronization"": 0.8}"
8178847,8179009,Frequently Used Hash Maps But With Concurrency,"I'm reaching back to a previous question I had: Frequently Used metadata HashmapHowever, this time how would I adapt that solution to work with ConcurrentMap? LinkedHashMap isn't a synchronized collection, and due to performance reasons I don't want to wrap it in sycronizedMap. Is there an alternative [concurrent friendly] solution  to solve this problem?The original problem was that I need a hash map that gets rid of the least used items after so many entries. ",[],<java><multithreading><performance><concurrency>,8179009,"The Guava [MapMaker](""http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/MapMaker.html"") and [CacheBuilder](""http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/cache/CacheBuilder.html"") classes can generate concurrent maps with an LRU eviction policy.  The CacheBuilder class is preferred for caching use-cases, as the Guava developers are in the process of stripping the cache support methods out of MapMaker.",[],Concurrency,"{""Synchronization"": 0.8, ""Thread-Safe Collections"": 0.85}"
5983799,5989730,Fading Jpanels in and out in a JFrame,"I would like to make a game with multiple JPanels in a single global JFrame. I would like to switch these JPanels but with a nice animation like fade in and fade out. How would you be able to fade a JPanel out, switch the JPanel to a new one, and fade the new in (preferably without an external library)?Thanks a lot",[],<java><swing><user-interface><jpanel><fade>,5989730,"Maybe  [http://filthyrichclients.org/](""http://filthyrichclients.org/"")has some nice ideas and examples(online) to get started. It contains many swing animation details.",[],User Interface Components with Swing,"{""Choice Components"": 0.8}"
8049561,8050690,FlowLayout does not use multiple lines within GridBagLayout,"Normally, FlowLayout uses more than one line if needed. Apparently this doesn't happen if the component with the FlowLayout is itself part of a GridBagLayout.Consider this code:--CODE--This code is intended to display the JLabels ""Label #1"", ""Label #2"" etc. on multiple lines, but in fact it only uses one line.I can force it to use multiple lines by removing the '//' before the call to setPreferredSize in the above code, but this requires me to set both a width and a height, and I don't know what height to use. (I cannot use FontMetrics to calculate the height, because in my actual case the JLabels are in reality small JPanels of varying size.)So is there a way to force FlowLayout to use multiple lines? (Or, alternatively, is there a way to calculate the required height of a component when its width is known?)","[""import java.awt.*;import javax.swing.*;public class Xyzzy extends JFrame{    public static void main(String[] args) {        javax.swing.SwingUtilities.invokeLater(new Runnable() {            public void run() {                Xyzzy frame = new Xyzzy();                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                frame.setLayout(new GridBagLayout());                JPanel top = new JPanel();                top.setLayout(new FlowLayout());                for (int i=1; i<=30; ++i)                    top.add(new JLabel(String.format(\""Label #%d\"",i)));                GridBagConstraints c = new GridBagConstraints();                c.weightx = 1.0;                c.gridwidth = GridBagConstraints.REMAINDER;                c.anchor = GridBagConstraints.CENTER;                frame.add(top,c);                frame.add(new JLabel(\""Bottom\""),c);                //top.setPreferredSize(new Dimension(500,300));                frame.setSize(600, 600);                frame.setVisible(true);            }        });    }}""]",<java><swing>,8050690,Try to add constraint parameters:--CODE--It should allow growing of panel with FlowLayout in vertical direction.,"[""c.weighty = 1.0;c.fill = GridBagConstraints.VERTICAL;""]",User Interface Components with Swing,"{""Sophisticated Layout Management"": 0.95}"
13454589,,How to improve GUI by changing BoxLayout into a different LayoutManager?,"I've a big problem with Swing in Java, I used BoxLayout for this but still it looks bad.Any suggestions about my usage of layouts, or how to change it to look like in assumptions? ([here are assumptions](""http://imgur.com/a/NKA48#0""))--CODE--EDIT: I almost solve this problem, I need to move all elements to left ([how it look like](""http://i.imgur.com/9kdZs.png""))but I have no idea how ;/ Here is constructor of this class.--CODE--","[""Container main = new Container();    Container left = new Container();// here goin buttons    Container right = new Container(); // here goin tabs +  more buttons, textfields and other stuff    BoxLayout lewyL = new BoxLayout(left, BoxLayout.Y_AXIS);    left.setLayout(lewyL);    left.add(rastrowa); //radiobutton    left.add(wektorowa);//radiobutton    left.add(apDwuliniowa);//checkbox    left.add(wczytaj);//button    left.add(zapisz);//obutton    left.add(wyczysc);//button    BoxLayout prawyL = new BoxLayout(right, BoxLayout.Y_AXIS);    right.setLayout(prawyL);    right.add(zakladki);// tabs (mostly i use BoxLayout but for last one i need something more \""complicated\"")"", ""            JLabel label = new JLabel(\""O wektor\"");    JLabel labelA = new JLabel(\""a:\"");    JLabel labelB = new JLabel(\""b:\"");    JButton wykonaj = new JButton(\""Wykonaj\"");    JTextField a = new JTextField(5);    JTextField b = new JTextField(5);    add(label);    add(labelA);    add(a);    add(labelB);    add(b);    add(wykonaj);   ""]",<java><swing><awt><layout-manager><boxlayout>,13454738,"There's nothing wrong with the way it looks (in my opinion), but if you want it to look a little better, why don't you convert the left panel (which is 6x1) into a 3x2 panel, with the checkboxes/radiobuttons on the left, and buttons on the right? Sounds like a job for GridLayout - one of my favorite classes...--CODE--Note that the 3,2 defines the number of rows,columns. When adding panels, they are added to the grid from left-to-right, and top-to-bottom. GridLayout also auto-sizes the components, so all the buttons etc will be the same width and height, making it look more consistent.The [GridLayout documentation](""http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GridLayout.html"") might be useful, and the [Visual Guide to Layout Managers](""http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html"") is a great place to see other layout managers that might work better for your different situations. I personally find BorderLayout and GridLayout to be the most useful, and cover about 95% of the situations I ever need for my GUIs.","[""JPanel leftPanel = new JPanel(new GridLayout(3,2));leftPanel.add(rastrowa);     //radiobuttonleftPanel.add(wczytaj);      //buttonleftPanel.add(wektorowa);    //radiobuttonleftPanel.add(zapisz);       //obuttonleftPanel.add(apDwuliniowa); //checkboxleftPanel.add(wyczysc);      //button""]",User Interface Components with Swing,"{""Sophisticated Layout Management"": 0.95, ""Introduction to Layout Management"": 0.85}"
32417425,32417505,MouseListener on JFrame only listens borders,"I am trying to create a JFrame that will register MouseEvents for my game. However, when the following code is run, the console only prints ""in"" and ""out"" when you drag the frame border and then move your cursor. Very confusing. I tried adding the component glassPane and then adding the MouseListener there but it still is unsuccessful. --CODE--","[""import java.awt.Dimension;import java.awt.event.MouseEvent;import java.awt.event.MouseListener;import javax.swing.JFrame;public class Window extends JFrame implements MouseListener {    private static final long serialVersionUID = -240840600533728354L;    public Window(int width, int height, String title, Game game) {        JFrame frame = new JFrame(title);        frame.setPreferredSize(new Dimension(width, height));        frame.setSize(new Dimension(width, height));        frame.setMaximumSize(new Dimension(width, height));        frame.setMinimumSize(new Dimension(width, height));        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        frame.setResizable(false);        frame.setLocationRelativeTo(null);        frame.add(game);        frame.setVisible(true);        frame.addMouseListener(this);        game.start();    }    @Override    public void mouseExited(MouseEvent e) {        System.out.println(\""out\"");    }    @Override    public void mouseClicked(MouseEvent e) {}    @Override    public void mousePressed(MouseEvent e) {}    @Override    public void mouseReleased(MouseEvent e) {}    @Override    public void mouseEntered(MouseEvent e) {}}""]",<java><swing><jframe><mouselistener>,32417505,"I think that the last thing that you want to do is to add the MouseListener to the JFrame, since the JFrame shouldn't have this responsibility. It's responsibility should be to hold and display the components that are added to it, and it is likely one of those components, probably the one that displays the game's active view, very likely a JPanel, which should get this MouseListener.Some side notes:I try to avoid extending JFrame and recommend that you do the same, unless you plan on overriding its behaviors (methods). Instead, create the JFrame when you need it.Your Window class in fact extends JFrame, but does not even create a displayable this object, so yet another (and stronger) reason not to have this class extend JFrame.I recommend having the Game object specify its own size by overriding its getPreferredSize() method, and then letting the JFrame achieve this by calling pack() on the JFrame after adding all components to it.Note that core Java already has a Window class, and you may wish to avoid having your class share names with core Java classes, just in case you wish to use one of those core classes later, and wish to avoid running into name clashes.",[],Graphical User Interface Programming,"{""Event Handling"": 0.9}"
19738402,19739656,How do I get a JPanel with an empty JLabel to take up space in a GridBagLayout,"I am  working on a GUI for a project at school. I am using a GridBagLayout in swing.I want to have a label indicating the input(a type of file @ x = 0, y = 0), followed by another label(the actual file name once selected @ x = 1, y = 0), followed by a browse button for a file chooser( @ x = 2, y = 0). The label at (1,0) is initially blank, however I want the area that the text will occupy to take up some space when the label contains no text. I also want the space between the label at (0,0) and the button at (2,0) to remain constant.To achieve this, I'm trying to put the label onto a panel and then play with the layouts. However I can't seam to achieve the desired results. Could anyone offer some suggestions? The next three rows of the GridBagLayout will be laid out exactly the same way. Here is a link to a screen shot of the GUI. --CODE--","[""    calibrationFileSelectionValueLabel = new JLabel(\""\"",Label.LEFT);    calibrationFileSelectionValueLabel.setName(\""calibrationFileSelection\"");    calibrationFileSelectionValueLabel.setMinimumSize(new Dimension(100,0));    calibrationFileSelectionValuePanel = new JPanel();    calibrationFileSelectionValuePanel.setBorder(BorderFactory.createEtchedBorder());    calibrationFileSelectionValuePanel.add(calibrationFileSelectionValueLabel);    c.gridx = 0;    c.gridy = 0;    c.fill = GridBagConstraints.NONE;    filesPanel.add(calibrationFileLabel,c);    c.gridy = 1;    filesPanel.add(frequencyFileLabel,c);    c.gridy = 2;    filesPanel.add(sampleFileLabel,c);    c.gridy = 3;    filesPanel.add(outputFileLabel,c);    c.gridx = 1;    c.gridy = 0;    c.fill = GridBagConstraints.BOTH;   // filesPanel.add(calibrationFileSelection,c);    filesPanel.add(calibrationFileSelectionValuePanel,c);    c.gridy = 1;   // filesPanel.add(frequencyFileSelection,c);    filesPanel.add(frequencyFileSelectionValueLabel,c);    c.gridy = 2;   // filesPanel.add(sampleFileSelection,c);    filesPanel.add(sampleFileSelectionValueLabel,c);    c.gridy = 3;   // filesPanel.add(outputFileSelection,c);    filesPanel.add(outputFileSelectionValueLabel,c);    c.gridx = 2;    c.gridy = 0;    c.fill = GridBagConstraints.NONE;    filesPanel.add(calibrationFileSelectionButton,c);    c.gridy = 1;    filesPanel.add(frequencyFileSelectionButton,c);          c.gridy = 2;    filesPanel.add(sampleFileSelectionButton,c);    c.gridy = 3;    filesPanel.add(createOutputFileButton,c);           panelForFilesPanelBorder = new JPanel();    panelForFilesPanelBorder.setBorder(BorderFactory.createCompoundBorder(new EmptyBorder(5,10,5,10), BorderFactory.createEtchedBorder()));    panelForFilesPanelBorder.add(filesPanel);    buttonsPanel = new JPanel();    buttonsPanel.setLayout(new FlowLayout(FlowLayout.CENTER));    buttonsPanel.setBorder(BorderFactory.createCompoundBorder(new EmptyBorder(5,10,10,10), BorderFactory.createEtchedBorder()));    buttonsPanel.add(startButton);    buttonsPanel.add(stopButton);    basePanel.add(panelForFilesPanelBorder);    basePanel.add(numericInputPanel);     basePanel.add(buttonsPanel); ""]",<java><swing><gridbaglayout>,19739656,"Well, Essentially, GridBagLayout places components in rectangles (cells) in a grid, and then uses the components' preferred sizes to determine how big the cells should be. With this layout:if the container's size is smaller than the preferred size only then the minimum size gets used. With empty("""") text A JLabel\JTextFeild\JButton's preferred size is around (2,2), if no preferred size hints is given to it explicitly using setPreferredSize(size) or overriding getPreferredSize(size). At his point setting minimum size will not work, as the preferred size with empty text is around (2,2) and container's size is already larger than the preferred size. GridBagLayout uses the preferred size not worrying about the minimum size at all.  You actually need to set both preferred and minimum size with GridBagLayout because:If you try setting  only the preferred size, shrinking the size of the window would eventually cause the container panel's size to get shrink. The container's panel size will be smaller than the preferred size of the component and the JLabel\JTextFeild\JButton  shrink to their minimum size. If you haven't given minimum size hints at this point, the default minimum size: likely to be around (2,2) gets used. You will understand better with given working example below.Some other things to note:--CODE--you are adding the panel which contains your calibrationFileSelectionValueLabel. You don't need to use an extra panel, rather just add the calibrationFileSelectionValueLabel directly to the grid by setting( instead overriding getPreferedSize(Size) is preferable) preferredSize. However try setting inset to the GridBagConstraints to look your first panel a little more nicer:--CODE--A minimal working example for you: In case you are not getting what we are saying, this example i have set only preferred size for  resolving your problem. But as i haven't set minimum size, try resizing the window to match with above explanation.  Source code:--CODE--","[""   c.gridx = 1;    c.gridy = 0;    c.fill = GridBagConstraints.BOTH;   // filesPanel.add(calibrationFileSelection,c);    filesPanel.add(calibrationFileSelectionValuePanel,c);"", ""   gridBagCnst.insets = new Insets(3, 3, 3, 3); "", ""import java.awt.*;import java.awt.Dimension;import java.awt.GridBagConstraints;import java.awt.Insets;import javax.swing.*;import javax.swing.SwingUtilities;import javax.swing.border.*;/** * * @author Rashed */ class GridBagLayoutDemo extends JFrame{    public JLabel createLabel(String txt, int width, int height, Color color)    {        JLabel label = new JLabel(txt);        label.setOpaque(true);        label.setBackground(color);        label.setPreferredSize(new Dimension(width, height));        return label;    }    public GridBagLayoutDemo() throws HeadlessException {      // setSize(400,400);       setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       JPanel panel = new JPanel(new java.awt.GridBagLayout());       panel.setBorder(new EmptyBorder(10, 10, 10, 10));       GridBagConstraints labCnst = new GridBagConstraints();       Dimension preferredSize = new Dimension(140,20);       labCnst.insets = new Insets(3, 3, 3, 3);       JLabel title = new JLabel(\""My Title\"");       JLabel title2 = new JLabel(\""My Title\"");       JLabel title3 = new JLabel(\""My Title\"");       JLabel selectionLabel1 = new JLabel(\""\"");       selectionLabel1.setBorder(new LineBorder(Color.BLACK));       JLabel selectionLabel2 = new JLabel(\""\"");       selectionLabel2.setBorder(new LineBorder(Color.BLACK));       JLabel selectionLabel3 = new JLabel(\""\"");       selectionLabel3.setBorder(new LineBorder(Color.BLACK));       selectionLabel1.setPreferredSize(preferredSize);       selectionLabel2.setPreferredSize(preferredSize);       selectionLabel3.setPreferredSize(preferredSize);       JButton browse1 = new JButton(\""Browse\"");       JButton browse2 = new JButton(\""Browse\"");       JButton browse3 = new JButton(\""Browse\"");        labCnst.gridx = 0;        labCnst.gridy = 0;        panel.add(title, labCnst);        labCnst.gridy = 1;        panel.add(title2, labCnst);        labCnst.gridy = 2;        panel.add(title3, labCnst);        labCnst.gridx = 1;        labCnst.gridy = 0;        panel.add(selectionLabel1, labCnst);        labCnst.gridy = 1;        panel.add(selectionLabel2, labCnst);        labCnst.gridy = 2;        panel.add(selectionLabel3, labCnst);        labCnst.gridx = 3;        labCnst.gridy = 0;        panel.add(browse1, labCnst);        labCnst.gridy = 1;        panel.add(browse2, labCnst);        labCnst.gridy = 2;        panel.add(browse3, labCnst);       //labCnst.anchor = GridBagConstraints.LINE_END;       add(panel);       pack();    }    public static void main(String[] args) {        SwingUtilities.invokeLater(new Runnable() {            @Override            public void run() {                new GridBagLayoutDemo().setVisible(true);            }        });    }}""]",User Interface Components with Swing,{}
42735826,,Populating JComboBox with custom objects stored in an ArrayList,"I'm trying to populate a JComboBox with object names.  The objects are of Category type and are stored in an ArrayList (named categoryList) in the Category class. Here is the content of the Category class:--CODE--Here is the code that populates the JCombobox (method name: populateComboBox()):--CODE--When I populate the ArrayList with 2 objects, named Obj1 and Obj2, I get the following problems:When populateComboBox() is invoked, the combo box only displays the second object i.e. it only displays Obj2.  The expected display was Obj1, Obj2.Since it only displays Obj2. When populateComboBox() is invoked twice, the combo box displays two Obj2. When invoked three times it displays three Obj2. i.e. the number of times the method gets invoked, the number of times Obj2 gets displayed in the combo box.Should the categoryList ArrayList be inside the Category class? or should it be inside the control class? I'm a bit confused with this one.","[""public class Category {    private static String catName;    private static List<Category> categoryList;    public static void addToCatList(String str)    {        Category cat = new Category();        Category.setCatName(str);        categoryList.add(cat);    }    public static List<Category> getCatList()    {        return categoryList;    }    public static String getCatName()     {        return catName;    }    public static void setCatName(String catName)     {        Category.catName = catName;    }    @Override    public String toString()    {        return catName;    }}"", ""        List<Category> catList = new ArrayList<Category>();        catList = Category.getCatList();        Category list[] = new Category[catList.size()];        list = catList.toArray(list);        for(int i = 0; i <list.length; i++)        {                selectCatComboBox.addItem(list[i].getCatName());         }        addItemDialog.setVisible(true); ""]",<java><swing><arraylist><jcombobox>,42735975,"Your problem is that your design is broken. Category's catName name field is static and so only one object exists for the entire class. If you change it, you change it class wide. This is why Obj1 and Obj2 (bad names for variables by the way) share the same name and display the same name.This class should be broken into two classes, one say called Category that has no static fields, no List fields, has private instance fields, constructor(s), public methods, and another, perhaps called Categories, that holds a non-static ArrayList, with the addCategory(...) and such methods. Fix this first before concerning yourself with GUI, else you'll be building your house on a very shaky foundation. Whenever you create a static field, always ask yourself why you're doing this, and strongly consider seeing if you can make it instance instead.",[],User Interface Components with Swing,"{""Choice Components"": 0.85}"
44728150,44826204,Java making a copy of a list thread safe?,"I have multiple threads running in a Java application, and all of them need to access the same list. Only one thread, however, actually needs to insert/delete/change the list, and the others just need to access it.In the other threads, I want to make a copy of the list for me to use whenever I need to read it, but is there any way to do this in a thread safe way? If I had a method to copy the list element by element and the list changed, that would mess it up wouldn't it?EDIT:The list will not be deleted from very often, so would it work if I just copied it normally and caught exceptions? If the list grew in the middle of the copy and I missed it, it wouldn't really make a difference to functionality",[],<java><multithreading><list><concurrency>,44826204,"I decided to solve this by having a separate thread that handles the thread, with BlockingQueue for the other threads to submit to if they want to write to the list, or get from the list. If they wanted to write to the list it would submit an object with the content that they wanted to write, and if they wanted to read, it would submit a Future that the thread with the list would populate",[],Concurrency,"{""Synchronization"": 0.9}"
10344298,10344375,Convert byte array into a file without writing the file to a disk,"I have saved icon size images in a mysql database in bytes, now, what I need to do is retrieve those file bytes from the database and show those images in a swing application, I have a method which gets the bytes from the database and convert it back to a file but I have to write that file in to the diskthis is my method,--CODE--but this method doesn't give what I need, please assist me.","[""public void downloadFile(int FamerId) throws Exception {  String sql = \""SELECT * FROM images WHERE famer_id=?\"";  Connection con = JDBCConnectionPool.getInstance().checkOut();  PreparedStatement ps = con.prepareStatement(sql);          ps.setInt(1, FamerId);  ResultSet resultSet = ps.executeQuery();  int count = 0;  while (resultSet.next()) {    ByteArrayInputStream bais;    ObjectInputStream inputStream;    bais = new ByteArrayInputStream(resultSet.getBytes(\""image\""));    inputStream = new ObjectInputStream(bais);    SaveFile sf = (SaveFile) inputStream.readObject();    FileOutputStream out = new FileOutputStream(\""fileLocation/\"" + resultSet.getString(\""image_name\""));    byte[] bytes = sf.getArray();    int c = 0;    while (c < bytes.length) {      out.write(bytes[c]);      c++;    }    out.close();    inputStream.close();    bais.close();                JDBCConnectionPool.getInstance().checkOut();  }}""]",<java><swing><file>,10344375,"You can read images directly from byte streams with the [ImageIO](""http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html"") class. Assuming of course that you have previously written the image data in a compatible format. Which is hard to say given the fact that in your code you use an intermediary object input stream when reading your byte data. Here's an example of how you can create an image directly from the database without using intermediary files:--CODE--And an example of how you would have written the data to the database, in order to be able to use this code:--CODE--","[""bais = new ByteArrayInputStream(resultSet.getBytes(\""image\""));final BufferedImage image = ImageIO.read(bais);// pass the image to your Swing layer to be rendered."", ""final ByteArrayOutputStream baos = new ByteArrayOutputStream(64000);ImageIO.write(image, \""PNG\"", baos);final byte[] data = baos.toByteArray();// write data to database""]",Fundamental Programming Structures in Java,"{""Input and Output"": 0.9}"
22759934,,Which object do these threads synchronize on,I want to synchronize 3 threads invoked via ExecutorService. How do I ensure that they synchronize on the same object?Right now I have this code:--CODE--One of these threads is responsible for generating a condition and the other 2 act on it. ,"[""class Test {     executor.submit(new Request(threadNames[i]));    executor.submit(new Request(threadNames[i]));    executor.submit(new Request(threadNames[i]));     private class Request implements Callable {        @Override        public Long call() throws InterruptedException {            if (threadName.equals(\""SOMETHING\"") {                doSomething();            } else {                doSomeOtherThing();            }        }    }    private synchronized void doSomething() {    }    private synchronized void doSomeOtherThing() {    }    ...}""]",<java><multithreading><monitor><synchronized>,22760039,"You don't get to submit threads to the Executor service; you submit tasks, which will at some later point be executed on one of the threads in the Executor's thread pool;if one task is a producer and the two others consumers, then it is wrong to submit all three tasks to the Executor. It can easily lead to a deadlock, where a consumer task waits indefinitely for the producer, but the producer can't run because the consumers are occupying all the threads.Rethink your solution so that the producer task is also responsible for submitting the consumer tasks to the Executor; the tasks can be instantiated with the produced value, so the coordination problem is solved at the outset.",[],Concurrency,"{""Synchronization"": 0.85}"
48936177,48936483,Update AtomicInteger from other thread,"I have a class that creates many new objects each on their own thread and I would like to keep a running count across the threads. I wanted to have an AtomicInteger but it's not doing what I expected and instead just gets a smaller version. I'm assuming that this is a race condition error - but I'm not entirely sure.A created this test example which recreates what I want to do.--CODE--However, this outputs: --CODE--When I would like the final output to be 1000. How can I increment across threads?Thanks in advance.","[""public class Test {    public static void main(String args[]) {        AtomicInteger total = new AtomicInteger(0);        for (int i = 0; i < 10; i++) {            DoThing doThing = new DoThing();            Thread thread = new Thread(doThing);            thread.start();            total.addAndGet(doThing.getTally());        }        System.out.println(total.get());    }}class DoThing implements Runnable {    int tally = 0;    @Override    public void run() {        for(int i = 0; i< 100; i++) {            tally++;        }        System.out.println(\""Tally is \"" + tally);    }    public int getTally() {        return tally;    }}"", ""Tally is 100Tally is 100Tally is 100Tally is 100Tally is 100Tally is 100Tally is 100Tally is 1000Tally is 100Tally is 100""]",<java><multithreading><atomicinteger>,48936483,"Try with this:--CODE--The root of your problem is that you are misunderstanding how to use AtomicInteger, you are treating it just like a normal int and it is not being accessed concurrently at all.Also getTally() is a race condition until you assure that the thread has completed by calling Thread.join().So you can keep an up-to-date tally by having all the Runnables in the threads update the same AtomicInteger instance and you can ensure that you have the right total by waiting for all the threads to finish their tallies by join()ing them before getting the tally.","[""public static void main(String args[]) {    AtomicInteger tally = new AtomicInteger(0);    List<Thread> threadList = new ArrayList<Thread>();    for (int i = 0; i < 10; i++) {        Thread t = new Thread(new DoThing(tally));        t.start();        threadList.add(t);    }    for (Thread t : threadList) {        try { t.join(); } catch (Exception e){}    }    System.out.println(\""Total tally: \"" + tally.get());}public static class DoThing implements Runnable {    private static final Random rand = new Random();    private final AtomicInteger tally;    public DoThing(AtomicInteger tally) {        this.tally = tally;    }    @Override public void run() {        for (int i = 0; i < 100; i++) {            int currTally  = tally.incrementAndGet();            System.out.println(\""Thread \"" + Thread.currentThread().getName() + \"": \"" + currTally);            // Random sleep to show that your threads are properly concurrently incrementing            try { Thread.sleep(rand.nextInt(10)); } catch (Exception e) {}        }    }}""]",Concurrency,"{""Synchronization"": 1.0}"
38026326,,precise behaviour of interrupt() method with respective to thread states in java,"I have read the post below What does java.lang.Thread.interrupt() do? but i have not been able to get it completely rightI quote from @Mike_q answer to above question as below  Thread.interrupt() sets the interrupted status/flag of the target thread. Then code running in that target thread MAY poll the interrupted status and handle it appropriately. Some methods that block such as Object.wait() may consume the interrupted status immediately and throw an appropriate exception (usually InterruptedException)It says while object is in WAITING it can consume interrupted status, so what happens when it is BLOCKED state waiting for object's lock ... ?i have experimented below with that scenario and code is at X: t2 is blocked--CODE--and output has below--CODE--it seems that InterruptedException has been called ,when sleep method is called later... why is that ...?again what is polling i didn't quite understand from what is said here  Polling occurs via the Thread.interrupted() method which returns the current thread's interrupted status AND clears that interrupt flag. Usually the thread might then do something such as throw InterruptedException.again whenever i called Thread2.interrupted() method in above code it returned false  (when i called just after t2.interrupt  and in catch block) ","[""    public class interruptsyc{    static Object resource = new Object();    public static void main(String []args)    {        System.out.println(\""started main\"");        Thread1 t1=new Thread1(\""thread 1\"");        t1.start();        delay(1000);        Thread2 t2 =new Thread2(\""thread 2\"");        t2.start();        delay(1000);        t2.interrupt(); // X: at this point t2 is in blocked state waiting for resource's lock        System.out.println(t2.getName()+t2.interrupted());        delay(1000);        System.out.println(\""end main\"");    }    static void delay(long n)    {        try        {        Thread.sleep(n);        }        catch(InterruptedException ex)        {            System.out.println(Thread.currentThread().getName()+Thread.interrupted());            ex.printStackTrace();        }    }    static class Thread1 extends Thread{        Thread1(String name)        {            setName(name);        }        public void run()        {            synchronized(resource)            {                System.out.println(\""start 1\"");                delay(6000);                System.out.println(\""end 1\"");            }        }    }    static class Thread2 extends Thread{        Thread2(String name )        {        setName(name);          }        public void run()        {            synchronized(resource)            {                System.out.println(\""start 2\"");                delay(2000);                System.out.println(\""end 2\"");            }        }    }}"", ""started mainstart 1falseend mainend 1start 2thread 2falsejava.lang.InterruptedException: sleep interrupted        at java.lang.Thread.sleep(Native Method)        at interruptsyc.delay(interruptsyc.java:25)        at interruptsyc$Thread2.run(interruptsyc.java:59)end 2""]",<java><multithreading><interrupt><thread-sleep><interrupted-exception>,38026604,"  it seems that InterruptedException has been called ,when sleep method is called later... why is that ...?Because blocking/sleeping methods don't block immediately. They first check if the thread has been interrupted, and if it has been, they throw an InterruptedException immediately, in order for the thread to stop ASAP.  whenever i called Thread2.interrupted() method in above code it returned falseBecause when blocking/sleeping methods throw an InterruptedException, they also clear the interrupt flag.This is in the javadoc of [Thread.sleep()](""https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#sleep-long-""):  Throws InterruptedException - if any thread has interrupted the current thread. The interrupted status of the current thread is cleared when this exception is thrown.",[],Concurrency,"{""Thread Properties"": 0.9}"
40325618,40325670,The password validation sends out the wrong output?,"The program that I've written is giving me the wrong output. It verifies whether the input password is 6 characters long with letters and numbers, if one of the requirement is not met, then it should say ""Invalid Password."" Otherwise, then it should output ""Password Accepted."" But when I enter more than 6 character long password, though the password is all letters, it still say password accepted.--CODE--","[""import java.util.*;public class passwd {    public static void main(String[] args)    {        String in_pass;        int i = 0, x = 0, l = 0, d = 0;        boolean valid_len;        Scanner in = new Scanner(System.in);        System.out.print(\""Enter Password: \"");        in_pass = in.next();        int len = in_pass.length();        valid_len = (len >= 6) ? true : false;        char passwd_l;        char passwd_d;        if (valid_len == false)        {            System.out.println(\""Invalid Password\"");        }        else if (valid_len == true)        {            for (i = 0, x = 0; i < len; i++, x++)            {                passwd_l = in_pass.charAt(i);                if (Character.isLetter(passwd_l))                {                    l += i;                }                passwd_d = in_pass.charAt(x);                if (Character.isDigit(passwd_d))                {                    d += x;                }            }        }         if (i > 0 &amp;&amp; x > 0)        {            System.out.println(\""Password Accepted\"");        }     }  }""]",<java><string><for-loop><char><passwords>,40325670,Check out this one!    --CODE--,"[""else if (valid_len == true){       for (i = 0; i < len; i++){              passwd_l = in_pass.charAt(i);              if (Character.isLetter(passwd_l))              {                    l ++;              }              if (Character.isDigit(passwd_l))              {                    d ++;              }       }} if (l > 0 &amp;&amp; d > 0){       System.out.println(\""Password Accepted\"");} ""]",Fundamental Programming Structures in Java,"{""Strings"": 0.9}"
47843147,47843229,Java tab's contents keep moving,"This code's purpose [Open Java file, than content of that Java file will display at new Tab] I also try to make compile func but I need to solve this problem at here first.My problem is when I try to open new Java file, then last content of Java file I opened accumulate to new content of Java file. I don't know why, is there a way to solve this?--CODE--","[""package term_project_GUI;import javax.swing.*;import javax.swing.filechooser.*;import java.awt.*;import java.awt.event.*;import java.io.*;public class JavaIDE_UI extends JFrame {    Container contentPane;    JTabbedPane tp;    JPanel p1 = new JPanel();    JPanel p2 = new JPanel();    JTextArea ta = new JTextArea(15, 30);    JScrollPane sp = new JScrollPane(ta);    JavaIDE_UI() {        setTitle(\""JavaIDE\"");        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        createMenu();        contentPane = getContentPane();        contentPane.setLayout(new BorderLayout());        tp = new JTabbedPane();        contentPane.add(tp, BorderLayout.NORTH);        contentPane.add(p2, BorderLayout.SOUTH);        setSize(400, 500);        setVisible(true);    }    void createMenu() {        JMenuBar mb = new JMenuBar();        JMenu File = new JMenu(\""File\"");        JMenu Run = new JMenu(\""Run\"");        JMenuItem Open = new JMenuItem(\""Open\"");        JMenuItem Close = new JMenuItem(\""Close\"");        JMenuItem Save = new JMenuItem(\""Save\"");        JMenuItem SaveAs = new JMenuItem(\""Save As\"");        JMenuItem Quit = new JMenuItem(\""Quit\"");        JMenuItem Compile = new JMenuItem(\""Compile\"");    Open.addActionListener(new OpenActionListener_open());    File.add(Open);    File.add(Close);    File.add(Save);    File.add(SaveAs);    File.add(Quit);    Run.add(Compile);    mb.add(File);    mb.add(Run);    setJMenuBar(mb);}class OpenActionListener_open implements ActionListener {    JFileChooser chooser;    JTextArea ta = new JTextArea(15, 30);    OpenActionListener_open() {        chooser = new JFileChooser();    }    public void actionPerformed(ActionEvent e) {        FileNameExtensionFilter filter = new FileNameExtensionFilter(\"".java files\"", \""java\"");        chooser.setFileFilter(filter);        int ret = chooser.showOpenDialog(null);        if (ret != JFileChooser.APPROVE_OPTION) {            JOptionPane.showMessageDialog(null, \""File Unchoose.\"", \""Warning\"", JOptionPane.WARNING_MESSAGE);            return;        }        String fileName = chooser.getSelectedFile().getName();        tp.addTab(fileName, new JScrollPane(ta));        String filePath = chooser.getSelectedFile().getPath();        try {            BufferedReader reader = new BufferedReader(new FileReader(filePath));            String data = \""\"";            while ((data = reader.readLine()) != null) {                ta.append(data+\""\\n\"");            }            reader.close();        } catch (IOException e1) {        }    }}public static void main(String[] args) {    new JavaIDE_UI();}}""]",<java><swing><jtextarea><jtabbedpane>,47843229,"You're creating two instance of JTextArea, one is an instance field of JavaIDE_UI and the other is an instance field of OpenActionListener_open.When the actionPerformed method is called, it's appending the text to the existing JTextArea (of the OpenActionListener_open), a process which will also remove it from it's current tab/scroll pane and move it to the new one you've creatingSo, instead, create a new JTextArea for each tab...--CODE--This example will also select the tab so you can see the newly opened file.Also, I would change to contentPane.add(tp, BorderLayout.NORTH); contentPane.add(tp);, otherwise you're going to have some weird layout issues","[""class OpenActionListener_open implements ActionListener {    JFileChooser chooser;    OpenActionListener_open() {        chooser = new JFileChooser();    }    public void actionPerformed(ActionEvent e) {        FileNameExtensionFilter filter = new FileNameExtensionFilter(\"".java files\"", \""java\"");        chooser.setFileFilter(filter);        int ret = chooser.showOpenDialog(null);        if (ret != JFileChooser.APPROVE_OPTION) {            JOptionPane.showMessageDialog(null, \""File Unchoose.\"", \""Warning\"", JOptionPane.WARNING_MESSAGE);            return;        }        String fileName = chooser.getSelectedFile().getName();        JTextArea ta = new JTextArea();        JScrollPane sp = new JScrollPane(ta);        tp.addTab(fileName, sp);        String filePath = chooser.getSelectedFile().getPath();        try {            BufferedReader reader = new BufferedReader(new FileReader(filePath));            String data = \""\"";            while ((data = reader.readLine()) != null) {                ta.append(data + \""\\n\"");            }            reader.close();        } catch (IOException e1) {        }        tp.setSelectedComponent(sp);    }}""]",User Interface Components with Swing,"{""Text Input"": 0.85}"
25786269,25786522,Change to Look and Feel of customized JFileChooser raises an exception,"When i open the dialog box through CustomizedJFileChooser. JfileChooser look and Feel not good. so, for look and feel i am adding the code --CODE--it raise the exception.Here is my code,--CODE--Here stack trace of excetpion:--CODE--Thank you.","[""UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());"", ""    public class FileChooser extends JFrame {    private JPanel contentPane;    MyFileChooser jc;    public static void main(String[] args) {        EventQueue.invokeLater(new Runnable() {            public void run() {                try {                    UIManager.setLookAndFeel(                            UIManager.getSystemLookAndFeelClassName());                    FileChooser frame = new FileChooser();                    frame.setVisible(true);                } catch (Exception e) {                    e.printStackTrace();                }            }        });    }        public FileChooser() {        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        contentPane = new JPanel();        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));        contentPane.setLayout(new BorderLayout(0, 0));        setContentPane(contentPane);        jc = new MyFileChooser();        JButton btnOpen = new JButton(\""open\"");        contentPane.add(btnOpen, BorderLayout.NORTH);        btnOpen.addActionListener(new ActionListener() {            public void actionPerformed(ActionEvent e) {                int returnVal = jc.showOpenDialog(FileChooser.this);            }        });          pack();         }         }         class MyFileChooser extends JFileChooser{         public MyFileChooser() {         JComboBox comboBox = new JComboBox();          comboBox.setModel(new DefaultComboBoxModel(new String[] { \""text\"", \""binary\"" }));          JPanel panel1 = (JPanel)this.getComponent(3);        JPanel panel2 = (JPanel) panel1.getComponent(3);           Component c1=panel2.getComponent(0);        Component c2=panel2.getComponent(1);        panel2.removeAll();        panel2.add(new JLabel(\""Document Name: \""));        panel2.add(comboBox);        panel2.add(c1);        panel2.add(c2);   }}"", ""java.lang.ArrayIndexOutOfBoundsException: No such child: 3at java.awt.Container.getComponent(Container.java:327)at MyFileChooser.<init>(FileChooser.java:62)at FileChooser.<init>(FileChooser.java:41)at FileChooser$1.run(FileChooser.java:27)at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)at java.awt.EventQueue.access$200(EventQueue.java:103)at java.awt.EventQueue$3.run(EventQueue.java:688)at java.awt.EventQueue$3.run(EventQueue.java:686)at java.security.AccessController.doPrivileged(Native Method)at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)at java.awt.EventQueue.dispatchEvent(EventQueue.java:697)at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)""]",<java><swing><indexoutofboundsexception><look-and-feel><jfilechooser>,25786522,"The Component List has a zero-based index. Modify these two lines like below and it works. MyFileChooser has panel1 at index 2 and panel1 has the other panel also at index 2.--CODE--You forgot to add the third component to panel2. The combobox is teared but you can fix its height afterwards.My mistake, I forgot to add the panel containing the buttons. I have also added the combobox to its own panel and now it doesn't get teared anymore. Should work fine now.--CODE--}","[""JPanel panel1 = (JPanel) this.getComponent(2);JPanel panel2 = (JPanel) panel1.getComponent(2);"", ""class MyFileChooser extends JFileChooser {public MyFileChooser() {    JComboBox comboBox = new JComboBox();    comboBox.setModel(new DefaultComboBoxModel(new String[]{\""text\"", \""binary\""}));    JPanel panel1 = (JPanel) this.getComponent(2);      JPanel panel2 = (JPanel) panel1.getComponent(2);      Component c1=panel2.getComponent(0);      Component c2=panel2.getComponent(1);      Component c3=panel2.getComponent(2);      Component c4=panel2.getComponent(3);      Component c5=panel2.getComponent(4);      JPanel comboboxPanel = new JPanel();      comboboxPanel.setLayout(new FlowLayout());      comboboxPanel.add(new JLabel(\""Document Name: \""));      comboboxPanel.add(comboBox);      panel2.removeAll();      panel2.add(comboboxPanel);      panel2.add(Box.createRigidArea(new Dimension(5,5)));      panel2.add(c1);      panel2.add(c2);      panel2.add(c3);      panel2.add(c4);      panel2.add(c5);}""]",User Interface Components with Swing,"{""Dialog Boxes"": 0.8, ""Choice Components"": 0.85}"
6647944,,confusion about the results of java String,--CODE--I want to know why both the println methods are giving different results.Please explain in details.,"[""class Test{       public static void main(String s[]){              String s1=\""welcome\"",s2=\""come\"";                      System.out.println(s1==(\""wel\""+\""come\""));    //prints : true              System.out.println(s1==(\""wel\""+s2));        //prints : false      }}""]",<java><string><jdk1.6>,6648012,"== always compares the references themselves.In the first comparison, the constant string expression ""wel"" + ""come"" is evaluated at compile-time, and so you end up with the same interned reference as for the literal used to initialize s1.In the second case, the concatenation is performed at execution time, creating a new string.To compare two strings for equality of contents (rather than checking whether two references refer to the same object) use equals:--CODE--","[""System.out.println(s1.equals(\""wel\"" + \""come\""));System.out.println(s1.equals(\""wel\"" + s2));""]",Fundamental Programming Structures in Java,"{""Strings"": 1.0}"
26485866,,BufferedReader won't read after first line,"I have 4 text files a.txt,b.txt,c.txt and c.txt I have a codition to fetch line from a.txt and if the condition follows then I have another  condition to fetch further from either b,c or d (which ever follows the condition)--CODE--The Outer loop is for a.txt and inner 3 loops for b,c and d. The code only prints when first condition is satisfied in a.txt. IT'S NOT CHECKING for furthur lines in a.txt. I have tried it with Scanner method, but same problem is there.","[""import java.io.*; public class Scholarship { public static void main(String[] args) {    try{        FileInputStream fstream1 = new  FileInputStream(\""a.txt\"");         FileInputStream fstream2 = new  FileInputStream(\""b.txt\"");         FileInputStream fstream3 = new  FileInputStream(\""c.txt\"");         FileInputStream fstream4 = new  FileInputStream(\""d.txt\"");                    DataInputStream in1 = new DataInputStream(fstream1);             DataInputStream in2 = new DataInputStream(fstream2);             DataInputStream in3 = new DataInputStream(fstream3);             DataInputStream in4 = new DataInputStream(fstream4);              BufferedReader br1 = new BufferedReader(new InputStreamReader(in1));              BufferedReader br2 = new BufferedReader(new InputStreamReader(in2));              BufferedReader br3 = new BufferedReader(new InputStreamReader(in3));              BufferedReader br4 = new BufferedReader(new InputStreamReader(in4));        String strLine1=null;        String strLine2=null;        String strLine3=null;        String strLine4=null;        while((strLine1 = br1.readLine()) != null){           String[] column1 = strLine1.split(\""\\\\|\"");           if(Integer.parseInt(column1[1])<5000) {                   while((strLine2 = br2.readLine())!=null){                   String[] column2 = strLine2.split(\""\\\\|\"");                   if(  (column1[0].equals(column2[0]))&amp;&amp;(column2[2].equals(\""mumbai\""))&amp;&amp;( (column2[3].equals(\""C\""))||(column2[3].equals(\""D\"")) ) ){                        System.out.println(strLine2);                   }//if ends                                   }//while ends                 while((strLine3 = br3.readLine())!=null){                   String[] column3 = strLine3.split(\""\\\\|\"");                   if(  (column1[0].equals(column3[0]))&amp;&amp;(column3[2].equals(\""mumbai\""))&amp;&amp;( (column3[3].equals(\""C\""))||(column3[3].equals(\""D\"")) ) ){                        System.out.println(strLine3);                   }//if ends                                   }//while ends                 while((strLine4 = br4.readLine())!=null){                   String[] column4 = strLine4.split(\""\\\\|\"");                   if(  (column1[0].equals(column4[0]))&amp;&amp;(column4[2].equals(\""mumbai\""))&amp;&amp;( (column4[3].equals(\""C\""))||(column4[3].equals(\""D\"")) ) ){                        System.out.println(strLine4);                   }//if ends                                   }//while ends                }//if ends                   }//while ends               in1.close();        in2.close();        in3.close();        in4.close();    }catch (Exception e){//Catch exception if any        System.err.println(\""Error: \"" + e.getMessage());    }}}""]",<java><file><loops><java.util.scanner><bufferedreader>,26486098,"You should not use the DataInputStream unless you intentionally want to read primitive Java data types (see [http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html](""http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html"")).You could instantiate the BufferedReader reader either like this:--CODE--or traditionally like this:--CODE--At the end you can close all the BufferedReaders. They will implicitly cascade close all their containing streams.","[""BufferedReader br1 = Files.newBufferedReader(Paths.get(\""a.txt\""), StandardCharsets.UTF_8);"", ""BufferedReader br1 = new BufferedReader(new FileReader(\""a.txt\""));""]",Fundamental Programming Structures in Java,"{""Input and Output"": 1.0}"
7600455,7600485,Strange Swing compile-time accessibility error,"Here is the code ---CODE--And here is the error message -  No enclosing instance of type SetLabelForDemo is accessible. Must  qualify the allocation with an enclosing instance of type  SetLabelForDemo (e.g. x.new A() where x is an instance of  SetLabelForDemo).I don't understand this error at all. To me, everything seems perfectly valid. Am I missing something?","[""import javax.swing.JButton;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.SwingUtilities;public final class SetLabelForDemo {    public static void main(String[] args){        SwingUtilities.invokeLater(new Runnable(){            @Override            public void run() {                createAndShowGUI();                         }        });    }    private static void createAndShowGUI(){        final JFrame frame = new JFrame();        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        frame.getContentPane().add(new JLabeledButton(\""foo:\"")); // new JLabeledButton(\""foo:\"") is the problem        frame.pack();        frame.setLocationRelativeTo(null);        frame.setVisible(true);    }    private final class JLabeledButton extends JButton{        public JLabeledButton(final String s){            super();            JLabel label = new JLabel(s);            label.setLabelFor(this);        }    }}""]",<java><eclipse><swing>,7600485,You'll have to declare your class JLabeledButton static since you instantiate it within a static context:--CODE--Because your method createAndShowGUI is static the compiler does not know for which instance of SetLabelForDemo you are creating the enclosed class.,"[""private static final class JLabeledButton extends JButton {    ...}""]",User Interface Components with Swing,"{""Choice Components"": 0.85}"
18024246,18024727,Set Value and Label to JComboBox,"I have a JComboBox where the items are the results of a query. The combo shows all the categories names taken from a query, right? Ok, it works. Now I need to give each item a value, which would be the ID of the product.This is what I've got so far:--CODE--As you can see in the code, the ""label"" of each item is the name of it. Now, how can I set each item its ID so I can manipulate after?Thanks and try to answer easily, I'm having the hardest time trying to get this Java thing! Ha!","[""    final JComboBox proveedorCombo = new JComboBox();    contentPanel.add(proveedorCombo);    ProveedorDAO dao = new ProveedorDAO();    List<Proveedor> proveedor = dao.getAll();    Object[][] elementos = new Object[proveedor.size()][2];    for (int i = 0; i < proveedor.size(); i++) {        Proveedor p = proveedor.get(i);        elementos[i][0] = p.getId();        elementos[i][1] = p.getNombre();        proveedorCombo.addItem(elementos[i][1]);    }""]",<java><swing><label><jcombobox>,18024727,JComboBox by default uses a renderer wich uses toString() method to display object data. So you can make your own render class to customize the view.This is the way it was designed for.--CODE--Another hacky approach is overriding toString() from Proveedor or making your adapter class that uses your toString() but this solution is not much flexible as the other one.--CODE--In the combobox if you want to populate from zero.--CODE--Or if you have previous data and you want to maintain.--CODE--,"[""proveedorCombo.setRenderer( new DefaultListCellRenderer(){        @Override          public Component getListCellRendererComponent(            JList list, Object value, int index,            boolean isSelected, boolean cellHasFocus)        {            super.getListCellRendererComponent(list, value, index,                isSelected, cellHasFocus);                if(value != null){                 Proveedor proveedor = (Proveedor)value;                 setText( proveedor.getName());                }            return this;        }});"", ""public class Proveedor {//in some part@Overridepublic String toString(){    return this.nombre;}}"", ""proveedorCombo.setModel(new DefaultComboBox(new Vector<Proveedor>(dao.getAll())));"", ""for(Proveedor p : dao.getAll){    proveedorCombo.addItem(p);}""]",User Interface Components with Swing,"{""Choice Components"": 0.85}"
18801243,18801289,Java Swing JFileChooser append files to a JTextArea,I have a browse button which opens a dialog where the user can view directories and files. I am having some trouble appending the files the user selects to a JTextArea. I am trying to do this so the user can select multiple files at a time. The files eventually will be submitted to an Oracle database. The code I have used for the filechooser is here: --CODE--Can you please show me how to append the files to a JTextArea?Thanks.Edit: I have added the following: --CODE--But when selecting browse and choosing multiple files and then selecting open the files are not being displayed within the text area. Full Code: --CODE--,"[""final JFileChooser fc = new JFileChooser();        JList list = new JList();        fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);        if (JFileChooser.APPROVE_OPTION == fc.showOpenDialog(list)) {        File file = fc.getSelectedFile();"", ""JButton btnBrowse = new JButton(\""Browse\"");        btnBrowse.addActionListener(new ActionListener() {            public void actionPerformed(ActionEvent arg0) {                final JFileChooser fc = new JFileChooser();                fc.setMultiSelectionEnabled(true);                JList list = new JList();                fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);                if (JFileChooser.APPROVE_OPTION == fc.showOpenDialog(list)) {                     File file = fc.getSelectedFile();                }                   for (File file : fc.getSelectedFiles()) {                       log.append(file.getPath());                    }            }        });"", ""package com.example.android.apis.appwidget;import java.awt.BorderLayout;import java.awt.EventQueue;import javax.swing.JFrame;import javax.swing.JPanel;import javax.swing.border.EmptyBorder;import javax.swing.JLabel;import javax.swing.SwingConstants;import java.awt.Font;import javax.swing.JFileChooser;import javax.swing.JList;import javax.swing.JTextArea;import javax.swing.JButton;import javax.swing.JComboBox;import javax.swing.JCheckBox;import java.awt.event.ActionListener;import java.awt.event.ActionEvent;import java.io.File;import java.awt.Color;import javax.swing.UIManager;public class VFSTool extends JFrame {    private JPanel contentPane;      static private final String newline = \""\\n\"";        JButton openButton, saveButton;        JTextArea log;        JFileChooser fc;    /**     * Launch the application.     */    public static void main(String[] args) {        EventQueue.invokeLater(new Runnable() {            public void run() {                try {                    VFSTool frame = new VFSTool();                    frame.setVisible(true);                } catch (Exception e) {                    e.printStackTrace();                }            }        });    }    /**     * Create the frame.     */    public Tool() {        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        setBounds(100, 100, 499, 423);        contentPane = new JPanel();        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));        contentPane.setLayout(new BorderLayout(0, 0));        setContentPane(contentPane);        JLabel lblVfsLoaderTool = new JLabel(\""Tool\"");        lblVfsLoaderTool.setBackground(new Color(255, 255, 153));        lblVfsLoaderTool.setForeground(UIManager.getColor(\""Button.darkShadow\""));        lblVfsLoaderTool.setFont(new Font(\""Copperplate Gothic Light\"", Font.BOLD, 25));        lblVfsLoaderTool.setHorizontalAlignment(SwingConstants.CENTER);        contentPane.add(lblVfsLoaderTool, BorderLayout.NORTH);        JPanel panel = new JPanel();        panel.setBackground(UIManager.getColor(\""Button.darkShadow\""));        contentPane.add(panel, BorderLayout.CENTER);        panel.setLayout(null);        JButton btnBrowse = new JButton(\""Browse\"");        btnBrowse.addActionListener(new ActionListener() {            public void actionPerformed(ActionEvent arg0) {                final JFileChooser fc = new JFileChooser();                fc.setMultiSelectionEnabled(true);                JList list = new JList();                fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);                if (JFileChooser.APPROVE_OPTION == fc.showOpenDialog(list)) {                     File file = fc.getSelectedFile();                }                   for (File file : fc.getSelectedFiles()) {                    log.append(file.getPath() + System.getProperty(\""line.separator\""));                    }            }        });        btnBrowse.setBounds(107, 185, 97, 25);        panel.add(btnBrowse);        JLabel lblCategory = new JLabel(\""label1\"");        lblCategory.setForeground(UIManager.getColor(\""Button.background\""));        lblCategory.setBounds(12, 13, 82, 25);        panel.add(lblCategory);        JComboBox comboBox = new JComboBox();        comboBox.setForeground(UIManager.getColor(\""Button.background\""));        comboBox.setBounds(91, 13, 113, 24);        panel.add(comboBox);        JLabel lblNewLabel = new JLabel(\""label2\"");        lblNewLabel.setForeground(UIManager.getColor(\""Button.background\""));        lblNewLabel.setBounds(12, 50, 77, 25);        panel.add(lblNewLabel);        JComboBox comboBox_1 = new JComboBox();        comboBox_1.setBounds(91, 50, 113, 25);        panel.add(comboBox_1);        JLabel lblLanguage = new JLabel(\""label3\"");        lblLanguage.setForeground(UIManager.getColor(\""Button.background\""));        lblLanguage.setBounds(12, 114, 56, 16);        panel.add(lblLanguage);        JComboBox comboBox_2 = new JComboBox();        comboBox_2.setBounds(91, 110, 113, 25);        panel.add(comboBox_2);        JCheckBox chckbxIncludeExt = new JCheckBox(\""include\"");        chckbxIncludeExt.setForeground(UIManager.getColor(\""Button.background\""));        chckbxIncludeExt.setBackground(UIManager.getColor(\""Button.darkShadow\""));        chckbxIncludeExt.setBounds(12, 219, 113, 25);        panel.add(chckbxIncludeExt);        JButton btnSubmit = new JButton(\""Submit\"");        btnSubmit.setBounds(107, 264, 97, 25);        panel.add(btnSubmit);        JTextArea textArea = new JTextArea();        textArea.setBounds(240, 14, 219, 220);        panel.add(textArea);    }}""]",<java><swing>,18801289,"Enable multi-file selection using [JFileChooser#setMultiSelectionEnabled](""http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#setMultiSelectionEnabled%28boolean%29""), then iterate through all files returned from [getSelectedFiles](""http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#getSelectedFiles%28%29""), appending the output of [getPath](""http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getPath%28%29"") to your JTextArea--CODE--Edit:You should be getting a stacktrace like this--CODE--This is telling you that something is not initialized, i.e. your JTextArea logNot only has this not been initialized but hasnt been added to the frame. You probably want the text displayed in textArea instead. This is only available in the scope of the constructor so will need to declared as a class member variable. --CODE--","[""if (JFileChooser.APPROVE_OPTION == fc.showOpenDialog(list)) {    for (File file : fc.getSelectedFiles()) {       myTextArea.append(file.getPath() + System.getProperty(\""line.separator\""));    }}"", ""Exception in thread \""AWT-EventQueue-0\"" java.lang.NullPointerException    at swing9.VFSTool$2.actionPerformed(VFSTool.java:81)    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)"", ""private JTextArea textArea;""]",User Interface Components with Swing,"{""Text Input"": 0.8, ""Sophisticated Layout Management"": 0.75}"
26760535,26761039,Java - convert string of letters to a string of digits,"I'm trying to learn Java but I'm stuck at an exercise: I have to write a ""decrypt()"" method, that converts a String like b.aab and returns to double value 1.001.I'm also given a 2 dimensional array of characters and the number they represent. --CODE--I know there is technique to convert a char ch into a digit with its ascii value, something like ch -'a' + 1, but I'm not sure how to apply this here. So my question is: How can I convert a String of letters to String of corresponding digits? From there I would use parseDouble(); to return a double of the String. Thank you in before. ","[""private static String conversionTable[][] = {        {\""a\"", \""0\""},        {\""b\"", \""1\""},        {\""c\"", \""2\""},        {\""d\"", \""3\""},        {\""e\"", \""4\""},        {\""f\"", \""5\""},        {\""g\"", \""6\""},        {\""h\"", \""7\""},        {\""i\"", \""8\""},        {\""j\"", \""9\""},};""]",<java><string>,26761039,--CODE--},"[""import java.util.Scanner;public class Program10 {         public static void main(String[] args) {                System.out.println(\""Enter a string to decrypt\"");                Scanner sc = new Scanner(System.in);                String input = sc.nextLine();              decrypt(input);    }      public static void decrypt(String input) {          char ch;          String str = \""\"";          int length = input.length();         for(int i = 0; i < length ; i++) {                ch = input.charAt(i);                   if(ch != '.') {                       int val = (int) ch;                    str = str + (val - 97);                   } else {                     String x = \""\"" + ch;                     str = str.concat(x);                }         }         System.out.println(str);}""]",Fundamental Programming Structures in Java,"{""Strings"": 0.85, ""Data Types"": 0.8}"
31904648,31904680,Daemon Thread is still alive after closing the app,"I'm just testing with an almost empty android project.I created a daemon thread in the Main Activity.Started the app, and pressed the back button on the phone to close the app.But the daemon thread never dies.Daemon Thread works really well with an empty JAVA PROJECT.But with android, doesn't work.I searched for the solution for hours but only got this.  A daemon thread only runs as long as there are non-daemon threads  running. When the last non-daemon thread ends, the runtime will exit.  This is not normally relevant to applications with a UI.Does anyone know how to solve this?PS.I stopped the app not by pressing the hardware back button but by pressing the 'Force stop' button in 'App info', and both of the app and the thread are gone!I first learned about Daemon Thread from some example codes for android develoment.But nobody mentioned about what I've experienced.Do android developers just believe Daemon Threads will be killed for sure?",[],<java><android><multithreading><daemon>,31904680,"  But the daemon thread never dies.Presumably, you did not cancel() the thread. You need to do this at an appropriate point.  But with android, doesn't work.It works just fine. It works the same as in Java, as you can tell by reading your quoted passage. The difference is in [how long your process lives](""http://developer.android.com/guide/components/processes-and-threads.html#Processes"") and in the threads in that process (Android processes have other threads besides ones that you fork).   Does anyone know how to solve this?Call cancel() on your thread at an appropriate point.",[],Concurrency,"{""Thread Properties"": 0.9}"
